import{g as R}from"./@babel-DhV5f2z5.js";var D={exports:{}},P;function V(){return P||(P=1,function(M){var U=(()=>{var g=Object.defineProperty,O=Object.getOwnPropertyDescriptor,L=Object.getOwnPropertyNames,v=Object.getOwnPropertySymbols,x=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable,w=(_,r,o)=>r in _?g(_,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):_[r]=o,y=(_,r)=>{for(var o in r||(r={}))x.call(r,o)&&w(_,o,r[o]);if(v)for(var o of v(r))N.call(r,o)&&w(_,o,r[o]);return _},j=(_,r)=>{for(var o in r)g(_,o,{get:r[o],enumerable:!0})},$=(_,r,o,m)=>{if(r&&typeof r=="object"||typeof r=="function")for(let d of L(r))!x.call(_,d)&&d!==o&&g(_,d,{get:()=>r[d],enumerable:!(m=O(r,d))||m.enumerable});return _},E=_=>$(g({},"__esModule",{value:!0}),_),i=(_,r,o)=>w(_,typeof r!="symbol"?r+"":r,o),C={};j(C,{DEFAULT_OPTIONS:()=>q,DEFAULT_UUID_LENGTH:()=>f,default:()=>A});var F="5.2.2",f=6,q={dictionary:"alphanum",shuffle:!0,debug:!1,length:f,counter:0},I=class{constructor(r={}){i(this,"counter"),i(this,"debug"),i(this,"dict"),i(this,"version"),i(this,"dictIndex",0),i(this,"dictRange",[]),i(this,"lowerBound",0),i(this,"upperBound",0),i(this,"dictLength",0),i(this,"uuidLength"),i(this,"_digit_first_ascii",48),i(this,"_digit_last_ascii",58),i(this,"_alpha_lower_first_ascii",97),i(this,"_alpha_lower_last_ascii",123),i(this,"_hex_last_ascii",103),i(this,"_alpha_upper_first_ascii",65),i(this,"_alpha_upper_last_ascii",91),i(this,"_number_dict_ranges",{digits:[this._digit_first_ascii,this._digit_last_ascii]}),i(this,"_alpha_dict_ranges",{lowerCase:[this._alpha_lower_first_ascii,this._alpha_lower_last_ascii],upperCase:[this._alpha_upper_first_ascii,this._alpha_upper_last_ascii]}),i(this,"_alpha_lower_dict_ranges",{lowerCase:[this._alpha_lower_first_ascii,this._alpha_lower_last_ascii]}),i(this,"_alpha_upper_dict_ranges",{upperCase:[this._alpha_upper_first_ascii,this._alpha_upper_last_ascii]}),i(this,"_alphanum_dict_ranges",{digits:[this._digit_first_ascii,this._digit_last_ascii],lowerCase:[this._alpha_lower_first_ascii,this._alpha_lower_last_ascii],upperCase:[this._alpha_upper_first_ascii,this._alpha_upper_last_ascii]}),i(this,"_alphanum_lower_dict_ranges",{digits:[this._digit_first_ascii,this._digit_last_ascii],lowerCase:[this._alpha_lower_first_ascii,this._alpha_lower_last_ascii]}),i(this,"_alphanum_upper_dict_ranges",{digits:[this._digit_first_ascii,this._digit_last_ascii],upperCase:[this._alpha_upper_first_ascii,this._alpha_upper_last_ascii]}),i(this,"_hex_dict_ranges",{decDigits:[this._digit_first_ascii,this._digit_last_ascii],alphaDigits:[this._alpha_lower_first_ascii,this._hex_last_ascii]}),i(this,"_dict_ranges",{_number_dict_ranges:this._number_dict_ranges,_alpha_dict_ranges:this._alpha_dict_ranges,_alpha_lower_dict_ranges:this._alpha_lower_dict_ranges,_alpha_upper_dict_ranges:this._alpha_upper_dict_ranges,_alphanum_dict_ranges:this._alphanum_dict_ranges,_alphanum_lower_dict_ranges:this._alphanum_lower_dict_ranges,_alphanum_upper_dict_ranges:this._alphanum_upper_dict_ranges,_hex_dict_ranges:this._hex_dict_ranges}),i(this,"log",(...t)=>{const e=[...t];if(e[0]="[short-unique-id] ".concat(t[0]),this.debug===!0&&typeof console<"u"&&console!==null){console.log(...e);return}}),i(this,"_normalizeDictionary",(t,e)=>{let s;if(t&&Array.isArray(t)&&t.length>1)s=t;else{s=[],this.dictIndex=0;const h="_".concat(t,"_dict_ranges"),a=this._dict_ranges[h];let n=0;for(const[,p]of Object.entries(a)){const[c,b]=p;n+=Math.abs(b-c)}s=new Array(n);let l=0;for(const[,p]of Object.entries(a)){this.dictRange=p,this.lowerBound=this.dictRange[0],this.upperBound=this.dictRange[1];const c=this.lowerBound<=this.upperBound,b=this.lowerBound,S=this.upperBound;if(c)for(let u=b;u<S;u++)s[l++]=String.fromCharCode(u),this.dictIndex=u;else for(let u=b;u>S;u--)s[l++]=String.fromCharCode(u),this.dictIndex=u}s.length=l}if(e){const h=s.length;for(let a=h-1;a>0;a--){const n=Math.floor(Math.random()*(a+1));[s[a],s[n]]=[s[n],s[a]]}}return s}),i(this,"setDictionary",(t,e)=>{this.dict=this._normalizeDictionary(t,e),this.dictLength=this.dict.length,this.setCounter(0)}),i(this,"seq",()=>this.sequentialUUID()),i(this,"sequentialUUID",()=>{const t=this.dictLength,e=this.dict;let s=this.counter;const h=[];do{const n=s%t;s=Math.trunc(s/t),h.push(e[n])}while(s!==0);const a=h.join("");return this.counter+=1,a}),i(this,"rnd",(t=this.uuidLength||f)=>this.randomUUID(t)),i(this,"randomUUID",(t=this.uuidLength||f)=>{if(t===null||typeof t>"u"||t<1)throw new Error("Invalid UUID Length Provided");const e=new Array(t),s=this.dictLength,h=this.dict;for(let a=0;a<t;a++){const n=Math.floor(Math.random()*s);e[a]=h[n]}return e.join("")}),i(this,"fmt",(t,e)=>this.formattedUUID(t,e)),i(this,"formattedUUID",(t,e)=>{const s={$r:this.randomUUID,$s:this.sequentialUUID,$t:this.stamp};return t.replace(/\$[rs]\d{0,}|\$t0|\$t[1-9]\d{1,}/g,a=>{const n=a.slice(0,2),l=Number.parseInt(a.slice(2),10);return n==="$s"?s[n]().padStart(l,"0"):n==="$t"&&e?s[n](l,e):s[n](l)})}),i(this,"availableUUIDs",(t=this.uuidLength)=>Number.parseFloat(([...new Set(this.dict)].length**t).toFixed(0))),i(this,"_collisionCache",new Map),i(this,"approxMaxBeforeCollision",(t=this.availableUUIDs(this.uuidLength))=>{const e=t,s=this._collisionCache.get(e);if(s!==void 0)return s;const h=Number.parseFloat(Math.sqrt(Math.PI/2*t).toFixed(20));return this._collisionCache.set(e,h),h}),i(this,"collisionProbability",(t=this.availableUUIDs(this.uuidLength),e=this.uuidLength)=>Number.parseFloat((this.approxMaxBeforeCollision(t)/this.availableUUIDs(e)).toFixed(20))),i(this,"uniqueness",(t=this.availableUUIDs(this.uuidLength))=>{const e=Number.parseFloat((1-this.approxMaxBeforeCollision(t)/t).toFixed(20));return e>1?1:e<0?0:e}),i(this,"getVersion",()=>this.version),i(this,"stamp",(t,e)=>{const s=Math.floor(+(e||new Date)/1e3).toString(16);if(typeof t=="number"&&t===0)return s;if(typeof t!="number"||t<10)throw new Error(["Param finalLength must be a number greater than or equal to 10,","or 0 if you want the raw hexadecimal timestamp"].join(`
`));const h=t-9,a=Math.round(Math.random()*(h>15?15:h)),n=this.randomUUID(h);return"".concat(n.substring(0,a)).concat(s).concat(n.substring(a)).concat(a.toString(16))}),i(this,"parseStamp",(t,e)=>{if(e&&!/t0|t[1-9]\d{1,}/.test(e))throw new Error("Cannot extract date from a formated UUID with no timestamp in the format");const s=e?e.replace(/\$[rs]\d{0,}|\$t0|\$t[1-9]\d{1,}/g,a=>{const n={$r:c=>[...Array(c)].map(()=>"r").join(""),$s:c=>[...Array(c)].map(()=>"s").join(""),$t:c=>[...Array(c)].map(()=>"t").join("")},l=a.slice(0,2),p=Number.parseInt(a.slice(2),10);return n[l](p)}).replace(/^(.*?)(t{8,})(.*)$/g,(a,n,l)=>t.substring(n.length,n.length+l.length)):t;if(s.length===8)return new Date(Number.parseInt(s,16)*1e3);if(s.length<10)throw new Error("Stamp length invalid");const h=Number.parseInt(s.substring(s.length-1),16);return new Date(Number.parseInt(s.substring(h,h+8),16)*1e3)}),i(this,"setCounter",t=>{this.counter=t}),i(this,"validate",(t,e)=>{const s=e?this._normalizeDictionary(e):this.dict;return t.split("").every(h=>s.includes(h))});const o=y(y({},q),r);this.counter=0,this.debug=!1,this.dict=[],this.version=F;const{dictionary:m,shuffle:d,length:B,counter:T}=o;this.uuidLength=B,this.setDictionary(m,d),this.setCounter(T),this.debug=o.debug,this.log(this.dict),this.log("Generator instantiated with Dictionary Size ".concat(this.dictLength," and counter set to ").concat(this.counter)),this.log=this.log.bind(this),this.setDictionary=this.setDictionary.bind(this),this.setCounter=this.setCounter.bind(this),this.seq=this.seq.bind(this),this.sequentialUUID=this.sequentialUUID.bind(this),this.rnd=this.rnd.bind(this),this.randomUUID=this.randomUUID.bind(this),this.fmt=this.fmt.bind(this),this.formattedUUID=this.formattedUUID.bind(this),this.availableUUIDs=this.availableUUIDs.bind(this),this.approxMaxBeforeCollision=this.approxMaxBeforeCollision.bind(this),this.collisionProbability=this.collisionProbability.bind(this),this.uniqueness=this.uniqueness.bind(this),this.getVersion=this.getVersion.bind(this),this.stamp=this.stamp.bind(this),this.parseStamp=this.parseStamp.bind(this)}};i(I,"default",I);var A=I;return E(C)})();M.exports=U.default,typeof window<"u"&&(U=U.default)}(D)),D.exports}var z=V();const J=R(z);export{J as S};
