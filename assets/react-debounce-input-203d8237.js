import{g as R}from"./@babel-4e92b73b.js";import{r as S}from"./react-f7b5d7f9.js";import{l as T}from"./lodash.debounce-0ee8a4d4.js";var m={};function d(t){"@babel/helpers - typeof";return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},d(t)}Object.defineProperty(m,"__esModule",{value:!0});m.DebounceInput=void 0;var _=P(S),K=P(T),I=["element","onChange","value","minLength","debounceTimeout","forceNotifyByEnter","forceNotifyOnBlur","onKeyDown","onBlur","inputRef"];function P(t){return t&&t.__esModule?t:{default:t}}function x(t,n){if(t==null)return{};var o=L(t,n),r,e;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(t);for(e=0;e<f.length;e++)r=f[e],!(n.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function L(t,n){if(t==null)return{};var o={},r=Object.keys(t),e,f;for(f=0;f<r.length;f++)e=r[f],!(n.indexOf(e)>=0)&&(o[e]=t[e]);return o}function w(t,n){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,r)}return o}function l(t){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?arguments[n]:{};n%2?w(Object(o),!0).forEach(function(r){p(t,r,o[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):w(Object(o)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(o,r))})}return t}function k(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function D(t,n){for(var o=0;o<n.length;o++){var r=n[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function C(t,n,o){return n&&D(t.prototype,n),o&&D(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function U(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&g(t,n)}function g(t,n){return g=Object.setPrototypeOf||function(r,e){return r.__proto__=e,r},g(t,n)}function W(t){var n=$();return function(){var r=h(t),e;if(n){var f=h(this).constructor;e=Reflect.construct(r,arguments,f)}else e=r.apply(this,arguments);return V(this,e)}}function V(t,n){if(n&&(d(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return y(t)}function y(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function h(t){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},h(t)}function p(t,n,o){return n in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o,t}var B=function(t){U(o,t);var n=W(o);function o(r){var e;k(this,o),e=n.call(this,r),p(y(e),"onChange",function(i){i.persist();var u=e.state.value,a=e.props.minLength;e.setState({value:i.target.value},function(){var c=e.state.value;if(c.length>=a){e.notify(i);return}u.length>c.length&&e.notify(l(l({},i),{},{target:l(l({},i.target),{},{value:""})}))})}),p(y(e),"onKeyDown",function(i){i.key==="Enter"&&e.forceNotify(i);var u=e.props.onKeyDown;u&&(i.persist(),u(i))}),p(y(e),"onBlur",function(i){e.forceNotify(i);var u=e.props.onBlur;u&&(i.persist(),u(i))}),p(y(e),"createNotifier",function(i){if(i<0)e.notify=function(){return null};else if(i===0)e.notify=e.doNotify;else{var u=(0,K.default)(function(a){e.isDebouncing=!1,e.doNotify(a)},i);e.notify=function(a){e.isDebouncing=!0,u(a)},e.flush=function(){return u.flush()},e.cancel=function(){e.isDebouncing=!1,u.cancel()}}}),p(y(e),"doNotify",function(){var i=e.props.onChange;i.apply(void 0,arguments)}),p(y(e),"forceNotify",function(i){var u=e.props.debounceTimeout;if(!(!e.isDebouncing&&u>0)){e.cancel&&e.cancel();var a=e.state.value,c=e.props.minLength;a.length>=c?e.doNotify(i):e.doNotify(l(l({},i),{},{target:l(l({},i.target),{},{value:a})}))}}),e.isDebouncing=!1,e.state={value:typeof r.value>"u"||r.value===null?"":r.value};var f=e.props.debounceTimeout;return e.createNotifier(f),e}return C(o,[{key:"componentDidUpdate",value:function(e){if(!this.isDebouncing){var f=this.props,i=f.value,u=f.debounceTimeout,a=e.debounceTimeout,c=e.value,s=this.state.value;typeof i<"u"&&c!==i&&s!==i&&this.setState({value:i}),u!==a&&this.createNotifier(u)}}},{key:"componentWillUnmount",value:function(){this.flush&&this.flush()}},{key:"render",value:function(){var e=this.props,f=e.element;e.onChange,e.value,e.minLength,e.debounceTimeout;var i=e.forceNotifyByEnter,u=e.forceNotifyOnBlur,a=e.onKeyDown,c=e.onBlur,s=e.inputRef,N=x(e,I),j=this.state.value,v;i?v={onKeyDown:this.onKeyDown}:a?v={onKeyDown:a}:v={};var b;u?b={onBlur:this.onBlur}:c?b={onBlur:c}:b={};var E=s?{ref:s}:{};return _.default.createElement(f,l(l(l(l({},N),{},{onChange:this.onChange,value:j},v),b),E))}}]),o}(_.default.PureComponent);m.DebounceInput=B;p(B,"defaultProps",{element:"input",type:"text",onKeyDown:void 0,onBlur:void 0,value:void 0,minLength:0,debounceTimeout:100,forceNotifyByEnter:!0,forceNotifyOnBlur:!0,inputRef:void 0});var q=m,O=q.DebounceInput;O.DebounceInput=O;var M=O;const H=R(M);export{H as i};
