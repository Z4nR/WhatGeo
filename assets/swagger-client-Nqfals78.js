var qt=Object.defineProperty;var ot=e=>{throw TypeError(e)};var er=(e,t,r)=>t in e?qt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var M=(e,t,r)=>er(e,typeof t!="symbol"?t+"":t,r),it=(e,t,r)=>t.has(e)||ot("Cannot "+r);var xe=(e,t,r)=>(it(e,t,"read from private field"),r?r.call(e):t.get(e)),at=(e,t,r)=>t.has(e)?ot("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Re=(e,t,r,n)=>(it(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r);import{i as Ot,r as U,A as Qe,H as tr,R as rr,P as be,a as L,b as oe,f as At,O as St,m as ne,c as Pe,d as xt,s as S,e as Rt,g as se,h as Ue,j as nr,I as sr,k as or,l as z,u as K,n as q,o as ct,p as ir,q as ar,t as G,M as Te,v as cr,w as Tt,x as Y,y as ee,z as lr,B as D,C as ce,D as ur,E as lt,F as ut,G as le,J as fr,K as dr,L as B,N as pr,Q as hr,S as yr,T as ft,U as mr,V as gr,W as wr,X as br,Y as Pr,Z as vr,_ as Ne,$ as fe,a0 as Or,a1 as dt,a2 as Ar,a3 as Sr,a4 as xr,a5 as Rr,a6 as Tr,a7 as Cr,a8 as Er,a9 as Mr,aa as jr,ab as Ir,ac as $r,ad as kr,ae as Dr,af as Ur,ag as Nr,ah as pt}from"./@swagger-api-BEmDi3Bu.js";import{j as X,J as Fe}from"./js-yaml-C700HjKD.js";import{m as de}from"./minim-2ZQN76Kp.js";import{f as ie,k as Fr}from"./ramda-adjunct-2tfa14YL.js";import{t as zr,s as Vr}from"./openapi-server-url-templating-D-Na4n1F.js";import{r as ze}from"./openapi-path-templating-L9fNl-ls.js";import{s as Br,c as Lr,a as Hr,b as Jr,i as Wr}from"./@swaggerexpert-CHDM1w9w.js";import{m as Kr,q as Ce,i as Gr}from"./ramda-CNCrST_l.js";import{a as _,g as Qr}from"./fast-json-patch-2Vrxhmch.js";import{d as Yr}from"./deepmerge-MNDceT8M.js";import{s as Xr}from"./neotraverse-9Vm0IFBh.js";const R={add:_r,replace:pe,remove:qr,merge:en,mergeDeep:tn,context:rn,getIn:an,applyPatch:Zr,parentPathMatch:on,flatten:ae,fullyNormalizeArray:cn,normalizeArray:Et,isPromise:ln,forEachNew:nn,forEachNewPrimitive:sn,isJsonPatch:It,isContextPatch:dn,isPatch:ve,isMutation:$t,isAdditiveMutation:ye,isGenerator:fn,isFunction:jt,isObject:W,isError:un};function Zr(e,t,r){if(r=r||{},t={...t,path:t.path&&ht(t.path)},t.op==="merge"){const n=Ee(e,t.path);Object.assign(n,t.value),_(e,[pe(t.path,n)])}else if(t.op==="mergeDeep"){const n=Ee(e,t.path),s=Yr(n,t.value);e=_(e,[pe(t.path,s)]).newDocument}else if(t.op==="add"&&t.path===""&&W(t.value)){const n=Object.keys(t.value).reduce((s,o)=>(s.push({op:"add",path:`/${ht(o)}`,value:t.value[o]}),s),[]);_(e,n)}else if(t.op==="replace"&&t.path===""){let{value:n}=t;r.allowMetaPatches&&t.meta&&ye(t)&&(Array.isArray(t.value)||W(t.value))&&(n={...n,...t.meta}),e=n}else if(_(e,[t]),r.allowMetaPatches&&t.meta&&ye(t)&&(Array.isArray(t.value)||W(t.value))){const s={...Ee(e,t.path),...t.meta};_(e,[pe(t.path,s)])}return e}function ht(e){return Array.isArray(e)?e.length<1?"":`/${e.map(t=>(t+"").replace(/~/g,"~0").replace(/\//g,"~1")).join("/")}`:e}function _r(e,t){return{op:"add",path:e,value:t}}function pe(e,t,r){return{op:"replace",path:e,value:t,meta:r}}function qr(e){return{op:"remove",path:e}}function en(e,t){return{type:"mutation",op:"merge",path:e,value:t}}function tn(e,t){return{type:"mutation",op:"mergeDeep",path:e,value:t}}function rn(e,t){return{type:"context",path:e,value:t}}function nn(e,t){try{return Ct(e,Be,t)}catch(r){return r}}function sn(e,t){try{return Ct(e,Ve,t)}catch(r){return r}}function Ct(e,t,r){const n=e.filter(ye).map(a=>t(a.value,r,a.path))||[],s=ae(n);return Mt(s)}function Ve(e,t,r){return r=r||[],Array.isArray(e)?e.map((n,s)=>Ve(n,t,r.concat(s))):W(e)?Object.keys(e).map(n=>Ve(e[n],t,r.concat(n))):t(e,r[r.length-1],r)}function Be(e,t,r){r=r||[];let n=[];if(r.length>0){const s=t(e,r[r.length-1],r);s&&(n=n.concat(s))}if(Array.isArray(e)){const s=e.map((o,a)=>Be(o,t,r.concat(a)));s&&(n=n.concat(s))}else if(W(e)){const s=Object.keys(e).map(o=>Be(e[o],t,r.concat(o)));s&&(n=n.concat(s))}return n=ae(n),n}function on(e,t){if(!Array.isArray(t))return!1;for(let r=0,n=t.length;r<n;r+=1)if(t[r]!==e[r])return!1;return!0}function an(e,t){return t.reduce((r,n)=>typeof n<"u"&&r?r[n]:r,e)}function cn(e){return Mt(ae(Et(e)))}function Et(e){return Array.isArray(e)?e:[e]}function ae(e){return[].concat(...e.map(t=>Array.isArray(t)?ae(t):t))}function Mt(e){return e.filter(t=>typeof t<"u")}function W(e){return e&&typeof e=="object"}function ln(e){return W(e)&&jt(e.then)}function jt(e){return e&&typeof e=="function"}function un(e){return e instanceof Error}function It(e){if(ve(e)){const{op:t}=e;return t==="add"||t==="remove"||t==="replace"}return!1}function fn(e){return Object.prototype.toString.call(e)==="[object GeneratorFunction]"}function $t(e){return It(e)||ve(e)&&e.type==="mutation"}function ye(e){return $t(e)&&(e.op==="add"||e.op==="replace"||e.op==="merge"||e.op==="mergeDeep")}function dn(e){return ve(e)&&e.type==="context"}function ve(e){return e&&typeof e=="object"}function Ee(e,t){try{return Qr(e,t)}catch(r){return console.error(r),{}}}const{fetch:pn,Response:hn,Headers:yn,Request:mn,FormData:gn,File:wn,Blob:bn}=globalThis;typeof globalThis.fetch>"u"&&(globalThis.fetch=pn);typeof globalThis.Headers>"u"&&(globalThis.Headers=yn);typeof globalThis.Request>"u"&&(globalThis.Request=mn);typeof globalThis.Response>"u"&&(globalThis.Response=hn);typeof globalThis.FormData>"u"&&(globalThis.FormData=gn);typeof globalThis.File>"u"&&(globalThis.File=wn);typeof globalThis.Blob>"u"&&(globalThis.Blob=bn);const kt="application/json, application/yaml",me="https://swagger.io",Pn=Object.freeze({url:"/"}),Dt=3e3,vn=["properties"],On=["properties"],An=["definitions","parameters","responses","securityDefinitions","components/schemas","components/responses","components/parameters","components/securitySchemes"],Sn=["schema/example","items/example"];function Ut(e){const t=e[e.length-1],r=e[e.length-2],n=e.join("/");return vn.indexOf(t)>-1&&On.indexOf(r)===-1||An.indexOf(n)>-1||Sn.some(s=>n.indexOf(s)>-1)}function xn(e,t,{specmap:r,getBaseUrlForNodePath:n=o=>r.getContext([...t,...o]).baseDoc,targetKeys:s=["$ref","$$ref"]}={}){const o=[];return Xr(e).forEach(function(){if(s.includes(this.key)&&typeof this.node=="string"){const i=this.path,c=t.concat(this.path),l=Le(this.node,n(i));o.push(r.replace(c,l))}}),o}function Le(e,t){const[r,n]=e.split("#"),s=t??"",o=r??"";let a;if(Ot(s))a=U(s,o);else{const i=U(me,s),l=U(i,o).replace(me,"");a=o.startsWith("/")?l:l.substring(1)}return n?`${a}#${n}`:a}const Rn=/^([a-z]+:\/\/|\/\/)/i;class Z extends Qe{}const V={},yt=new WeakMap,Tn=[e=>e[0]==="paths"&&e[3]==="responses"&&e[5]==="examples",e=>e[0]==="paths"&&e[3]==="responses"&&e[5]==="content"&&e[7]==="example",e=>e[0]==="paths"&&e[3]==="responses"&&e[5]==="content"&&e[7]==="examples"&&e[9]==="value",e=>e[0]==="paths"&&e[3]==="requestBody"&&e[4]==="content"&&e[6]==="example",e=>e[0]==="paths"&&e[3]==="requestBody"&&e[4]==="content"&&e[6]==="examples"&&e[8]==="value",e=>e[0]==="paths"&&e[2]==="parameters"&&e[4]==="example",e=>e[0]==="paths"&&e[3]==="parameters"&&e[5]==="example",e=>e[0]==="paths"&&e[2]==="parameters"&&e[4]==="examples"&&e[6]==="value",e=>e[0]==="paths"&&e[3]==="parameters"&&e[5]==="examples"&&e[7]==="value",e=>e[0]==="paths"&&e[2]==="parameters"&&e[4]==="content"&&e[6]==="example",e=>e[0]==="paths"&&e[2]==="parameters"&&e[4]==="content"&&e[6]==="examples"&&e[8]==="value",e=>e[0]==="paths"&&e[3]==="parameters"&&e[4]==="content"&&e[7]==="example",e=>e[0]==="paths"&&e[3]==="parameters"&&e[5]==="content"&&e[7]==="examples"&&e[9]==="value"],Cn=e=>Tn.some(t=>t(e)),En={key:"$ref",plugin:(e,t,r,n)=>{const s=n.getInstance(),o=r.slice(0,-1);if(Ut(o)||Cn(o))return;const{baseDoc:a}=n.getContext(r);if(typeof e!="string")return new Z("$ref: must be a string (JSON-Ref)",{$ref:e,baseDoc:a,fullPath:r});const i=Ft(e),c=i[0],l=i[1]||"";let u;try{u=a||c?Nt(c,a):null}catch(m){return He(m,{pointer:l,$ref:e,basePath:u,fullPath:r})}let d,f;if(kn(l,u,o,n)&&!s.useCircularStructures){const m=Le(e,u);return e===m?null:R.replace(r,m)}if(u==null?(f=Xe(l),d=n.get(f),typeof d>"u"&&(d=new Z(`Could not resolve reference: ${e}`,{pointer:l,$ref:e,baseDoc:a,fullPath:r}))):(d=zt(u,l),d.__value!=null?d=d.__value:d=d.catch(m=>{throw He(m,{pointer:l,$ref:e,baseDoc:a,fullPath:r})})),d instanceof Error)return[R.remove(r),d];const y=Le(e,u),p=R.replace(o,d,{$$ref:y});if(u&&u!==a)return[p,R.context(o,{baseDoc:u})];try{if(!Dn(n.state,p)||s.useCircularStructures)return p}catch{return null}}},Ye=Object.assign(En,{docCache:V,absoluteify:Nt,clearCache:Mn,JSONRefError:Z,wrapError:He,getDoc:Vt,split:Ft,extractFromDoc:zt,fetchJSON:jn,extract:Je,jsonPointerToArray:Xe,unescapeJsonPointerToken:Bt});function Nt(e,t){if(!Rn.test(e)){if(!t)throw new Z(`Tried to resolve a relative URL, without having a basePath. path: '${e}' basePath: '${t}'`);return U(t,e)}return e}function He(e,t){let r;return e&&e.response&&e.response.body?r=`${e.response.body.code} ${e.response.body.message}`:r=e.message,new Z(`Could not resolve reference: ${r}`,{...t,cause:e})}function Ft(e){return(e+"").split("#")}function zt(e,t){const r=V[e];if(r&&!R.isPromise(r))try{const n=Je(t,r);return Object.assign(Promise.resolve(n),{__value:n})}catch(n){return Promise.reject(n)}return Vt(e).then(n=>Je(t,n))}function Mn(e){typeof e<"u"?delete V[e]:Object.keys(V).forEach(t=>{delete V[t]})}function Vt(e){const t=V[e];return t?R.isPromise(t)?t:Promise.resolve(t):(V[e]=Ye.fetchJSON(e).then(r=>(V[e]=r,r)),V[e])}function jn(e){return fetch(e,{headers:{Accept:kt},loadSpec:!0}).then(t=>t.text()).then(t=>X.load(t))}function Je(e,t){const r=Xe(e);if(r.length<1)return t;const n=R.getIn(t,r);if(typeof n>"u")throw new Z(`Could not resolve pointer: ${e} does not exist in document`,{pointer:e});return n}function Xe(e){if(typeof e!="string")throw new TypeError(`Expected a string, got a ${typeof e}`);return e[0]==="/"&&(e=e.substr(1)),e===""?[]:e.split("/").map(Bt)}function Bt(e){return typeof e!="string"?e:new URLSearchParams(`=${e.replace(/~1/g,"/").replace(/~0/g,"~")}`).get("")}function Lt(e){return new URLSearchParams([["",e.replace(/~/g,"~0").replace(/\//g,"~1")]]).toString().slice(1)}function In(e){return e.length===0?"":`/${e.map(Lt).join("/")}`}const $n=e=>!e||e==="/"||e==="#";function Me(e,t){if($n(t))return!0;const r=e.charAt(t.length),n=t.slice(-1);return e.indexOf(t)===0&&(!r||r==="/"||r==="#")&&n!=="#"}function kn(e,t,r,n){let s=yt.get(n);s||(s={},yt.set(n,s));const o=In(r),a=`${t||"<specmap-base>"}#${e}`,i=o.replace(/allOf\/\d+\/?/g,""),c=n.contextTree.get([]).baseDoc;if(t===c&&Me(i,e))return!0;let l="";if(r.some(d=>(l=`${l}/${Lt(d)}`,s[l]&&s[l].some(f=>Me(f,a)||Me(a,f)))))return!0;s[i]=(s[i]||[]).concat(a)}function Dn(e,t){const r=[e];return t.path.reduce((s,o)=>(r.push(s[o]),s[o]),e),n(t.value);function n(s){return R.isObject(s)&&(r.indexOf(s)>=0||Object.keys(s).some(o=>n(s[o])))}}const Un={key:"allOf",plugin:(e,t,r,n,s)=>{if(s.meta&&s.meta.$$ref)return;const o=r.slice(0,-1);if(Ut(o))return;if(!Array.isArray(e)){const l=new TypeError("allOf must be an array");return l.fullPath=r,l}let a=!1,i=s.value;if(o.forEach(l=>{i&&(i=i[l])}),i={...i},Object.keys(i).length===0)return;delete i.allOf;const c=[];return c.push(n.replace(o,{})),e.forEach((l,u)=>{if(!n.isObject(l)){if(a)return null;a=!0;const y=new TypeError("Elements in allOf must be objects");return y.fullPath=r,c.push(y)}c.push(n.mergeDeep(o,l));const d=r.slice(0,-1),f=xn(l,d,{getBaseUrlForNodePath:y=>n.getContext([...r,u,...y]).baseDoc,specmap:n});c.push(...f)}),i.example&&c.push(n.remove([].concat(o,"example"))),c.push(n.mergeDeep(o,i)),i.$$ref||c.push(n.remove([].concat(o,"$$ref"))),c}},Nn={key:"parameters",plugin:(e,t,r,n)=>{if(Array.isArray(e)&&e.length){const s=Object.assign([],e),o=r.slice(0,-1),a={...R.getIn(n.spec,o)};for(let i=0;i<e.length;i+=1){const c=e[i];try{s[i].default=n.parameterMacro(a,c)}catch(l){const u=new Error(l);return u.fullPath=r,u}}return R.replace(r,s)}return R.replace(r,e)}},Fn={key:"properties",plugin:(e,t,r,n)=>{const s={...e};for(const a in e)try{s[a].default=n.modelPropertyMacro(s[a])}catch(i){const c=new Error(i);return c.fullPath=r,c}return R.replace(r,s)}};class zn{constructor(t){this.root=je(t||{})}set(t,r){const n=this.getParent(t,!0);if(!n){ge(this.root,r,null);return}const s=t[t.length-1],{children:o}=n;if(o[s]){ge(o[s],r,n);return}o[s]=je(r,n)}get(t){if(t=t||[],t.length<1)return this.root.value;let r=this.root,n,s;for(let o=0;o<t.length&&(s=t[o],n=r.children,!!n[s]);o+=1)r=n[s];return r&&r.protoValue}getParent(t,r){return!t||t.length<1?null:t.length<2?this.root:t.slice(0,-1).reduce((n,s)=>{if(!n)return n;const{children:o}=n;return!o[s]&&r&&(o[s]=je(null,n)),o[s]},this.root)}}function je(e,t){return ge({children:{}},e,t)}function ge(e,t,r){return e.value=t||{},e.protoValue=r?{...r.protoValue,...e.value}:e.value,Object.keys(e.children).forEach(n=>{const s=e.children[n];e.children[n]=ge(s,s.value,e)}),e}const mt=100,gt=()=>{};class Vn{static getPluginName(t){return t.pluginName}static getPatchesOfType(t,r){return t.filter(r)}constructor(t){Object.assign(this,{spec:"",debugLevel:"info",plugins:[],pluginHistory:{},errors:[],mutations:[],promisedPatches:[],state:{},patches:[],context:{},contextTree:new zn,showDebug:!1,allPatches:[],pluginProp:"specMap",libMethods:Object.assign(Object.create(this),R,{getInstance:()=>this}),allowMetaPatches:!1},t),this.get=this._get.bind(this),this.getContext=this._getContext.bind(this),this.hasRun=this._hasRun.bind(this),this.wrappedPlugins=this.plugins.map(this.wrapPlugin.bind(this)).filter(R.isFunction),this.patches.push(R.add([],this.spec)),this.patches.push(R.context([],this.context)),this.updatePatches(this.patches)}debug(t,...r){this.debugLevel===t&&console.log(...r)}verbose(t,...r){this.debugLevel==="verbose"&&console.log(`[${t}]   `,...r)}wrapPlugin(t,r){const{pathDiscriminator:n}=this;let s=null,o;return t[this.pluginProp]?(s=t,o=t[this.pluginProp]):R.isFunction(t)?o=t:R.isObject(t)&&(o=a(t)),Object.assign(o.bind(s),{pluginName:t.name||r,isGenerator:R.isGenerator(o)});function a(i){const c=(l,u)=>Array.isArray(l)?l.every((d,f)=>d===u[f]):!0;return function*(u,d){const f={};for(const[p,m]of u.filter(R.isAdditiveMutation).entries())if(p<Dt)yield*y(m.value,m.path,m);else return;function*y(p,m,h){if(!R.isObject(p))i.key===m[m.length-1]&&(yield i.plugin(p,i.key,m,d));else{const P=m.length-1,O=m[P],w=m.indexOf("properties"),E=O==="properties"&&P===w,I=d.allowMetaPatches&&f[p.$$ref];for(const b of Object.keys(p)){const T=p[b],j=m.concat(b),g=R.isObject(T),C=p.$$ref;if(I||g&&(d.allowMetaPatches&&C&&c(n,j)&&(f[C]=!0),yield*y(T,j,h)),!E&&b===i.key){const v=c(n,m);(!n||v)&&(yield i.plugin(T,b,j,d,h))}}}}}}}nextPlugin(){return this.wrappedPlugins.find(t=>this.getMutationsForPlugin(t).length>0)}nextPromisedPatch(){if(this.promisedPatches.length>0)return Promise.race(this.promisedPatches.map(t=>t.value))}getPluginHistory(t){const r=this.constructor.getPluginName(t);return this.pluginHistory[r]||[]}getPluginRunCount(t){return this.getPluginHistory(t).length}getPluginHistoryTip(t){const r=this.getPluginHistory(t);return r&&r[r.length-1]||{}}getPluginMutationIndex(t){const r=this.getPluginHistoryTip(t).mutationIndex;return typeof r!="number"?-1:r}updatePluginHistory(t,r){const n=this.constructor.getPluginName(t);this.pluginHistory[n]=this.pluginHistory[n]||[],this.pluginHistory[n].push(r)}updatePatches(t){R.normalizeArray(t).forEach(r=>{if(r instanceof Error){this.errors.push(r);return}try{if(!R.isObject(r)){this.debug("updatePatches","Got a non-object patch",r);return}if(this.showDebug&&this.allPatches.push(r),R.isPromise(r.value)){this.promisedPatches.push(r),this.promisedPatchThen(r);return}if(R.isContextPatch(r)){this.setContext(r.path,r.value);return}R.isMutation(r)&&this.updateMutations(r)}catch(n){console.error(n),this.errors.push(n)}})}updateMutations(t){typeof t.value=="object"&&!Array.isArray(t.value)&&this.allowMetaPatches&&(t.value={...t.value});const r=R.applyPatch(this.state,t,{allowMetaPatches:this.allowMetaPatches});r&&(this.mutations.push(t),this.state=r)}removePromisedPatch(t){const r=this.promisedPatches.indexOf(t);if(r<0){this.debug("Tried to remove a promisedPatch that isn't there!");return}this.promisedPatches.splice(r,1)}promisedPatchThen(t){return t.value=t.value.then(r=>{const n={...t,value:r};this.removePromisedPatch(t),this.updatePatches(n)}).catch(r=>{this.removePromisedPatch(t),this.updatePatches(r)}),t.value}getMutations(t,r){return t=t||0,typeof r!="number"&&(r=this.mutations.length),this.mutations.slice(t,r)}getCurrentMutations(){return this.getMutationsForPlugin(this.getCurrentPlugin())}getMutationsForPlugin(t){const r=this.getPluginMutationIndex(t);return this.getMutations(r+1)}getCurrentPlugin(){return this.currentPlugin}getLib(){return this.libMethods}_get(t){return R.getIn(this.state,t)}_getContext(t){return this.contextTree.get(t)}setContext(t,r){return this.contextTree.set(t,r)}_hasRun(t){return this.getPluginRunCount(this.getCurrentPlugin())>(t||0)}dispatch(){const t=this,r=this.nextPlugin();if(!r){const o=this.nextPromisedPatch();if(o)return o.then(()=>this.dispatch()).catch(()=>this.dispatch());const a={spec:this.state,errors:this.errors};return this.showDebug&&(a.patches=this.allPatches),Promise.resolve(a)}if(t.pluginCount=t.pluginCount||new WeakMap,t.pluginCount.set(r,(t.pluginCount.get(r)||0)+1),t.pluginCount[r]>mt)return Promise.resolve({spec:t.state,errors:t.errors.concat(new Error(`We've reached a hard limit of ${mt} plugin runs`))});if(r!==this.currentPlugin&&this.promisedPatches.length){const o=this.promisedPatches.map(a=>a.value);return Promise.all(o.map(a=>a.then(gt,gt))).then(()=>this.dispatch())}return n();function n(){t.currentPlugin=r;const o=t.getCurrentMutations(),a=t.mutations.length-1;try{if(r.isGenerator)for(const i of r(o,t.getLib()))s(i);else{const i=r(o,t.getLib());s(i)}}catch(i){console.error(i),s([Object.assign(Object.create(i),{plugin:r})])}finally{t.updatePluginHistory(r,{mutationIndex:a})}return t.dispatch()}function s(o){o&&(o=R.fullyNormalizeArray(o),t.updatePatches(o,r))}}}function Bn(e){return new Vn(e).dispatch()}const Q={refs:Ye,allOf:Un,parameters:Nn,properties:Fn};function Ht(e,t={}){const{requestInterceptor:r,responseInterceptor:n}=t,s=e.withCredentials?"include":"same-origin";return o=>e({url:o,loadSpec:!0,requestInterceptor:r,responseInterceptor:n,headers:{Accept:kt},credentials:s}).then(a=>a.body)}function Ze(e,t){return!t&&typeof navigator<"u"&&(t=navigator),t&&t.product==="ReactNative"?!!(e&&typeof e=="object"&&typeof e.uri=="string"):typeof File<"u"&&e instanceof File||typeof Blob<"u"&&e instanceof Blob||ArrayBuffer.isView(e)?!0:e!==null&&typeof e=="object"&&typeof e.pipe=="function"}function Jt(e,t){return Array.isArray(e)&&e.some(r=>Ze(r,t))}class We extends File{constructor(t,r="",n={}){super([t],r,n),this.data=t}valueOf(){return this.data}toString(){return this.valueOf()}}const Ln=e=>":/?#[]@!$&'()*+,;=".indexOf(e)>-1,Hn=e=>/^[a-z0-9\-._~]+$/i.test(e);function Wt(e,t="reserved"){return[...e].map(r=>{if(Hn(r)||Ln(r)&&t==="unsafe")return r;const n=new TextEncoder;return Array.from(n.encode(r)).map(o=>`0${o.toString(16).toUpperCase()}`.slice(-2)).map(o=>`%${o}`).join("")}).join("")}function _e(e){const{value:t}=e;return Array.isArray(t)?Jn(e):typeof t=="object"?Wn(e):Kn(e)}function $(e,t=!1){return Array.isArray(e)||e!==null&&typeof e=="object"?e=JSON.stringify(e):(typeof e=="number"||typeof e=="boolean")&&(e=String(e)),t&&typeof e=="string"&&e.length>0?Wt(e,t):e??""}function Jn({key:e,value:t,style:r,explode:n,escape:s}){if(r==="simple")return t.map(o=>$(o,s)).join(",");if(r==="label")return`.${t.map(o=>$(o,s)).join(".")}`;if(r==="matrix")return t.map(o=>$(o,s)).reduce((o,a)=>!o||n?`${o||""};${e}=${a}`:`${o},${a}`,"");if(r==="form"){const o=n?`&${e}=`:",";return t.map(a=>$(a,s)).join(o)}if(r==="spaceDelimited"){const o=n?`${e}=`:"";return t.map(a=>$(a,s)).join(` ${o}`)}if(r==="pipeDelimited"){const o=n?`${e}=`:"";return t.map(a=>$(a,s)).join(`|${o}`)}}function Wn({key:e,value:t,style:r,explode:n,escape:s}){const o=Object.keys(t);if(r==="simple")return o.reduce((a,i)=>{const c=$(t[i],s),l=n?"=":",";return`${a?`${a},`:""}${i}${l}${c}`},"");if(r==="label")return o.reduce((a,i)=>{const c=$(t[i],s),l=n?"=":".";return`${a?`${a}.`:"."}${i}${l}${c}`},"");if(r==="matrix"&&n)return o.reduce((a,i)=>{const c=$(t[i],s);return`${a?`${a};`:";"}${i}=${c}`},"");if(r==="matrix")return o.reduce((a,i)=>{const c=$(t[i],s);return`${a?`${a},`:`;${e}=`}${i},${c}`},"");if(r==="form")return o.reduce((a,i)=>{const c=$(t[i],s);return`${a?`${a}${n?"&":","}`:""}${i}${n?"=":","}${c}`},"")}function Kn({key:e,value:t,style:r,escape:n}){if(r==="simple")return $(t,n);if(r==="label")return`.${$(t,n)}`;if(r==="matrix")return`;${e}=${$(t,n)}`;if(r==="form"||r==="deepObject")return $(t,n)}const Gn={form:",",spaceDelimited:"%20",pipeDelimited:"|"},Qn={csv:",",ssv:"%20",tsv:"%09",pipes:"|"};function Kt(e,t,r=!1){const{collectionFormat:n,allowEmptyValue:s,serializationOption:o,encoding:a}=t,i=typeof t=="object"&&!Array.isArray(t)?t.value:t,c=r?u=>u.toString():u=>encodeURIComponent(u),l=c(e);if(typeof i>"u"&&s)return[[l,""]];if(Ze(i)||Jt(i))return[[l,i]];if(o)return wt(e,i,r,o);if(a){if([typeof a.style,typeof a.explode,typeof a.allowReserved].some(u=>u!=="undefined")){const{style:u,explode:d,allowReserved:f}=a;return wt(e,i,r,{style:u,explode:d,allowReserved:f})}if(typeof a.contentType=="string"){if(a.contentType.startsWith("application/json")){const f=typeof i=="string"?i:JSON.stringify(i),y=c(f),p=new We(y,"blob",{type:a.contentType});return[[l,p]]}const u=c(String(i)),d=new We(u,"blob",{type:a.contentType});return[[l,d]]}return typeof i!="object"?[[l,c(i)]]:Array.isArray(i)&&i.every(u=>typeof u!="object")?[[l,i.map(c).join(",")]]:[[l,c(JSON.stringify(i))]]}return typeof i!="object"?[[l,c(i)]]:Array.isArray(i)?n==="multi"?[[l,i.map(c)]]:[[l,i.map(c).join(Qn[n||"csv"])]]:[[l,""]]}function wt(e,t,r,n){const s=n.style||"form",o=typeof n.explode>"u"?s==="form":n.explode,a=r?!1:n&&n.allowReserved?"unsafe":"reserved",i=l=>$(l,a),c=r?l=>l:l=>i(l);return typeof t!="object"?[[c(e),i(t)]]:Array.isArray(t)?o?[[c(e),t.map(i)]]:[[c(e),t.map(i).join(Gn[s])]]:s==="deepObject"?Object.keys(t).map(l=>[c(`${e}[${l}]`),i(t[l])]):o?Object.keys(t).map(l=>[c(l),i(t[l])]):[[c(e),Object.keys(t).map(l=>[`${c(l)},${i(t[l])}`]).join(",")]]}function Yn(e){return Object.entries(e).reduce((t,[r,n])=>{for(const[s,o]of Kt(r,n,!0))if(Array.isArray(o))for(const a of o)if(ArrayBuffer.isView(a)){const i=new Blob([a]);t.append(s,i)}else t.append(s,a);else if(ArrayBuffer.isView(o)){const a=new Blob([o]);t.append(s,a)}else t.append(s,o);return t},new FormData)}const Xn=(e,{encode:t=!0}={})=>{const r=(o,a,i)=>(Array.isArray(i)?i.reduce((c,l)=>r(o,a,l),o):i instanceof Date?o.append(a,i.toISOString()):typeof i=="object"?Object.entries(i).reduce((c,[l,u])=>r(o,`${a}[${l}]`,u),o):o.append(a,i),o),n=Object.entries(e).reduce((o,[a,i])=>r(o,a,i),new URLSearchParams),s=String(n);return t?s:decodeURIComponent(s)};function bt(e){const t=Object.keys(e).reduce((r,n)=>{for(const[s,o]of Kt(n,e[n]))o instanceof We?r[s]=o.valueOf():r[s]=o;return r},{});return Xn(t,{encode:!1})}function qe(e={}){const{url:t="",query:r,form:n}=e,s=(...o)=>{const a=o.filter(i=>i).join("&");return a?`?${a}`:""};if(n){const o=Object.keys(n).some(i=>{const{value:c}=n[i];return Ze(c)||Jt(c)}),a=e.headers["content-type"]||e.headers["Content-Type"];if(o||/multipart\/form-data/i.test(a)){const i=Yn(e.form);e.formdata=i,e.body=i}else e.body=bt(n);delete e.form}if(r){const[o,a]=t.split("?");let i="";if(a){const l=new URLSearchParams(a);Object.keys(r).forEach(d=>l.delete(d)),i=String(l)}const c=s(i,bt(r));e.url=o+c,delete e.query}return e}const Zn=(e="")=>/(json|xml|yaml|text)\b/.test(e);function _n(e,t){return t&&(t.indexOf("application/json")===0||t.indexOf("+json")>0)?JSON.parse(e):X.load(e)}function qn(e){return e.includes(", ")?e.split(", "):e}function es(e={}){return typeof e.entries!="function"?{}:Array.from(e.entries()).reduce((t,[r,n])=>(t[r]=qn(n),t),{})}function ts(e,t,{loadSpec:r=!1}={}){const n={ok:e.ok,url:e.url||t,status:e.status,statusText:e.statusText,headers:es(e.headers)},s=n.headers["content-type"],o=r||Zn(s);return(o?e.text:e.blob||e.buffer).call(e).then(i=>{if(n.text=i,n.data=i,o)try{const c=_n(i,s);n.body=c,n.obj=c}catch(c){n.parseError=c}return n})}async function we(e,t={}){typeof e=="object"&&(t=e,e=t.url),t.headers=t.headers||{},t=qe(t),t.headers&&Object.keys(t.headers).forEach(s=>{const o=t.headers[s];typeof o=="string"&&(t.headers[s]=o.replace(/\n+/g," "))}),t.requestInterceptor&&(t=await t.requestInterceptor(t)||t);const r=t.headers["content-type"]||t.headers["Content-Type"];/multipart\/form-data/i.test(r)&&(delete t.headers["content-type"],delete t.headers["Content-Type"]);let n;try{n=await(t.userFetch||fetch)(t.url,t),n=await ts(n,e,t),t.responseInterceptor&&(n=await t.responseInterceptor(n)||n)}catch(s){if(!n)throw s;const o=new Error(n.statusText||`response status is ${n.status}`);throw o.status=n.status,o.statusCode=n.status,o.responseError=s,o}if(!n.ok){const s=new Error(n.statusText||`response status is ${n.status}`);throw s.status=n.status,s.statusCode=n.status,s.response=n,s}return n}function Oo(e,t,r){return r=r||(n=>n),t=t||(n=>n),n=>(typeof n=="string"&&(n={url:n}),n=qe(n),n=t(n),r(e(n)))}const et=e=>{var t,r;const{baseDoc:n,url:s}=e,o=(t=n??s)!==null&&t!==void 0?t:"";return typeof((r=globalThis.document)===null||r===void 0?void 0:r.baseURI)=="string"?String(new URL(o,globalThis.document.baseURI)):o},Gt=e=>{const{fetch:t,http:r}=e;return t||r||we};async function tt(e){const{spec:t,mode:r,allowMetaPatches:n=!0,pathDiscriminator:s,modelPropertyMacro:o,parameterMacro:a,requestInterceptor:i,responseInterceptor:c,skipNormalization:l=!1,useCircularStructures:u,strategies:d}=e,f=et(e),y=Gt(e),p=d.find(h=>h.match(t));return m(t);async function m(h){f&&(Q.refs.docCache[f]=h),Q.refs.fetchJSON=Ht(y,{requestInterceptor:i,responseInterceptor:c});const P=[Q.refs];typeof a=="function"&&P.push(Q.parameters),typeof o=="function"&&P.push(Q.properties),r!=="strict"&&P.push(Q.allOf);const O=await Bn({spec:h,context:{baseDoc:f},plugins:P,allowMetaPatches:n,pathDiscriminator:s,parameterMacro:a,modelPropertyMacro:o,useCircularStructures:u});return l||(O.spec=p.normalize(O.spec)),O}}const Qt=e=>e.replace(/\W/gi,"_");function rs(e,t,{v2OperationIdCompatibilityMode:r}={}){if(r){let n=`${t.toLowerCase()}_${e}`.replace(/[\s!@#$%^&*()_+=[{\]};:<>|./?,\\'""-]/g,"_");return n=n||`${e.substring(1)}_${t}`,n.replace(/((_){2,})/g,"_").replace(/^(_)*/g,"").replace(/([_])*$/g,"")}return`${t.toLowerCase()}${Qt(e)}`}function rt(e,t,r="",{v2OperationIdCompatibilityMode:n}={}){return!e||typeof e!="object"?null:(e.operationId||"").replace(/\s/g,"").length?Qt(e.operationId):rs(t,r,{v2OperationIdCompatibilityMode:n})}function nt(e){const{spec:t}=e,{paths:r}=t,n={};if(!r||t.$$normalized)return e;for(const s in r){const o=r[s];if(o==null||!["object","function"].includes(typeof o))continue;const a=o.parameters;for(const i in o){const c=o[i];if(c==null||!["object","function"].includes(typeof c))continue;const l=rt(c,s,i);if(l){n[l]?n[l].push(c):n[l]=[c];const u=n[l];if(u.length>1)u.forEach((d,f)=>{d.__originalOperationId=d.__originalOperationId||d.operationId,d.operationId=`${l}${f+1}`});else if(typeof c.operationId<"u"){const d=u[0];d.__originalOperationId=d.__originalOperationId||c.operationId,d.operationId=l}}if(i!=="parameters"){const u=[],d={};for(const f in t)(f==="produces"||f==="consumes"||f==="security")&&(d[f]=t[f],u.push(d));if(a&&(d.parameters=a,u.push(d)),u.length){for(const f of u)for(const y in f)if(!c[y])c[y]=f[y];else if(y==="parameters")for(const p of f[y])c[y].some(h=>h.name&&h.name===p.name||h.$ref&&h.$ref===p.$ref||h.$$ref&&h.$$ref===p.$$ref||h===p)||c[y].push(p)}}}}return t.$$normalized=!0,e}const ns={name:"generic",match(){return!0},normalize(e){const{spec:t}=nt({spec:e});return t},async resolve(e){return tt(e)}};async function ss(e){return tt(e)}const os=e=>{try{const{swagger:t}=e;return t==="2.0"}catch{return!1}},Yt=e=>{try{const{openapi:t}=e;return typeof t=="string"&&/^3\.0\.(?:[1-9]\d*|0)$/.test(t)}catch{return!1}},st=e=>{try{const{openapi:t}=e;return typeof t=="string"&&/^3\.1\.(?:[1-9]\d*|0)$/.test(t)}catch{return!1}},Xt=e=>Yt(e)||st(e),is={name:"openapi-2",match(e){return os(e)},normalize(e){const{spec:t}=nt({spec:e});return t},async resolve(e){return ss(e)}};async function as(e){return tt(e)}const cs={name:"openapi-3-0",match(e){return Yt(e)},normalize(e){const{spec:t}=nt({spec:e});return t},async resolve(e){return as(e)}},{AbortController:ls,AbortSignal:us}=globalThis;typeof globalThis.AbortController>"u"&&(globalThis.AbortController=ls);typeof globalThis.AbortSignal>"u"&&(globalThis.AbortSignal=us);class fs extends tr{constructor({swaggerHTTPClient:r=we,swaggerHTTPClientConfig:n={},...s}={}){super({...s,name:"http-swagger-client"});M(this,"swaggerHTTPClient",we);M(this,"swaggerHTTPClientConfig");this.swaggerHTTPClient=r,this.swaggerHTTPClientConfig=n}getHttpClient(){return this.swaggerHTTPClient}async read(r){const n=this.getHttpClient(),s=new AbortController,{signal:o}=s,a=setTimeout(()=>{s.abort()},this.timeout),i=this.getHttpClient().withCredentials||this.withCredentials?"include":"same-origin",c=this.redirects===0?"error":"follow",l=this.redirects>0?this.redirects:void 0;try{return(await n({url:r.uri,signal:o,userFetch:async(d,f)=>{let y=await fetch(d,f);try{y.headers.delete("Content-Type")}catch{y=new Response(y.body,{...y,headers:new Headers(y.headers)}),y.headers.delete("Content-Type")}return y},credentials:i,redirect:c,follow:l,...this.swaggerHTTPClientConfig})).text.arrayBuffer()}catch(u){throw new rr(`Error downloading "${r.uri}"`,{cause:u})}finally{clearTimeout(a)}}}class ds extends be{constructor(t={}){super({name:"json-swagger-client",mediaTypes:["application/json"],...t})}async canParse(t){const r=this.fileExtensions.length===0?!0:this.fileExtensions.includes(t.extension),n=this.mediaTypes.includes(t.mediaType);if(!r)return!1;if(n)return!0;if(!n)try{return JSON.parse(t.toString()),!0}catch{return!1}return!1}async parse(t){if(this.sourceMap)throw new L("json-swagger-client parser plugin doesn't support sourceMaps option");const r=new oe,n=t.toString();if(this.allowEmpty&&n.trim()==="")return r;try{const s=At(JSON.parse(n));return s.classes.push("result"),r.push(s),r}catch(s){throw new L(`Error parsing "${t.uri}"`,{cause:s})}}}class ps extends be{constructor(t={}){super({name:"yaml-1-2-swagger-client",mediaTypes:["text/yaml","application/yaml"],...t})}async canParse(t){const r=this.fileExtensions.length===0?!0:this.fileExtensions.includes(t.extension),n=this.mediaTypes.includes(t.mediaType);if(!r)return!1;if(n)return!0;if(!n)try{return X.load(t.toString(),{schema:Fe}),!0}catch{return!1}return!1}async parse(t){if(this.sourceMap)throw new L("yaml-1-2-swagger-client parser plugin doesn't support sourceMaps option");const r=new oe,n=t.toString();try{const s=X.load(n,{schema:Fe});if(this.allowEmpty&&typeof s>"u")return r;const o=At(s);return o.classes.push("result"),r.push(o),r}catch(s){throw new L(`Error parsing "${t.uri}"`,{cause:s})}}}class hs extends be{constructor(r={}){super({name:"openapi-json-3-1-swagger-client",mediaTypes:new St(...ne.filterByFormat("generic"),...ne.filterByFormat("json")),...r});M(this,"detectionRegExp",/"openapi"\s*:\s*"(?<version_json>3\.1\.(?:[1-9]\d*|0))"/)}async canParse(r){const n=this.fileExtensions.length===0?!0:this.fileExtensions.includes(r.extension),s=this.mediaTypes.includes(r.mediaType);if(!n)return!1;if(s)return!0;if(!s)try{const o=r.toString();return JSON.parse(o),this.detectionRegExp.test(o)}catch{return!1}return!1}async parse(r){if(this.sourceMap)throw new L("openapi-json-3-1-swagger-client parser plugin doesn't support sourceMaps option");const n=new oe,s=r.toString();if(this.allowEmpty&&s.trim()==="")return n;try{const o=JSON.parse(s),a=Pe.refract(o,this.refractorOpts);return a.classes.push("result"),n.push(a),n}catch(o){throw new L(`Error parsing "${r.uri}"`,{cause:o})}}}class ys extends be{constructor(r={}){super({name:"openapi-yaml-3-1-swagger-client",mediaTypes:new St(...ne.filterByFormat("generic"),...ne.filterByFormat("yaml")),...r});M(this,"detectionRegExp",/(?<YAML>^(["']?)openapi\2\s*:\s*(["']?)(?<version_yaml>3\.1\.(?:[1-9]\d*|0))\3(?:\s+|$))|(?<JSON>"openapi"\s*:\s*"(?<version_json>3\.1\.(?:[1-9]\d*|0))")/m)}async canParse(r){const n=this.fileExtensions.length===0?!0:this.fileExtensions.includes(r.extension),s=this.mediaTypes.includes(r.mediaType);if(!n)return!1;if(s)return!0;if(!s)try{const o=r.toString();return X.load(o),this.detectionRegExp.test(o)}catch{return!1}return!1}async parse(r){if(this.sourceMap)throw new L("openapi-yaml-3-1-swagger-client parser plugin doesn't support sourceMaps option");const n=new oe,s=r.toString();try{const o=X.load(s,{schema:Fe});if(this.allowEmpty&&typeof o>"u")return n;const a=Pe.refract(o,this.refractorOpts);return a.classes.push("result"),n.push(a),n}catch(o){throw new L(`Error parsing "${r.uri}"`,{cause:o})}}}const ms=e=>e.slice(2),N=e=>{const t=ms(e);return t.reduce((r,n,s)=>{if(xt(n)){const o=String(S(n.key));r.push(o)}else if(Rt(t[s-2])){const o=t[s-2].content.indexOf(n);r.push(o)}return r},[])};class gs{constructor({modelPropertyMacro:t,options:r}){M(this,"modelPropertyMacro");M(this,"options");M(this,"SchemaElement",{leave:(t,r,n,s,o)=>{typeof t.properties>"u"||se(t.properties)&&t.properties.forEach(a=>{if(se(a))try{const l=this.modelPropertyMacro(S(a));a.set("default",l)}catch(l){var i,c;const u=new Error(l,{cause:l});u.fullPath=[...N([...o,n,t]),"properties"],(i=this.options.dereference.dereferenceOpts)===null||i===void 0||(i=i.errors)===null||i===void 0||(c=i.push)===null||c===void 0||c.call(i,u)}})}});this.modelPropertyMacro=t,this.options=r}}class ws{constructor({options:t}){M(this,"options");M(this,"SchemaElement",{leave(t,r,n,s,o){if(typeof t.allOf>"u")return;if(!Rt(t.allOf)){var a,i;const d=new TypeError("allOf must be an array");d.fullPath=[...N([...o,n,t]),"allOf"],(a=this.options.dereference.dereferenceOpts)===null||a===void 0||(a=a.errors)===null||a===void 0||(i=a.push)===null||i===void 0||i.call(a,d);return}if(t.allOf.isEmpty){t.remove("allOf");return}if(!t.allOf.content.every(Ue)){var l,u;const d=new TypeError("Elements in allOf must be objects");d.fullPath=[...N([...o,n,t]),"allOf"],(l=this.options.dereference.dereferenceOpts)===null||l===void 0||(l=l.errors)===null||l===void 0||(u=l.push)===null||u===void 0||u.call(l,d);return}for(;t.hasKey("allOf");){const{allOf:d}=t;t.remove("allOf");const f=nr.all([...d.content,t]);if(t.hasKey("$$ref")||f.remove("$$ref"),t.hasKey("example")){const y=f.getMember("example");y&&(y.value=t.get("example"))}if(t.hasKey("examples")){const y=f.getMember("examples");y&&(y.value=t.get("examples"))}t.content=f.content}}});this.options=t}}var J;class bs{constructor({parameterMacro:t,options:r}){M(this,"parameterMacro");M(this,"options");at(this,J);M(this,"OperationElement",{enter:t=>{Re(this,J,t)},leave:()=>{Re(this,J,void 0)}});M(this,"ParameterElement",{leave:(t,r,n,s,o)=>{const a=xe(this,J)?S(xe(this,J)):null,i=S(t);try{const u=this.parameterMacro(a,i);t.set("default",u)}catch(u){var c,l;const d=new Error(u,{cause:u});d.fullPath=N([...o,n]),(c=this.options.dereference.dereferenceOpts)===null||c===void 0||(c=c.errors)===null||c===void 0||(l=c.push)===null||l===void 0||l.call(c,d)}}});this.parameterMacro=t,this.options=r}}J=new WeakMap;const ue=e=>{if(e.cause==null)return e;let{cause:t}=e;for(;t.cause!=null;)t=t.cause;return t};class Ps extends Qe{}const{wrapError:Ie}=Ye,$e=Tt[Symbol.for("nodejs.util.promisify.custom")],k=new sr,H=(e,t,r,n)=>{xt(n)?n.value=e:Array.isArray(n)&&(n[r]=e)};class te extends or{constructor({allowMetaPatches:r=!0,useCircularStructures:n=!1,basePath:s=null,...o}){super(o);M(this,"useCircularStructures");M(this,"allowMetaPatches");M(this,"basePath");this.allowMetaPatches=r,this.useCircularStructures=n,this.basePath=s}async ReferenceElement(r,n,s,o,a,i){try{if(this.indirections.includes(r))return!1;const[p,m]=this.toAncestorLineage([...a,s]),h=this.toBaseURI(S(r.$ref)),P=z(this.reference.uri)===h,O=!P;if(!this.options.resolve.internal&&P||!this.options.resolve.external&&O)return!1;const w=await this.toReference(S(r.$ref)),E=U(h,S(r.$ref));this.indirections.push(r);const I=K(E);let b=q(I,w.value.result);if(b.id=k.identify(b),ct(b)){const C=S(r.meta.get("referenced-element")),v=`${C}-${S(k.identify(b))}`;this.refractCache.has(v)?b=this.refractCache.get(v):ir(b)?(b=ar.refract(b),b.setMetaProperty("referenced-element",C),this.refractCache.set(v,b)):(b=this.namespace.getElementClass(C).refract(b),this.refractCache.set(v,b))}if(r===b)throw new G("Recursive Reference Object detected");if(this.indirections.length>this.options.dereference.maxDepth)throw new Te(`Maximum dereference depth of "${this.options.dereference.maxDepth}" has been exceeded in file "${this.reference.uri}"`);if(p.includes(b)){if(w.refSet.circular=!0,this.options.dereference.circular==="error")throw new G("Circular reference detected");if(this.options.dereference.circular==="replace"){var c,l;const C=new de.RefElement(b.id,{type:"reference",uri:w.uri,$ref:S(r.$ref),baseURI:E,referencingElement:r}),A=((c=(l=this.options.dereference.strategyOpts["openapi-3-1"])===null||l===void 0?void 0:l.circularReplacer)!==null&&c!==void 0?c:this.options.dereference.circularReplacer)(C);return i.replaceWith(C,H),s?!1:A}}const T=z(w.refSet.rootRef.uri)!==w.uri,j=["error","replace"].includes(this.options.dereference.circular);if((O||T||cr(b)||j)&&!p.includesCycle(b)){var u;m.add(r);const C=new te({reference:w,namespace:this.namespace,indirections:[...this.indirections],options:this.options,refractCache:this.refractCache,ancestors:p,allowMetaPatches:this.allowMetaPatches,useCircularStructures:this.useCircularStructures,basePath:(u=this.basePath)!==null&&u!==void 0?u:[...N([...a,s,r]),"$ref"]});b=await $e(b,C,{keyMap:ee,nodeTypeGetter:Y}),m.delete(r)}this.indirections.pop();const g=lr(b);if(g.setMetaProperty("ref-fields",{$ref:S(r.$ref),description:S(r.description),summary:S(r.summary)}),g.setMetaProperty("ref-origin",w.uri),g.setMetaProperty("ref-referencing-element-id",D(k.identify(r))),se(b)&&(r.hasKey("description")&&"description"in b&&(g.remove("description"),g.set("description",r.get("description"))),r.hasKey("summary")&&"summary"in b&&(g.remove("summary"),g.set("summary",r.get("summary")))),this.allowMetaPatches&&se(g)&&!g.hasKey("$$ref")){const C=U(h,E);g.set("$$ref",C)}return i.replaceWith(g,H),s?!1:g}catch(p){var d,f,y;const m=ue(p),h=Ie(m,{baseDoc:this.reference.uri,$ref:S(r.$ref),pointer:K(S(r.$ref)),fullPath:(d=this.basePath)!==null&&d!==void 0?d:[...N([...a,s,r]),"$ref"]});(f=this.options.dereference.dereferenceOpts)===null||f===void 0||(f=f.errors)===null||f===void 0||(y=f.push)===null||y===void 0||y.call(f,h);return}}async PathItemElement(r,n,s,o,a,i){try{if(!ce(r.$ref))return;if(this.indirections.includes(r)||ur(["cycle"],r.$ref))return!1;const[p,m]=this.toAncestorLineage([...a,s]),h=this.toBaseURI(S(r.$ref)),P=z(this.reference.uri)===h,O=!P;if(!this.options.resolve.internal&&P||!this.options.resolve.external&&O)return;const w=await this.toReference(S(r.$ref)),E=U(h,S(r.$ref));this.indirections.push(r);const I=K(E);let b=q(I,w.value.result);if(b.id=k.identify(b),ct(b)){const g=`path-item-${S(k.identify(b))}`;this.refractCache.has(g)?b=this.refractCache.get(g):(b=lt.refract(b),this.refractCache.set(g,b))}if(r===b)throw new G("Recursive Path Item Object reference detected");if(this.indirections.length>this.options.dereference.maxDepth)throw new Te(`Maximum dereference depth of "${this.options.dereference.maxDepth}" has been exceeded in file "${this.reference.uri}"`);if(p.includes(b)){if(w.refSet.circular=!0,this.options.dereference.circular==="error")throw new G("Circular reference detected");if(this.options.dereference.circular==="replace"){var c,l;const g=new de.RefElement(b.id,{type:"path-item",uri:w.uri,$ref:S(r.$ref),baseURI:E,referencingElement:r}),v=((c=(l=this.options.dereference.strategyOpts["openapi-3-1"])===null||l===void 0?void 0:l.circularReplacer)!==null&&c!==void 0?c:this.options.dereference.circularReplacer)(g);return i.replaceWith(g,H),s?!1:v}}const T=z(w.refSet.rootRef.uri)!==w.uri,j=["error","replace"].includes(this.options.dereference.circular);if((O||T||ut(b)&&ce(b.$ref)||j)&&!p.includesCycle(b)){var u;m.add(r);const g=new te({reference:w,namespace:this.namespace,indirections:[...this.indirections],options:this.options,ancestors:p,allowMetaPatches:this.allowMetaPatches,useCircularStructures:this.useCircularStructures,basePath:(u=this.basePath)!==null&&u!==void 0?u:[...N([...a,s,r]),"$ref"]});b=await $e(b,g,{keyMap:ee,nodeTypeGetter:Y}),m.delete(r)}if(this.indirections.pop(),ut(b)){const g=new lt([...b.content],D(b.meta),D(b.attributes));if(r.forEach((C,v,A)=>{g.remove(S(v)),g.content.push(A)}),g.remove("$ref"),g.setMetaProperty("ref-fields",{$ref:S(r.$ref)}),g.setMetaProperty("ref-origin",w.uri),g.setMetaProperty("ref-referencing-element-id",D(k.identify(r))),this.allowMetaPatches&&typeof g.get("$$ref")>"u"){const C=U(h,E);g.set("$$ref",C)}b=g}return i.replaceWith(b,H),s?void 0:b}catch(p){var d,f,y;const m=ue(p),h=Ie(m,{baseDoc:this.reference.uri,$ref:S(r.$ref),pointer:K(S(r.$ref)),fullPath:(d=this.basePath)!==null&&d!==void 0?d:[...N([...a,s,r]),"$ref"]});(f=this.options.dereference.dereferenceOpts)===null||f===void 0||(f=f.errors)===null||f===void 0||(y=f.push)===null||y===void 0||y.call(f,h);return}}async SchemaElement(r,n,s,o,a,i){try{if(!ce(r.$ref))return;if(this.indirections.includes(r))return!1;const[p,m]=this.toAncestorLineage([...a,s]);let h=await this.toReference(le(this.reference.uri)),{uri:P}=h;const O=fr(P,r),w=z(O),E=new dr({uri:w}),I=!this.options.resolve.resolvers.some(A=>A.canRead(E)),b=!I;let T=z(this.reference.uri)===O,j=!T;this.indirections.push(r);let g;try{if(I||b){P=this.toBaseURI(O);const A=O,x=B(h.value.result);if(g=pr(A,x),g=B(g),g.id=k.identify(g),!this.options.resolve.internal&&T||!this.options.resolve.external&&j)return}else{if(P=this.toBaseURI(O),T=z(this.reference.uri)===P,j=!T,!this.options.resolve.internal&&T||!this.options.resolve.external&&j)return;h=await this.toReference(le(O));const A=K(O),x=B(h.value.result);g=q(A,x),g=B(g),g.id=k.identify(g)}}catch(A){if(b&&A instanceof hr)if(yr(ft(O))){if(T=z(this.reference.uri)===P,j=!T,!this.options.resolve.internal&&T||!this.options.resolve.external&&j)return;h=await this.toReference(le(O));const x=ft(O),F=B(h.value.result);g=mr(x,F),g=B(g),g.id=k.identify(g)}else{if(P=this.toBaseURI(S(O)),T=z(this.reference.uri)===P,j=!T,!this.options.resolve.internal&&T||!this.options.resolve.external&&j)return;h=await this.toReference(le(O));const x=K(O),F=B(h.value.result);g=q(x,F),g=B(g),g.id=k.identify(g)}else throw A}if(r===g)throw new G("Recursive Schema Object reference detected");if(this.indirections.length>this.options.dereference.maxDepth)throw new Te(`Maximum dereference depth of "${this.options.dereference.maxDepth}" has been exceeded in file "${this.reference.uri}"`);if(p.includes(g)){if(h.refSet.circular=!0,this.options.dereference.circular==="error")throw new G("Circular reference detected");if(this.options.dereference.circular==="replace"){var c,l;const A=new de.RefElement(g.id,{type:"json-schema",uri:h.uri,$ref:S(r.$ref),baseURI:U(P,O),referencingElement:r}),F=((c=(l=this.options.dereference.strategyOpts["openapi-3-1"])===null||l===void 0?void 0:l.circularReplacer)!==null&&c!==void 0?c:this.options.dereference.circularReplacer)(A);return i.replaceWith(F,H),s?!1:F}}const C=z(h.refSet.rootRef.uri)!==h.uri,v=["error","replace"].includes(this.options.dereference.circular);if((j||C||Ue(g)&&ce(g.$ref)||v)&&!p.includesCycle(g)){var u;m.add(r);const A=new te({reference:h,namespace:this.namespace,indirections:[...this.indirections],options:this.options,useCircularStructures:this.useCircularStructures,allowMetaPatches:this.allowMetaPatches,ancestors:p,basePath:(u=this.basePath)!==null&&u!==void 0?u:[...N([...a,s,r]),"$ref"]});g=await $e(g,A,{keyMap:ee,nodeTypeGetter:Y}),m.delete(r)}if(this.indirections.pop(),gr(g)){const A=D(g);return A.setMetaProperty("ref-fields",{$ref:S(r.$ref)}),A.setMetaProperty("ref-origin",h.uri),A.setMetaProperty("ref-referencing-element-id",D(k.identify(r))),i.replaceWith(A,H),s?!1:A}if(Ue(g)){const A=new wr([...g.content],D(g.meta),D(g.attributes));if(r.forEach((x,F,Se)=>{A.remove(S(F)),A.content.push(Se)}),A.remove("$ref"),A.setMetaProperty("ref-fields",{$ref:S(r.$ref)}),A.setMetaProperty("ref-origin",h.uri),A.setMetaProperty("ref-referencing-element-id",D(k.identify(r))),this.allowMetaPatches&&typeof A.get("$$ref")>"u"){const x=U(P,O);A.set("$$ref",x)}g=A}return i.replaceWith(g,H),s?void 0:g}catch(p){var d,f,y;const m=ue(p),h=new Ps(`Could not resolve reference: ${m.message}`,{baseDoc:this.reference.uri,$ref:S(r.$ref),fullPath:(d=this.basePath)!==null&&d!==void 0?d:[...N([...a,s,r]),"$ref"],cause:m});(f=this.options.dereference.dereferenceOpts)===null||f===void 0||(f=f.errors)===null||f===void 0||(y=f.push)===null||y===void 0||y.call(f,h);return}}async LinkElement(){}async ExampleElement(r,n,s,o,a,i){try{return await super.ExampleElement(r,n,s,o,a,i)}catch(d){var c,l,u;const f=ue(d),y=Ie(f,{baseDoc:this.reference.uri,externalValue:S(r.externalValue),fullPath:(c=this.basePath)!==null&&c!==void 0?c:[...N([...a,s,r]),"externalValue"]});(l=this.options.dereference.dereferenceOpts)===null||l===void 0||(l=l.errors)===null||l===void 0||(u=l.push)===null||u===void 0||u.call(l,y);return}}}const vs=br[Symbol.for("nodejs.util.promisify.custom")];class Os{constructor({parameterMacro:t,modelPropertyMacro:r,mode:n,options:s,...o}){const a=[];a.push(new te({...o,options:s})),typeof r=="function"&&a.push(new gs({modelPropertyMacro:r,options:s})),n!=="strict"&&a.push(new ws({options:s})),typeof t=="function"&&a.push(new bs({parameterMacro:t,options:s}));const i=vs(a,{nodeTypeGetter:Y});Object.assign(this,i)}}const As=Tt[Symbol.for("nodejs.util.promisify.custom")];class Ss extends Pr{constructor({allowMetaPatches:r=!1,parameterMacro:n=null,modelPropertyMacro:s=null,mode:o="non-strict",ancestors:a=[],...i}={}){super({...i});M(this,"allowMetaPatches");M(this,"parameterMacro");M(this,"modelPropertyMacro");M(this,"mode");M(this,"ancestors");this.name="openapi-3-1-swagger-client",this.allowMetaPatches=r,this.parameterMacro=n,this.modelPropertyMacro=s,this.mode=o,this.ancestors=[...a]}async dereference(r,n){var s;const o=vr(Or),a=(s=n.dereference.refSet)!==null&&s!==void 0?s:new Ne,i=new Ne;let c=a,l;a.has(r.uri)?l=a.find(f=>f.uri===r.uri):(l=new fe({uri:r.uri,value:r.parseResult}),a.add(l)),n.dereference.immutable&&(a.refs.map(f=>new fe({...f,value:D(f.value)})).forEach(f=>i.add(f)),l=i.find(f=>f.uri===r.uri),c=i);const u=new Os({reference:l,namespace:o,options:n,allowMetaPatches:this.allowMetaPatches,ancestors:this.ancestors,modelPropertyMacro:this.modelPropertyMacro,mode:this.mode,parameterMacro:this.parameterMacro}),d=await As(c.rootRef.value,u,{keyMap:ee,nodeTypeGetter:Y});return n.dereference.immutable&&i.refs.filter(f=>f.uri.startsWith("immutable://")).map(f=>new fe({...f,uri:f.uri.replace(/^immutable:\/\//,"")})).forEach(f=>a.add(f)),n.dereference.refSet===null&&a.clean(),i.clean(),d}}const xs=e=>{const t=S(e.meta.get("baseURI")),r=e.meta.get("referencingElement");return new de.ObjectElement({$ref:t},D(r.meta),D(r.attributes))},Oe=async e=>{const{spec:t,timeout:r,redirects:n,requestInterceptor:s,responseInterceptor:o,pathDiscriminator:a=[],allowMetaPatches:i=!1,useCircularStructures:c=!1,skipNormalization:l=!1,parameterMacro:u=null,modelPropertyMacro:d=null,mode:f="non-strict",strategies:y}=e;try{const{cache:p}=Oe,m=y.find(Se=>Se.match(t)),h=Ot(dt())?dt():me,P=et(e),O=U(h,P);let w;p.has(t)?w=p.get(t):(w=Pe.refract(t),w.classes.push("result"),p.set(t,w));const E=new oe([w]),I=Ar(a),b=I===""?"":`#${I}`,T=q(I,w),j=new fe({uri:O,value:E}),g=new Ne({refs:[j]});I!==""&&(g.rootRef=void 0);const C=[new Set([T])],v=[],A=await Sr(T,{resolve:{baseURI:`${O}${b}`,resolvers:[new fs({timeout:r||1e4,redirects:n||10})],resolverOpts:{swaggerHTTPClientConfig:{requestInterceptor:s,responseInterceptor:o}},strategies:[new Tr]},parse:{mediaType:ne.latest(),parsers:[new hs({allowEmpty:!1,sourceMap:!1}),new ys({allowEmpty:!1,sourceMap:!1}),new ds({allowEmpty:!1,sourceMap:!1}),new ps({allowEmpty:!1,sourceMap:!1}),new Rr({allowEmpty:!1,sourceMap:!1})]},dereference:{maxDepth:100,strategies:[new Ss({allowMetaPatches:i,useCircularStructures:c,parameterMacro:u,modelPropertyMacro:d,mode:f,ancestors:C})],refSet:g,dereferenceOpts:{errors:v},immutable:!1,circular:c?"ignore":"replace",circularReplacer:c?xr.dereference.circularReplacer:xs}}),x=Cr(T,A,w),F=l?x:m.normalize(x);return{spec:S(F),errors:v}}catch(p){if(p instanceof Er||p instanceof Mr)return{spec:t,errors:[]};throw p}};Oe.cache=new WeakMap;const Pt=e=>{if(!se(e))return e;const t=[jr({operationIdNormalizer:(n,s,o)=>rt({operationId:n},s,o,{v2OperationIdCompatibilityMode:!1})}),Ir(),$r(),kr(),Dr()];return Ur(e,t,{toolboxCreator:Nr,visitorOptions:{keyMap:ee,nodeTypeGetter:Y}})},Rs=e=>t=>{const r=Pe.refract(t);r.classes.push("result");const n=e(r),s=S(n);return Oe.cache.set(s,n),S(n)},Ao={name:"openapi-3-1-apidom",match(e){return st(e)},normalize(e){if(!pt(e)&&ie(e)&&!e.$$normalized){const t=Rs(Pt)(e);return t.$$normalized=!0,t}return pt(e)?Pt(e):e},async resolve(e){return Oe(e)}},Ts=async e=>{const{spec:t,requestInterceptor:r,responseInterceptor:n}=e,s=et(e),o=Gt(e),a=t||await Ht(o,{requestInterceptor:r,responseInterceptor:n})(s),i={...e,spec:a};return e.strategies.find(l=>l.match(a)).resolve(i)},Cs=e=>async t=>{const r={...e,...t};return Ts(r)},Es=Cs({strategies:[cs,is,ns]}),Ms={body:js,header:$s,query:Ds,path:ks,formData:Is};function js({req:e,value:t}){t!==void 0&&(e.body=t)}function Is({req:e,value:t,parameter:r}){if(t===!1&&r.type==="boolean"&&(t="false"),t===0&&["number","integer"].indexOf(r.type)>-1&&(t="0"),t)e.form=e.form||{},e.form[r.name]={collectionFormat:r.collectionFormat,value:t};else if(r.allowEmptyValue&&t!==void 0){e.form=e.form||{};const n=r.name;e.form[n]=e.form[n]||{},e.form[n].allowEmptyValue=!0}}function $s({req:e,parameter:t,value:r}){e.headers=e.headers||{},typeof r<"u"&&(e.headers[t.name]=r)}function ks({req:e,value:t,parameter:r,baseURL:n}){if(t!==void 0){const s=e.url.replace(n,""),o=ze(s,{[r.name]:t});e.url=n+o}}function Ds({req:e,value:t,parameter:r}){if(e.query=e.query||{},t===!1&&r.type==="boolean"&&(t="false"),t===0&&["number","integer"].indexOf(r.type)>-1&&(t="0"),t)e.query[r.name]={collectionFormat:r.collectionFormat,value:t};else if(r.allowEmptyValue&&t!==void 0){const n=r.name;e.query[n]=e.query[n]||{},e.query[n].allowEmptyValue=!0}}function Ae(e,t){return t.includes("application/json")?typeof e=="string"?e:(Array.isArray(e)&&(e=e.map(r=>{try{return JSON.parse(r)}catch{return r}})),JSON.stringify(e)):String(e)}const Us="%3D",Ns="%26",Fs=e=>Jr(e).replace(/[=&]/gu,t=>t==="="?Us:Ns),Ke=(e,t={})=>Br(e,Kr({encoders:{name:Wr,value:Fs},validators:{name:Hr,value:Lr}},t));function zs({req:e,value:t,parameter:r,baseURL:n}){const{name:s,style:o,explode:a,content:i}=r;if(t===void 0)return;const c=e.url.replace(n,"");let l;if(i){const u=Object.keys(i)[0];l=ze(c,{[s]:t},{encoder:d=>Wt(Ae(d,u))})}else l=ze(c,{[s]:t},{encoder:u=>_e({key:r.name,value:u,style:o||"simple",explode:a??!1,escape:"reserved"})});e.url=n+l}function Vs({req:e,value:t,parameter:r}){if(e.query=e.query||{},t!==void 0&&r.content){const n=Object.keys(r.content)[0],s=Ae(t,n);if(s)e.query[r.name]=s;else if(r.allowEmptyValue){const o=r.name;e.query[o]=e.query[o]||{},e.query[o].allowEmptyValue=!0}return}if(t===!1&&(t="false"),t===0&&(t="0"),t){const{style:n,explode:s,allowReserved:o}=r;e.query[r.name]={value:t,serializationOption:{style:n,explode:s,allowReserved:o}}}else if(r.allowEmptyValue&&t!==void 0){const n=r.name;e.query[n]=e.query[n]||{},e.query[n].allowEmptyValue=!0}}const Bs=["accept","authorization","content-type"];function Ls({req:e,parameter:t,value:r}){if(e.headers=e.headers||{},!(Bs.indexOf(t.name.toLowerCase())>-1)){if(r!==void 0&&t.content){const n=Object.keys(t.content)[0];e.headers[t.name]=Ae(r,n);return}r!==void 0&&!(Array.isArray(r)&&r.length===0)&&(e.headers[t.name]=_e({key:t.name,value:r,style:t.style||"simple",explode:typeof t.explode>"u"?!1:t.explode,escape:!1}))}}function Hs({req:e,parameter:t,value:r}){const{name:n}=t;if(e.headers=e.headers||{},r!==void 0&&t.content){const o=Object.keys(t.content)[0],a=Ae(r,o);e.headers.Cookie=Ke({[n]:a});return}if(r!==void 0&&!(Array.isArray(r)&&r.length===0)){var s;const o=_e({key:t.name,value:r,escape:!1,style:t.style||"form",explode:(s=t.explode)!==null&&s!==void 0?s:!1}),a=Array.isArray(r)&&t.explode?`${n}=${o}`:o;e.headers.Cookie=Ke({[n]:a})}}const Js=Object.freeze(Object.defineProperty({__proto__:null,cookie:Hs,header:Ls,path:zs,query:Vs},Symbol.toStringTag,{value:"Module"})),Ws=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window,{btoa:Zt}=Ws;function Ks(e,t){const{operation:r,requestBody:n,securities:s,spec:o,attachContentTypeForEmptyPayload:a}=e;let{requestContentType:i}=e;t=Gs({request:t,securities:s,operation:r,spec:o});const c=r.requestBody||{},l=Object.keys(c.content||{}),u=i&&l.indexOf(i)>-1;if(n||a){if(i&&u)t.headers["Content-Type"]=i;else if(!i){const m=l[0];m&&(t.headers["Content-Type"]=m,i=m)}}else i&&u&&(t.headers["Content-Type"]=i);if(!e.responseContentType&&r.responses){const m=Object.entries(r.responses).filter(([h,P])=>{const O=parseInt(h,10);return O>=200&&O<300&&ie(P.content)}).reduce((h,[,P])=>h.concat(Object.keys(P.content)),[]);m.length>0&&(t.headers.accept=m.join(", "))}if(n)if(i){if(l.indexOf(i)>-1)if(i==="application/x-www-form-urlencoded"||i==="multipart/form-data")if(typeof n=="object"){var d,f;const m=(d=(f=c.content[i])===null||f===void 0?void 0:f.encoding)!==null&&d!==void 0?d:{};t.form={},Object.keys(n).forEach(h=>{let P;try{P=JSON.parse(n[h])}catch{P=n[h]}t.form[h]={value:P,encoding:m[h]||{}}})}else if(typeof n=="string"){var y,p;const m=(y=(p=c.content[i])===null||p===void 0?void 0:p.encoding)!==null&&y!==void 0?y:{};try{t.form={};const h=JSON.parse(n);Object.entries(h).forEach(([P,O])=>{t.form[P]={value:O,encoding:m[P]||{}}})}catch{t.form=n}}else t.form=n;else t.body=n}else t.body=n;return t}function Gs({request:e,securities:t={},operation:r={},spec:n}){var s;const o={...e},{authorized:a={}}=t,i=r.security||n.security||[],c=a&&!!Object.keys(a).length,l=(n==null||(s=n.components)===null||s===void 0?void 0:s.securitySchemes)||{};return o.headers=o.headers||{},o.query=o.query||{},!Object.keys(t).length||!c||!i||Array.isArray(r.security)&&!r.security.length?e:(i.forEach(u=>{Object.keys(u).forEach(d=>{const f=a[d],y=l[d];if(!f)return;const p=f.value||f,{type:m}=y;if(f){if(m==="apiKey")y.in==="query"&&(o.query[y.name]=p),y.in==="header"&&(o.headers[y.name]=p),y.in==="cookie"&&(o.cookies[y.name]=p);else if(m==="http"){if(/^basic$/i.test(y.scheme)){const h=p.username||"",P=p.password||"",O=Zt(`${h}:${P}`);o.headers.Authorization=`Basic ${O}`}/^bearer$/i.test(y.scheme)&&(o.headers.Authorization=`Bearer ${p}`)}else if(m==="oauth2"||m==="openIdConnect"){const h=f.token||{},P=y["x-tokenName"]||"access_token",O=h[P];let w=h.token_type;(!w||w.toLowerCase()==="bearer")&&(w="Bearer"),o.headers.Authorization=`${w} ${O}`}}})}),o)}function Qs(e,t){const{spec:r,operation:n,securities:s,requestContentType:o,responseContentType:a,attachContentTypeForEmptyPayload:i}=e;if(t=Ys({request:t,securities:s,operation:n,spec:r}),t.body||t.form||i)o?t.headers["Content-Type"]=o:Array.isArray(n.consumes)?[t.headers["Content-Type"]]=n.consumes:Array.isArray(r.consumes)?[t.headers["Content-Type"]]=r.consumes:n.parameters&&n.parameters.filter(c=>c.type==="file").length?t.headers["Content-Type"]="multipart/form-data":n.parameters&&n.parameters.filter(c=>c.in==="formData").length&&(t.headers["Content-Type"]="application/x-www-form-urlencoded");else if(o){const c=n.parameters&&n.parameters.filter(u=>u.in==="body").length>0,l=n.parameters&&n.parameters.filter(u=>u.in==="formData").length>0;(c||l)&&(t.headers["Content-Type"]=o)}return!a&&Array.isArray(n.produces)&&n.produces.length>0&&(t.headers.accept=n.produces.join(", ")),t}function Ys({request:e,securities:t={},operation:r={},spec:n}){const s={...e},{authorized:o={},specSecurity:a=[]}=t,i=r.security||a,c=o&&!!Object.keys(o).length,l=n.securityDefinitions;return s.headers=s.headers||{},s.query=s.query||{},!Object.keys(t).length||!c||!i||Array.isArray(r.security)&&!r.security.length?e:(i.forEach(u=>{Object.keys(u).forEach(d=>{const f=o[d];if(!f)return;const{token:y}=f,p=f.value||f,m=l[d],{type:h}=m,P=m["x-tokenName"]||"access_token",O=y&&y[P];let w=y&&y.token_type;if(f)if(h==="apiKey"){const E=m.in==="query"?"query":"headers";s[E]=s[E]||{},s[E][m.name]=p}else if(h==="basic")if(p.header)s.headers.authorization=p.header;else{const E=p.username||"",I=p.password||"";p.base64=Zt(`${E}:${I}`),s.headers.authorization=`Basic ${p.base64}`}else h==="oauth2"&&O&&(w=!w||w.toLowerCase()==="bearer"?"Bearer":w,s.headers.authorization=`${w} ${O}`)})}),s)}function Xs(e,t,r){if(!e||typeof e!="object"||!e.paths||typeof e.paths!="object")return null;const{paths:n}=e;for(const s in n)for(const o in n[s]){if(o.toUpperCase()==="PARAMETERS")continue;const a=n[s][o];if(!a||typeof a!="object")continue;const i={spec:e,pathName:s,method:o.toUpperCase(),operation:a};if(t(i))return i}}function Zs(e,t){return Xs(e,t)||null}function _t(e,t){return`${t.toLowerCase()}-${e}`}function _s(e,t){return!e||!e.paths?null:Zs(e,({pathName:r,method:n,operation:s})=>{if(!s||typeof s!="object")return!1;const o=s.operationId,a=rt(s,r,n),i=_t(r,n);return[a,i,o].some(c=>c&&c===t)})}const vt=e=>Array.isArray(e)?e:[],re=(e,{recurse:t=!0,depth:r=1}={})=>{if(ie(e)){if(e.type==="object"||e.type==="array"||Array.isArray(e.type)&&(e.type.includes("object")||e.type.includes("array")))return e;if(!(r>Dt)&&t){const n=Array.isArray(e.oneOf)?e.oneOf.find(o=>re(o,{recurse:t,depth:r+1})):void 0;if(n)return n;const s=Array.isArray(e.anyOf)?e.anyOf.find(o=>re(o,{recurse:t,depth:r+1})):void 0;if(s)return s}}},ke=({value:e,silentFail:t=!1})=>{try{const r=JSON.parse(e);if(ie(r)||Array.isArray(r))return r;if(!t)throw new Error("Expected JSON serialized object or array")}catch{if(!t)throw new Error("Could not parse parameter value string as JSON Object or JSON Array")}return e},he=e=>{try{return new URL(e)}catch{const t=new URL(e,me),r=String(e).startsWith("/")?t.pathname:t.pathname.substring(1);return{hash:t.hash,host:"",hostname:"",href:"",origin:"",password:"",pathname:r,port:"",protocol:"",search:t.search,searchParams:t.searchParams}}};class qs extends Qe{}const eo=(e,t)=>t.filter(r=>r.name===e),to=e=>{const t={};e.forEach(n=>{t[n.in]||(t[n.in]={}),t[n.in][n.name]=n});const r=[];return Object.keys(t).forEach(n=>{Object.keys(t[n]).forEach(s=>{r.push(t[n][s])})}),r},ro={buildRequest:no};function So({http:e,fetch:t,spec:r,operationId:n,pathName:s,method:o,parameters:a,securities:i,...c}){const l=e||t||we;s&&o&&!n&&(n=_t(s,o));const u=ro.buildRequest({spec:r,operationId:n,parameters:a,securities:i,http:l,...c});return u.body&&(ie(u.body)||Array.isArray(u.body))&&(u.body=JSON.stringify(u.body)),l(u)}function no(e){const{spec:t,operationId:r,responseContentType:n,scheme:s,requestInterceptor:o,responseInterceptor:a,contextUrl:i,userFetch:c,server:l,serverVariables:u,http:d,signal:f,serverVariableEncoder:y}=e;let{parameters:p,parameterBuilders:m,baseURL:h}=e;const P=Xt(t);m||(P?m=Js:m=Ms);let w={url:"",credentials:d&&d.withCredentials?"include":"same-origin",headers:{},cookies:{}};f&&(w.signal=f),o&&(w.requestInterceptor=o),a&&(w.responseInterceptor=a),c&&(w.userFetch=c);const E=_s(t,r);if(!E)throw new qs(`Operation ${r} not found`);const{operation:I={},method:b,pathName:T}=E;if(h=h??so({spec:t,scheme:s,contextUrl:i,server:l,serverVariables:u,pathName:T,method:b,serverVariableEncoder:y}),w.url+=h,!r)return delete w.cookies,w;w.url+=T,w.method=`${b}`.toUpperCase(),p=p||{};const j=t.paths[T]||{};n&&(w.headers.accept=n);const g=to([].concat(vt(I.parameters)).concat(vt(j.parameters)));g.forEach(v=>{const A=m[v.in];let x;if(v.in==="body"&&v.schema&&v.schema.properties&&(x=p),x=v&&v.name&&p[v.name],typeof x>"u"?x=v&&v.name&&p[`${v.in}.${v.name}`]:eo(v.name,g).length>1&&console.warn(`Parameter '${v.name}' is ambiguous because the defined spec has more than one parameter with the name: '${v.name}' and the passed-in parameter values did not define an 'in' value.`),x!==null){if(typeof v.default<"u"&&typeof x>"u"&&(x=v.default),typeof x>"u"&&v.required&&!v.allowEmptyValue)throw new Error(`Required parameter ${v.name} is not provided`);P&&typeof x=="string"&&(Ce("type",v.schema)&&typeof v.schema.type=="string"&&re(v.schema,{recurse:!1})?x=ke({value:x,silentFail:!1}):Ce("type",v.schema)&&Array.isArray(v.schema.type)&&re(v.schema,{recurse:!1})?x=ke({value:x,silentFail:!0}):!Ce("type",v.schema)&&re(v.schema,{recurse:!0})&&(x=ke({value:x,silentFail:!0}))),A&&A({req:w,parameter:v,value:x,operation:I,spec:t,baseURL:h})}});const C={...e,operation:I};if(P?w=Ks(C,w):w=Qs(C,w),w.cookies&&Object.keys(w.cookies).length>0){const v=Ke(w.cookies);Fr(w.headers.Cookie)?w.headers.Cookie+=`; ${v}`:w.headers.Cookie=v}return w.cookies&&delete w.cookies,qe(w)}const Ge=e=>e?e.replace(/\W/g,""):null;function so(e){return Xt(e.spec)?oo(e):ao(e)}const De=e=>Array.isArray(e)&&e.length>0;function oo({spec:e,pathName:t,method:r,server:n,contextUrl:s,serverVariables:o={},serverVariableEncoder:a}){var i,c;let l=[],u="",d;const f=e==null||(i=e.paths)===null||i===void 0||(i=i[t])===null||i===void 0||(i=i[(r||"").toLowerCase()])===null||i===void 0?void 0:i.servers,y=e==null||(c=e.paths)===null||c===void 0||(c=c[t])===null||c===void 0?void 0:c.servers,p=e==null?void 0:e.servers;if(l=De(f)?f:De(y)?y:De(p)?p:[Pn],n&&(d=l.find(m=>m.url===n),d&&(u=n)),u||([d]=l,u=d.url),zr(u,{strict:!0})){const m=Object.entries({...d.variables}).reduce((h,[P,O])=>(h[P]=O.default,h),{});u=Vr(u,{...m,...o},{encoder:typeof a=="function"?a:Gr})}return io(u,s)}function io(e="",t=""){const r=he(e&&t?U(t,e):e),n=he(t),s=Ge(r.protocol)||Ge(n.protocol),o=r.host||n.host,a=r.pathname;let i;return s&&o?i=`${s}://${o+a}`:i=a,i[i.length-1]==="/"?i.slice(0,-1):i}function ao({spec:e,scheme:t,contextUrl:r=""}){const n=he(r),s=Array.isArray(e.schemes)?e.schemes[0]:null,o=t||s||Ge(n.protocol)||"http",a=e.host||n.host||"",i=e.basePath||"";let c;return a?c=`${o}://${a+i}`:c=i,c[c.length-1]==="/"?c.slice(0,-1):c}const co=async(e,t,r={})=>{const{returnEntireTree:n,baseDoc:s,requestInterceptor:o,responseInterceptor:a,parameterMacro:i,modelPropertyMacro:c,useCircularStructures:l,strategies:u}=r,d={spec:e,pathDiscriminator:t,baseDoc:s,requestInterceptor:o,responseInterceptor:a,parameterMacro:i,modelPropertyMacro:c,useCircularStructures:l,strategies:u},y=u.find(m=>m.match(e)).normalize(e),p=await Es({spec:y,...d,allowMetaPatches:!0,skipNormalization:!st(e)});return!n&&Array.isArray(t)&&t.length&&(p.spec=t.reduce((m,h)=>m==null?void 0:m[h],p.spec)||null),p},xo=e=>async(t,r,n={})=>{const s={...e,...n};return co(t,r,s)};export{cs as a,Ao as b,no as c,Oo as d,So as e,xo as f,ns as g,we as h,rt as i,Cs as m,is as o,ts as s};
