var Zt=Object.defineProperty;var _t=(e,t,r)=>t in e?Zt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var M=(e,t,r)=>(_t(e,typeof t!="symbol"?t+"":t,r),r),nt=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};var Se=(e,t,r)=>(nt(e,t,"read from private field"),r?r.call(e):t.get(e)),st=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},xe=(e,t,r,n)=>(nt(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r);import{i as Pt,r as D,A as Ke,H as qt,R as er,P as ge,a as L,b as se,f as vt,O as Ot,m as re,c as we,d as At,t as S,e as St,g as ne,h as ke,j as tr,I as rr,v as xt,k as nr,s as F,u as K,l as q,n as ot,o as sr,p as or,q as G,M as Re,w as ir,x as ee,y as Y,z as ar,B as N,C as ie,D as cr,E as it,F as at,G as ae,J as lr,K as ur,L as B,N as fr,Q as dr,S as pr,T as ct,U as hr,V as yr,W as mr,X as gr,Y as wr,Z as br,_ as Ne,$ as le,a0 as Pr,a1 as lt,a2 as vr,a3 as Or,a4 as Ar,a5 as Sr,a6 as xr,a7 as Rr,a8 as Tr,a9 as Cr,aa as Er,ab as Mr,ac as jr,ad as Ir,ae as $r,af as kr,ag as Nr,ah as ut}from"./@swagger-api-11ca9c91.js";import{j as X,J as De}from"./js-yaml-80719af7.js";import{R as Te,O as Dr}from"./minim-860a8b48.js";import{f as be,k as Ur}from"./ramda-adjunct-2a547167.js";import{t as zr,s as Fr}from"./openapi-server-url-templating-18f3ea54.js";import{r as Ue}from"./openapi-path-templating-c0173b1c.js";import{s as Vr,i as Br,c as Lr,a as Hr,b as Jr}from"./@swaggerexpert-b77d4598.js";import{m as Wr,r as Kr,i as Gr}from"./ramda-34314078.js";import{a as _,g as Qr}from"./fast-json-patch-6f36fdbd.js";import{d as Yr}from"./deepmerge-9b37a392.js";import{s as Xr}from"./neotraverse-925ac113.js";const x={add:_r,replace:ue,remove:qr,merge:en,mergeDeep:tn,context:rn,getIn:an,applyPatch:Zr,parentPathMatch:on,flatten:oe,fullyNormalizeArray:cn,normalizeArray:Tt,isPromise:ln,forEachNew:nn,forEachNewPrimitive:sn,isJsonPatch:Mt,isContextPatch:dn,isPatch:Pe,isMutation:jt,isAdditiveMutation:de,isGenerator:fn,isFunction:Et,isObject:W,isError:un};function Zr(e,t,r){if(r=r||{},t={...t,path:t.path&&ft(t.path)},t.op==="merge"){const n=Ce(e,t.path);Object.assign(n,t.value),_(e,[ue(t.path,n)])}else if(t.op==="mergeDeep"){const n=Ce(e,t.path),s=Yr(n,t.value);e=_(e,[ue(t.path,s)]).newDocument}else if(t.op==="add"&&t.path===""&&W(t.value)){const n=Object.keys(t.value).reduce((s,o)=>(s.push({op:"add",path:`/${ft(o)}`,value:t.value[o]}),s),[]);_(e,n)}else if(t.op==="replace"&&t.path===""){let{value:n}=t;r.allowMetaPatches&&t.meta&&de(t)&&(Array.isArray(t.value)||W(t.value))&&(n={...n,...t.meta}),e=n}else if(_(e,[t]),r.allowMetaPatches&&t.meta&&de(t)&&(Array.isArray(t.value)||W(t.value))){const s={...Ce(e,t.path),...t.meta};_(e,[ue(t.path,s)])}return e}function ft(e){return Array.isArray(e)?e.length<1?"":`/${e.map(t=>(t+"").replace(/~/g,"~0").replace(/\//g,"~1")).join("/")}`:e}function _r(e,t){return{op:"add",path:e,value:t}}function ue(e,t,r){return{op:"replace",path:e,value:t,meta:r}}function qr(e){return{op:"remove",path:e}}function en(e,t){return{type:"mutation",op:"merge",path:e,value:t}}function tn(e,t){return{type:"mutation",op:"mergeDeep",path:e,value:t}}function rn(e,t){return{type:"context",path:e,value:t}}function nn(e,t){try{return Rt(e,Fe,t)}catch(r){return r}}function sn(e,t){try{return Rt(e,ze,t)}catch(r){return r}}function Rt(e,t,r){const n=e.filter(de).map(a=>t(a.value,r,a.path))||[],s=oe(n);return Ct(s)}function ze(e,t,r){return r=r||[],Array.isArray(e)?e.map((n,s)=>ze(n,t,r.concat(s))):W(e)?Object.keys(e).map(n=>ze(e[n],t,r.concat(n))):t(e,r[r.length-1],r)}function Fe(e,t,r){r=r||[];let n=[];if(r.length>0){const s=t(e,r[r.length-1],r);s&&(n=n.concat(s))}if(Array.isArray(e)){const s=e.map((o,a)=>Fe(o,t,r.concat(a)));s&&(n=n.concat(s))}else if(W(e)){const s=Object.keys(e).map(o=>Fe(e[o],t,r.concat(o)));s&&(n=n.concat(s))}return n=oe(n),n}function on(e,t){if(!Array.isArray(t))return!1;for(let r=0,n=t.length;r<n;r+=1)if(t[r]!==e[r])return!1;return!0}function an(e,t){return t.reduce((r,n)=>typeof n<"u"&&r?r[n]:r,e)}function cn(e){return Ct(oe(Tt(e)))}function Tt(e){return Array.isArray(e)?e:[e]}function oe(e){return[].concat(...e.map(t=>Array.isArray(t)?oe(t):t))}function Ct(e){return e.filter(t=>typeof t<"u")}function W(e){return e&&typeof e=="object"}function ln(e){return W(e)&&Et(e.then)}function Et(e){return e&&typeof e=="function"}function un(e){return e instanceof Error}function Mt(e){if(Pe(e)){const{op:t}=e;return t==="add"||t==="remove"||t==="replace"}return!1}function fn(e){return Object.prototype.toString.call(e)==="[object GeneratorFunction]"}function jt(e){return Mt(e)||Pe(e)&&e.type==="mutation"}function de(e){return jt(e)&&(e.op==="add"||e.op==="replace"||e.op==="merge"||e.op==="mergeDeep")}function dn(e){return Pe(e)&&e.type==="context"}function Pe(e){return e&&typeof e=="object"}function Ce(e,t){try{return Qr(e,t)}catch(r){return console.error(r),{}}}const{fetch:pn,Response:hn,Headers:yn,Request:mn,FormData:gn,File:wn,Blob:bn}=globalThis;typeof globalThis.fetch>"u"&&(globalThis.fetch=pn);typeof globalThis.Headers>"u"&&(globalThis.Headers=yn);typeof globalThis.Request>"u"&&(globalThis.Request=mn);typeof globalThis.Response>"u"&&(globalThis.Response=hn);typeof globalThis.FormData>"u"&&(globalThis.FormData=gn);typeof globalThis.File>"u"&&(globalThis.File=wn);typeof globalThis.Blob>"u"&&(globalThis.Blob=bn);const It="application/json, application/yaml",pe="https://swagger.io",Pn=Object.freeze({url:"/"}),$t=3e3,vn=["properties"],On=["properties"],An=["definitions","parameters","responses","securityDefinitions","components/schemas","components/responses","components/parameters","components/securitySchemes"],Sn=["schema/example","items/example"];function kt(e){const t=e[e.length-1],r=e[e.length-2],n=e.join("/");return vn.indexOf(t)>-1&&On.indexOf(r)===-1||An.indexOf(n)>-1||Sn.some(s=>n.indexOf(s)>-1)}function xn(e,t,{specmap:r,getBaseUrlForNodePath:n=o=>r.getContext([...t,...o]).baseDoc,targetKeys:s=["$ref","$$ref"]}={}){const o=[];return Xr(e).forEach(function(){if(s.includes(this.key)&&typeof this.node=="string"){const i=this.path,c=t.concat(this.path),l=Ve(this.node,n(i));o.push(r.replace(c,l))}}),o}function Ve(e,t){const[r,n]=e.split("#"),s=t??"",o=r??"";let a;if(Pt(s))a=D(s,o);else{const i=D(pe,s),l=D(i,o).replace(pe,"");a=o.startsWith("/")?l:l.substring(1)}return n?`${a}#${n}`:a}const Rn=/^([a-z]+:\/\/|\/\/)/i;class Z extends Ke{}const V={},dt=new WeakMap,Tn=[e=>e[0]==="paths"&&e[3]==="responses"&&e[5]==="examples",e=>e[0]==="paths"&&e[3]==="responses"&&e[5]==="content"&&e[7]==="example",e=>e[0]==="paths"&&e[3]==="responses"&&e[5]==="content"&&e[7]==="examples"&&e[9]==="value",e=>e[0]==="paths"&&e[3]==="requestBody"&&e[4]==="content"&&e[6]==="example",e=>e[0]==="paths"&&e[3]==="requestBody"&&e[4]==="content"&&e[6]==="examples"&&e[8]==="value",e=>e[0]==="paths"&&e[2]==="parameters"&&e[4]==="example",e=>e[0]==="paths"&&e[3]==="parameters"&&e[5]==="example",e=>e[0]==="paths"&&e[2]==="parameters"&&e[4]==="examples"&&e[6]==="value",e=>e[0]==="paths"&&e[3]==="parameters"&&e[5]==="examples"&&e[7]==="value",e=>e[0]==="paths"&&e[2]==="parameters"&&e[4]==="content"&&e[6]==="example",e=>e[0]==="paths"&&e[2]==="parameters"&&e[4]==="content"&&e[6]==="examples"&&e[8]==="value",e=>e[0]==="paths"&&e[3]==="parameters"&&e[4]==="content"&&e[7]==="example",e=>e[0]==="paths"&&e[3]==="parameters"&&e[5]==="content"&&e[7]==="examples"&&e[9]==="value"],Cn=e=>Tn.some(t=>t(e)),En={key:"$ref",plugin:(e,t,r,n)=>{const s=n.getInstance(),o=r.slice(0,-1);if(kt(o)||Cn(o))return;const{baseDoc:a}=n.getContext(r);if(typeof e!="string")return new Z("$ref: must be a string (JSON-Ref)",{$ref:e,baseDoc:a,fullPath:r});const i=Dt(e),c=i[0],l=i[1]||"";let u;try{u=a||c?Nt(c,a):null}catch(m){return Be(m,{pointer:l,$ref:e,basePath:u,fullPath:r})}let d,f;if(kn(l,u,o,n)&&!s.useCircularStructures){const m=Ve(e,u);return e===m?null:x.replace(r,m)}if(u==null?(f=Qe(l),d=n.get(f),typeof d>"u"&&(d=new Z(`Could not resolve reference: ${e}`,{pointer:l,$ref:e,baseDoc:a,fullPath:r}))):(d=Ut(u,l),d.__value!=null?d=d.__value:d=d.catch(m=>{throw Be(m,{pointer:l,$ref:e,baseDoc:a,fullPath:r})})),d instanceof Error)return[x.remove(r),d];const y=Ve(e,u),p=x.replace(o,d,{$$ref:y});if(u&&u!==a)return[p,x.context(o,{baseDoc:u})];try{if(!Nn(n.state,p)||s.useCircularStructures)return p}catch{return null}}},Ge=Object.assign(En,{docCache:V,absoluteify:Nt,clearCache:Mn,JSONRefError:Z,wrapError:Be,getDoc:zt,split:Dt,extractFromDoc:Ut,fetchJSON:jn,extract:Le,jsonPointerToArray:Qe,unescapeJsonPointerToken:Ft});function Nt(e,t){if(!Rn.test(e)){if(!t)throw new Z(`Tried to resolve a relative URL, without having a basePath. path: '${e}' basePath: '${t}'`);return D(t,e)}return e}function Be(e,t){let r;return e&&e.response&&e.response.body?r=`${e.response.body.code} ${e.response.body.message}`:r=e.message,new Z(`Could not resolve reference: ${r}`,{...t,cause:e})}function Dt(e){return(e+"").split("#")}function Ut(e,t){const r=V[e];if(r&&!x.isPromise(r))try{const n=Le(t,r);return Object.assign(Promise.resolve(n),{__value:n})}catch(n){return Promise.reject(n)}return zt(e).then(n=>Le(t,n))}function Mn(e){typeof e<"u"?delete V[e]:Object.keys(V).forEach(t=>{delete V[t]})}function zt(e){const t=V[e];return t?x.isPromise(t)?t:Promise.resolve(t):(V[e]=Ge.fetchJSON(e).then(r=>(V[e]=r,r)),V[e])}function jn(e){return fetch(e,{headers:{Accept:It},loadSpec:!0}).then(t=>t.text()).then(t=>X.load(t))}function Le(e,t){const r=Qe(e);if(r.length<1)return t;const n=x.getIn(t,r);if(typeof n>"u")throw new Z(`Could not resolve pointer: ${e} does not exist in document`,{pointer:e});return n}function Qe(e){if(typeof e!="string")throw new TypeError(`Expected a string, got a ${typeof e}`);return e[0]==="/"&&(e=e.substr(1)),e===""?[]:e.split("/").map(Ft)}function Ft(e){return typeof e!="string"?e:new URLSearchParams(`=${e.replace(/~1/g,"/").replace(/~0/g,"~")}`).get("")}function Vt(e){return new URLSearchParams([["",e.replace(/~/g,"~0").replace(/\//g,"~1")]]).toString().slice(1)}function In(e){return e.length===0?"":`/${e.map(Vt).join("/")}`}const $n=e=>!e||e==="/"||e==="#";function Ee(e,t){if($n(t))return!0;const r=e.charAt(t.length),n=t.slice(-1);return e.indexOf(t)===0&&(!r||r==="/"||r==="#")&&n!=="#"}function kn(e,t,r,n){let s=dt.get(n);s||(s={},dt.set(n,s));const o=In(r),a=`${t||"<specmap-base>"}#${e}`,i=o.replace(/allOf\/\d+\/?/g,""),c=n.contextTree.get([]).baseDoc;if(t===c&&Ee(i,e))return!0;let l="";if(r.some(d=>(l=`${l}/${Vt(d)}`,s[l]&&s[l].some(f=>Ee(f,a)||Ee(a,f)))))return!0;s[i]=(s[i]||[]).concat(a)}function Nn(e,t){const r=[e];return t.path.reduce((s,o)=>(r.push(s[o]),s[o]),e),n(t.value);function n(s){return x.isObject(s)&&(r.indexOf(s)>=0||Object.keys(s).some(o=>n(s[o])))}}const Dn={key:"allOf",plugin:(e,t,r,n,s)=>{if(s.meta&&s.meta.$$ref)return;const o=r.slice(0,-1);if(kt(o))return;if(!Array.isArray(e)){const l=new TypeError("allOf must be an array");return l.fullPath=r,l}let a=!1,i=s.value;if(o.forEach(l=>{i&&(i=i[l])}),i={...i},Object.keys(i).length===0)return;delete i.allOf;const c=[];return c.push(n.replace(o,{})),e.forEach((l,u)=>{if(!n.isObject(l)){if(a)return null;a=!0;const y=new TypeError("Elements in allOf must be objects");return y.fullPath=r,c.push(y)}c.push(n.mergeDeep(o,l));const d=r.slice(0,-1),f=xn(l,d,{getBaseUrlForNodePath:y=>n.getContext([...r,u,...y]).baseDoc,specmap:n});c.push(...f)}),i.example&&c.push(n.remove([].concat(o,"example"))),c.push(n.mergeDeep(o,i)),i.$$ref||c.push(n.remove([].concat(o,"$$ref"))),c}},Un={key:"parameters",plugin:(e,t,r,n)=>{if(Array.isArray(e)&&e.length){const s=Object.assign([],e),o=r.slice(0,-1),a={...x.getIn(n.spec,o)};for(let i=0;i<e.length;i+=1){const c=e[i];try{s[i].default=n.parameterMacro(a,c)}catch(l){const u=new Error(l);return u.fullPath=r,u}}return x.replace(r,s)}return x.replace(r,e)}},zn={key:"properties",plugin:(e,t,r,n)=>{const s={...e};for(const a in e)try{s[a].default=n.modelPropertyMacro(s[a])}catch(i){const c=new Error(i);return c.fullPath=r,c}return x.replace(r,s)}};class Fn{constructor(t){this.root=Me(t||{})}set(t,r){const n=this.getParent(t,!0);if(!n){he(this.root,r,null);return}const s=t[t.length-1],{children:o}=n;if(o[s]){he(o[s],r,n);return}o[s]=Me(r,n)}get(t){if(t=t||[],t.length<1)return this.root.value;let r=this.root,n,s;for(let o=0;o<t.length&&(s=t[o],n=r.children,!!n[s]);o+=1)r=n[s];return r&&r.protoValue}getParent(t,r){return!t||t.length<1?null:t.length<2?this.root:t.slice(0,-1).reduce((n,s)=>{if(!n)return n;const{children:o}=n;return!o[s]&&r&&(o[s]=Me(null,n)),o[s]},this.root)}}function Me(e,t){return he({children:{}},e,t)}function he(e,t,r){return e.value=t||{},e.protoValue=r?{...r.protoValue,...e.value}:e.value,Object.keys(e.children).forEach(n=>{const s=e.children[n];e.children[n]=he(s,s.value,e)}),e}const pt=100,ht=()=>{};class Vn{static getPluginName(t){return t.pluginName}static getPatchesOfType(t,r){return t.filter(r)}constructor(t){Object.assign(this,{spec:"",debugLevel:"info",plugins:[],pluginHistory:{},errors:[],mutations:[],promisedPatches:[],state:{},patches:[],context:{},contextTree:new Fn,showDebug:!1,allPatches:[],pluginProp:"specMap",libMethods:Object.assign(Object.create(this),x,{getInstance:()=>this}),allowMetaPatches:!1},t),this.get=this._get.bind(this),this.getContext=this._getContext.bind(this),this.hasRun=this._hasRun.bind(this),this.wrappedPlugins=this.plugins.map(this.wrapPlugin.bind(this)).filter(x.isFunction),this.patches.push(x.add([],this.spec)),this.patches.push(x.context([],this.context)),this.updatePatches(this.patches)}debug(t,...r){this.debugLevel===t&&console.log(...r)}verbose(t,...r){this.debugLevel==="verbose"&&console.log(`[${t}]   `,...r)}wrapPlugin(t,r){const{pathDiscriminator:n}=this;let s=null,o;return t[this.pluginProp]?(s=t,o=t[this.pluginProp]):x.isFunction(t)?o=t:x.isObject(t)&&(o=a(t)),Object.assign(o.bind(s),{pluginName:t.name||r,isGenerator:x.isGenerator(o)});function a(i){const c=(l,u)=>Array.isArray(l)?l.every((d,f)=>d===u[f]):!0;return function*(u,d){const f={};for(const[p,m]of u.filter(x.isAdditiveMutation).entries())if(p<$t)yield*y(m.value,m.path,m);else return;function*y(p,m,h){if(!x.isObject(p))i.key===m[m.length-1]&&(yield i.plugin(p,i.key,m,d));else{const P=m.length-1,v=m[P],w=m.indexOf("properties"),E=v==="properties"&&P===w,j=d.allowMetaPatches&&f[p.$$ref];for(const b of Object.keys(p)){const T=p[b],I=m.concat(b),g=x.isObject(T),C=p.$$ref;if(j||g&&(d.allowMetaPatches&&C&&(f[C]=!0),yield*y(T,I,h)),!E&&b===i.key){const O=c(n,m);(!n||O)&&(yield i.plugin(T,b,I,d,h))}}}}}}}nextPlugin(){return this.wrappedPlugins.find(t=>this.getMutationsForPlugin(t).length>0)}nextPromisedPatch(){if(this.promisedPatches.length>0)return Promise.race(this.promisedPatches.map(t=>t.value))}getPluginHistory(t){const r=this.constructor.getPluginName(t);return this.pluginHistory[r]||[]}getPluginRunCount(t){return this.getPluginHistory(t).length}getPluginHistoryTip(t){const r=this.getPluginHistory(t);return r&&r[r.length-1]||{}}getPluginMutationIndex(t){const r=this.getPluginHistoryTip(t).mutationIndex;return typeof r!="number"?-1:r}updatePluginHistory(t,r){const n=this.constructor.getPluginName(t);this.pluginHistory[n]=this.pluginHistory[n]||[],this.pluginHistory[n].push(r)}updatePatches(t){x.normalizeArray(t).forEach(r=>{if(r instanceof Error){this.errors.push(r);return}try{if(!x.isObject(r)){this.debug("updatePatches","Got a non-object patch",r);return}if(this.showDebug&&this.allPatches.push(r),x.isPromise(r.value)){this.promisedPatches.push(r),this.promisedPatchThen(r);return}if(x.isContextPatch(r)){this.setContext(r.path,r.value);return}x.isMutation(r)&&this.updateMutations(r)}catch(n){console.error(n),this.errors.push(n)}})}updateMutations(t){typeof t.value=="object"&&!Array.isArray(t.value)&&this.allowMetaPatches&&(t.value={...t.value});const r=x.applyPatch(this.state,t,{allowMetaPatches:this.allowMetaPatches});r&&(this.mutations.push(t),this.state=r)}removePromisedPatch(t){const r=this.promisedPatches.indexOf(t);if(r<0){this.debug("Tried to remove a promisedPatch that isn't there!");return}this.promisedPatches.splice(r,1)}promisedPatchThen(t){return t.value=t.value.then(r=>{const n={...t,value:r};this.removePromisedPatch(t),this.updatePatches(n)}).catch(r=>{this.removePromisedPatch(t),this.updatePatches(r)}),t.value}getMutations(t,r){return t=t||0,typeof r!="number"&&(r=this.mutations.length),this.mutations.slice(t,r)}getCurrentMutations(){return this.getMutationsForPlugin(this.getCurrentPlugin())}getMutationsForPlugin(t){const r=this.getPluginMutationIndex(t);return this.getMutations(r+1)}getCurrentPlugin(){return this.currentPlugin}getLib(){return this.libMethods}_get(t){return x.getIn(this.state,t)}_getContext(t){return this.contextTree.get(t)}setContext(t,r){return this.contextTree.set(t,r)}_hasRun(t){return this.getPluginRunCount(this.getCurrentPlugin())>(t||0)}dispatch(){const t=this,r=this.nextPlugin();if(!r){const o=this.nextPromisedPatch();if(o)return o.then(()=>this.dispatch()).catch(()=>this.dispatch());const a={spec:this.state,errors:this.errors};return this.showDebug&&(a.patches=this.allPatches),Promise.resolve(a)}if(t.pluginCount=t.pluginCount||new WeakMap,t.pluginCount.set(r,(t.pluginCount.get(r)||0)+1),t.pluginCount[r]>pt)return Promise.resolve({spec:t.state,errors:t.errors.concat(new Error(`We've reached a hard limit of ${pt} plugin runs`))});if(r!==this.currentPlugin&&this.promisedPatches.length){const o=this.promisedPatches.map(a=>a.value);return Promise.all(o.map(a=>a.then(ht,ht))).then(()=>this.dispatch())}return n();function n(){t.currentPlugin=r;const o=t.getCurrentMutations(),a=t.mutations.length-1;try{if(r.isGenerator)for(const i of r(o,t.getLib()))s(i);else{const i=r(o,t.getLib());s(i)}}catch(i){console.error(i),s([Object.assign(Object.create(i),{plugin:r})])}finally{t.updatePluginHistory(r,{mutationIndex:a})}return t.dispatch()}function s(o){o&&(o=x.fullyNormalizeArray(o),t.updatePatches(o,r))}}}function Bn(e){return new Vn(e).dispatch()}const Q={refs:Ge,allOf:Dn,parameters:Un,properties:zn};function Bt(e,t={}){const{requestInterceptor:r,responseInterceptor:n}=t,s=e.withCredentials?"include":"same-origin";return o=>e({url:o,loadSpec:!0,requestInterceptor:r,responseInterceptor:n,headers:{Accept:It},credentials:s}).then(a=>a.body)}function Ye(e,t){return!t&&typeof navigator<"u"&&(t=navigator),t&&t.product==="ReactNative"?!!(e&&typeof e=="object"&&typeof e.uri=="string"):typeof File<"u"&&e instanceof File||typeof Blob<"u"&&e instanceof Blob||ArrayBuffer.isView(e)?!0:e!==null&&typeof e=="object"&&typeof e.pipe=="function"}function Lt(e,t){return Array.isArray(e)&&e.some(r=>Ye(r,t))}class He extends File{constructor(t,r="",n={}){super([t],r,n),this.data=t}valueOf(){return this.data}toString(){return this.valueOf()}}const Ln=e=>":/?#[]@!$&'()*+,;=".indexOf(e)>-1,Hn=e=>/^[a-z0-9\-._~]+$/i.test(e);function Ht(e,t="reserved"){return[...e].map(r=>{if(Hn(r)||Ln(r)&&t==="unsafe")return r;const n=new TextEncoder;return Array.from(n.encode(r)).map(o=>`0${o.toString(16).toUpperCase()}`.slice(-2)).map(o=>`%${o}`).join("")}).join("")}function Xe(e){const{value:t}=e;return Array.isArray(t)?Jn(e):typeof t=="object"?Wn(e):Kn(e)}function $(e,t=!1){return Array.isArray(e)||e!==null&&typeof e=="object"?e=JSON.stringify(e):(typeof e=="number"||typeof e=="boolean")&&(e=String(e)),t&&typeof e=="string"&&e.length>0?Ht(e,t):e??""}function Jn({key:e,value:t,style:r,explode:n,escape:s}){if(r==="simple")return t.map(o=>$(o,s)).join(",");if(r==="label")return`.${t.map(o=>$(o,s)).join(".")}`;if(r==="matrix")return t.map(o=>$(o,s)).reduce((o,a)=>!o||n?`${o||""};${e}=${a}`:`${o},${a}`,"");if(r==="form"){const o=n?`&${e}=`:",";return t.map(a=>$(a,s)).join(o)}if(r==="spaceDelimited"){const o=n?`${e}=`:"";return t.map(a=>$(a,s)).join(` ${o}`)}if(r==="pipeDelimited"){const o=n?`${e}=`:"";return t.map(a=>$(a,s)).join(`|${o}`)}}function Wn({key:e,value:t,style:r,explode:n,escape:s}){const o=Object.keys(t);if(r==="simple")return o.reduce((a,i)=>{const c=$(t[i],s),l=n?"=":",";return`${a?`${a},`:""}${i}${l}${c}`},"");if(r==="label")return o.reduce((a,i)=>{const c=$(t[i],s),l=n?"=":".";return`${a?`${a}.`:"."}${i}${l}${c}`},"");if(r==="matrix"&&n)return o.reduce((a,i)=>{const c=$(t[i],s);return`${a?`${a};`:";"}${i}=${c}`},"");if(r==="matrix")return o.reduce((a,i)=>{const c=$(t[i],s);return`${a?`${a},`:`;${e}=`}${i},${c}`},"");if(r==="form")return o.reduce((a,i)=>{const c=$(t[i],s);return`${a?`${a}${n?"&":","}`:""}${i}${n?"=":","}${c}`},"")}function Kn({key:e,value:t,style:r,escape:n}){if(r==="simple")return $(t,n);if(r==="label")return`.${$(t,n)}`;if(r==="matrix")return`;${e}=${$(t,n)}`;if(r==="form"||r==="deepObject")return $(t,n)}const Gn={form:",",spaceDelimited:"%20",pipeDelimited:"|"},Qn={csv:",",ssv:"%20",tsv:"%09",pipes:"|"};function Jt(e,t,r=!1){const{collectionFormat:n,allowEmptyValue:s,serializationOption:o,encoding:a}=t,i=typeof t=="object"&&!Array.isArray(t)?t.value:t,c=r?u=>u.toString():u=>encodeURIComponent(u),l=c(e);if(typeof i>"u"&&s)return[[l,""]];if(Ye(i)||Lt(i))return[[l,i]];if(o)return yt(e,i,r,o);if(a){if([typeof a.style,typeof a.explode,typeof a.allowReserved].some(u=>u!=="undefined")){const{style:u,explode:d,allowReserved:f}=a;return yt(e,i,r,{style:u,explode:d,allowReserved:f})}if(typeof a.contentType=="string"){if(a.contentType.startsWith("application/json")){const f=typeof i=="string"?i:JSON.stringify(i),y=c(f),p=new He(y,"blob",{type:a.contentType});return[[l,p]]}const u=c(String(i)),d=new He(u,"blob",{type:a.contentType});return[[l,d]]}return typeof i!="object"?[[l,c(i)]]:Array.isArray(i)&&i.every(u=>typeof u!="object")?[[l,i.map(c).join(",")]]:[[l,c(JSON.stringify(i))]]}return typeof i!="object"?[[l,c(i)]]:Array.isArray(i)?n==="multi"?[[l,i.map(c)]]:[[l,i.map(c).join(Qn[n||"csv"])]]:[[l,""]]}function yt(e,t,r,n){const s=n.style||"form",o=typeof n.explode>"u"?s==="form":n.explode,a=r?!1:n&&n.allowReserved?"unsafe":"reserved",i=l=>$(l,a),c=r?l=>l:l=>i(l);return typeof t!="object"?[[c(e),i(t)]]:Array.isArray(t)?o?[[c(e),t.map(i)]]:[[c(e),t.map(i).join(Gn[s])]]:s==="deepObject"?Object.keys(t).map(l=>[c(`${e}[${l}]`),i(t[l])]):o?Object.keys(t).map(l=>[c(l),i(t[l])]):[[c(e),Object.keys(t).map(l=>[`${c(l)},${i(t[l])}`]).join(",")]]}function Yn(e){return Object.entries(e).reduce((t,[r,n])=>{for(const[s,o]of Jt(r,n,!0))if(Array.isArray(o))for(const a of o)if(ArrayBuffer.isView(a)){const i=new Blob([a]);t.append(s,i)}else t.append(s,a);else if(ArrayBuffer.isView(o)){const a=new Blob([o]);t.append(s,a)}else t.append(s,o);return t},new FormData)}const Xn=(e,{encode:t=!0}={})=>{const r=(o,a,i)=>(Array.isArray(i)?i.reduce((c,l)=>r(o,a,l),o):i instanceof Date?o.append(a,i.toISOString()):typeof i=="object"?Object.entries(i).reduce((c,[l,u])=>r(o,`${a}[${l}]`,u),o):o.append(a,i),o),n=Object.entries(e).reduce((o,[a,i])=>r(o,a,i),new URLSearchParams),s=String(n);return t?s:decodeURIComponent(s)};function mt(e){const t=Object.keys(e).reduce((r,n)=>{for(const[s,o]of Jt(n,e[n]))o instanceof He?r[s]=o.valueOf():r[s]=o;return r},{});return Xn(t,{encode:!1})}function Ze(e={}){const{url:t="",query:r,form:n}=e,s=(...o)=>{const a=o.filter(i=>i).join("&");return a?`?${a}`:""};if(n){const o=Object.keys(n).some(i=>{const{value:c}=n[i];return Ye(c)||Lt(c)}),a=e.headers["content-type"]||e.headers["Content-Type"];if(o||/multipart\/form-data/i.test(a)){const i=Yn(e.form);e.formdata=i,e.body=i}else e.body=mt(n);delete e.form}if(r){const[o,a]=t.split("?");let i="";if(a){const l=new URLSearchParams(a);Object.keys(r).forEach(d=>l.delete(d)),i=String(l)}const c=s(i,mt(r));e.url=o+c,delete e.query}return e}const Zn=(e="")=>/(json|xml|yaml|text)\b/.test(e);function _n(e,t){return t&&(t.indexOf("application/json")===0||t.indexOf("+json")>0)?JSON.parse(e):X.load(e)}function qn(e){return e.includes(", ")?e.split(", "):e}function es(e={}){return typeof e.entries!="function"?{}:Array.from(e.entries()).reduce((t,[r,n])=>(t[r]=qn(n),t),{})}function ts(e,t,{loadSpec:r=!1}={}){const n={ok:e.ok,url:e.url||t,status:e.status,statusText:e.statusText,headers:es(e.headers)},s=n.headers["content-type"],o=r||Zn(s);return(o?e.text:e.blob||e.buffer).call(e).then(i=>{if(n.text=i,n.data=i,o)try{const c=_n(i,s);n.body=c,n.obj=c}catch(c){n.parseError=c}return n})}async function ye(e,t={}){typeof e=="object"&&(t=e,e=t.url),t.headers=t.headers||{},t=Ze(t),t.headers&&Object.keys(t.headers).forEach(s=>{const o=t.headers[s];typeof o=="string"&&(t.headers[s]=o.replace(/\n+/g," "))}),t.requestInterceptor&&(t=await t.requestInterceptor(t)||t);const r=t.headers["content-type"]||t.headers["Content-Type"];/multipart\/form-data/i.test(r)&&(delete t.headers["content-type"],delete t.headers["Content-Type"]);let n;try{n=await(t.userFetch||fetch)(t.url,t),n=await ts(n,e,t),t.responseInterceptor&&(n=await t.responseInterceptor(n)||n)}catch(s){if(!n)throw s;const o=new Error(n.statusText||`response status is ${n.status}`);throw o.status=n.status,o.statusCode=n.status,o.responseError=s,o}if(!n.ok){const s=new Error(n.statusText||`response status is ${n.status}`);throw s.status=n.status,s.statusCode=n.status,s.response=n,s}return n}function Oo(e,t,r){return r=r||(n=>n),t=t||(n=>n),n=>(typeof n=="string"&&(n={url:n}),n=Ze(n),n=t(n),r(e(n)))}const _e=e=>{var t,r;const{baseDoc:n,url:s}=e,o=(t=n??s)!==null&&t!==void 0?t:"";return typeof((r=globalThis.document)===null||r===void 0?void 0:r.baseURI)=="string"?String(new URL(o,globalThis.document.baseURI)):o},Wt=e=>{const{fetch:t,http:r}=e;return t||r||ye};async function qe(e){const{spec:t,mode:r,allowMetaPatches:n=!0,pathDiscriminator:s,modelPropertyMacro:o,parameterMacro:a,requestInterceptor:i,responseInterceptor:c,skipNormalization:l=!1,useCircularStructures:u,strategies:d}=e,f=_e(e),y=Wt(e),p=d.find(h=>h.match(t));return m(t);async function m(h){f&&(Q.refs.docCache[f]=h),Q.refs.fetchJSON=Bt(y,{requestInterceptor:i,responseInterceptor:c});const P=[Q.refs];typeof a=="function"&&P.push(Q.parameters),typeof o=="function"&&P.push(Q.properties),r!=="strict"&&P.push(Q.allOf);const v=await Bn({spec:h,context:{baseDoc:f},plugins:P,allowMetaPatches:n,pathDiscriminator:s,parameterMacro:a,modelPropertyMacro:o,useCircularStructures:u});return l||(v.spec=p.normalize(v.spec)),v}}const Kt=e=>e.replace(/\W/gi,"_");function rs(e,t,{v2OperationIdCompatibilityMode:r}={}){if(r){let n=`${t.toLowerCase()}_${e}`.replace(/[\s!@#$%^&*()_+=[{\]};:<>|./?,\\'""-]/g,"_");return n=n||`${e.substring(1)}_${t}`,n.replace(/((_){2,})/g,"_").replace(/^(_)*/g,"").replace(/([_])*$/g,"")}return`${t.toLowerCase()}${Kt(e)}`}function et(e,t,r="",{v2OperationIdCompatibilityMode:n}={}){return!e||typeof e!="object"?null:(e.operationId||"").replace(/\s/g,"").length?Kt(e.operationId):rs(t,r,{v2OperationIdCompatibilityMode:n})}function tt(e){const{spec:t}=e,{paths:r}=t,n={};if(!r||t.$$normalized)return e;for(const s in r){const o=r[s];if(o==null||!["object","function"].includes(typeof o))continue;const a=o.parameters;for(const i in o){const c=o[i];if(c==null||!["object","function"].includes(typeof c))continue;const l=et(c,s,i);if(l){n[l]?n[l].push(c):n[l]=[c];const u=n[l];if(u.length>1)u.forEach((d,f)=>{d.__originalOperationId=d.__originalOperationId||d.operationId,d.operationId=`${l}${f+1}`});else if(typeof c.operationId<"u"){const d=u[0];d.__originalOperationId=d.__originalOperationId||c.operationId,d.operationId=l}}if(i!=="parameters"){const u=[],d={};for(const f in t)(f==="produces"||f==="consumes"||f==="security")&&(d[f]=t[f],u.push(d));if(a&&(d.parameters=a,u.push(d)),u.length){for(const f of u)for(const y in f)if(!c[y])c[y]=f[y];else if(y==="parameters")for(const p of f[y])c[y].some(h=>h.name&&h.name===p.name||h.$ref&&h.$ref===p.$ref||h.$$ref&&h.$$ref===p.$$ref||h===p)||c[y].push(p)}}}}return t.$$normalized=!0,e}const ns={name:"generic",match(){return!0},normalize(e){const{spec:t}=tt({spec:e});return t},async resolve(e){return qe(e)}};async function ss(e){return qe(e)}const os=e=>{try{const{swagger:t}=e;return t==="2.0"}catch{return!1}},Gt=e=>{try{const{openapi:t}=e;return typeof t=="string"&&/^3\.0\.(?:[1-9]\d*|0)$/.test(t)}catch{return!1}},rt=e=>{try{const{openapi:t}=e;return typeof t=="string"&&/^3\.1\.(?:[1-9]\d*|0)$/.test(t)}catch{return!1}},Qt=e=>Gt(e)||rt(e),is={name:"openapi-2",match(e){return os(e)},normalize(e){const{spec:t}=tt({spec:e});return t},async resolve(e){return ss(e)}};async function as(e){return qe(e)}const cs={name:"openapi-3-0",match(e){return Gt(e)},normalize(e){const{spec:t}=tt({spec:e});return t},async resolve(e){return as(e)}},{AbortController:ls,AbortSignal:us}=globalThis;typeof globalThis.AbortController>"u"&&(globalThis.AbortController=ls);typeof globalThis.AbortSignal>"u"&&(globalThis.AbortSignal=us);class fs extends qt{constructor({swaggerHTTPClient:r=ye,swaggerHTTPClientConfig:n={},...s}={}){super({...s,name:"http-swagger-client"});M(this,"swaggerHTTPClient",ye);M(this,"swaggerHTTPClientConfig");this.swaggerHTTPClient=r,this.swaggerHTTPClientConfig=n}getHttpClient(){return this.swaggerHTTPClient}async read(r){const n=this.getHttpClient(),s=new AbortController,{signal:o}=s,a=setTimeout(()=>{s.abort()},this.timeout),i=this.getHttpClient().withCredentials||this.withCredentials?"include":"same-origin",c=this.redirects===0?"error":"follow",l=this.redirects>0?this.redirects:void 0;try{return(await n({url:r.uri,signal:o,userFetch:async(d,f)=>{let y=await fetch(d,f);try{y.headers.delete("Content-Type")}catch{y=new Response(y.body,{...y,headers:new Headers(y.headers)}),y.headers.delete("Content-Type")}return y},credentials:i,redirect:c,follow:l,...this.swaggerHTTPClientConfig})).text.arrayBuffer()}catch(u){throw new er(`Error downloading "${r.uri}"`,{cause:u})}finally{clearTimeout(a)}}}class ds extends ge{constructor(t={}){super({name:"json-swagger-client",mediaTypes:["application/json"],...t})}async canParse(t){const r=this.fileExtensions.length===0?!0:this.fileExtensions.includes(t.extension),n=this.mediaTypes.includes(t.mediaType);if(!r)return!1;if(n)return!0;if(!n)try{return JSON.parse(t.toString()),!0}catch{return!1}return!1}async parse(t){if(this.sourceMap)throw new L("json-swagger-client parser plugin doesn't support sourceMaps option");const r=new se,n=t.toString();if(this.allowEmpty&&n.trim()==="")return r;try{const s=vt(JSON.parse(n));return s.classes.push("result"),r.push(s),r}catch(s){throw new L(`Error parsing "${t.uri}"`,{cause:s})}}}class ps extends ge{constructor(t={}){super({name:"yaml-1-2-swagger-client",mediaTypes:["text/yaml","application/yaml"],...t})}async canParse(t){const r=this.fileExtensions.length===0?!0:this.fileExtensions.includes(t.extension),n=this.mediaTypes.includes(t.mediaType);if(!r)return!1;if(n)return!0;if(!n)try{return X.load(t.toString(),{schema:De}),!0}catch{return!1}return!1}async parse(t){if(this.sourceMap)throw new L("yaml-1-2-swagger-client parser plugin doesn't support sourceMaps option");const r=new se,n=t.toString();try{const s=X.load(n,{schema:De});if(this.allowEmpty&&typeof s>"u")return r;const o=vt(s);return o.classes.push("result"),r.push(o),r}catch(s){throw new L(`Error parsing "${t.uri}"`,{cause:s})}}}class hs extends ge{constructor(r={}){super({name:"openapi-json-3-1-swagger-client",mediaTypes:new Ot(...re.filterByFormat("generic"),...re.filterByFormat("json")),...r});M(this,"detectionRegExp",/"openapi"\s*:\s*"(?<version_json>3\.1\.(?:[1-9]\d*|0))"/)}async canParse(r){const n=this.fileExtensions.length===0?!0:this.fileExtensions.includes(r.extension),s=this.mediaTypes.includes(r.mediaType);if(!n)return!1;if(s)return!0;if(!s)try{const o=r.toString();return JSON.parse(o),this.detectionRegExp.test(o)}catch{return!1}return!1}async parse(r){if(this.sourceMap)throw new L("openapi-json-3-1-swagger-client parser plugin doesn't support sourceMaps option");const n=new se,s=r.toString();if(this.allowEmpty&&s.trim()==="")return n;try{const o=JSON.parse(s),a=we.refract(o,this.refractorOpts);return a.classes.push("result"),n.push(a),n}catch(o){throw new L(`Error parsing "${r.uri}"`,{cause:o})}}}class ys extends ge{constructor(r={}){super({name:"openapi-yaml-3-1-swagger-client",mediaTypes:new Ot(...re.filterByFormat("generic"),...re.filterByFormat("yaml")),...r});M(this,"detectionRegExp",/(?<YAML>^(["']?)openapi\2\s*:\s*(["']?)(?<version_yaml>3\.1\.(?:[1-9]\d*|0))\3(?:\s+|$))|(?<JSON>"openapi"\s*:\s*"(?<version_json>3\.1\.(?:[1-9]\d*|0))")/m)}async canParse(r){const n=this.fileExtensions.length===0?!0:this.fileExtensions.includes(r.extension),s=this.mediaTypes.includes(r.mediaType);if(!n)return!1;if(s)return!0;if(!s)try{const o=r.toString();return X.load(o),this.detectionRegExp.test(o)}catch{return!1}return!1}async parse(r){if(this.sourceMap)throw new L("openapi-yaml-3-1-swagger-client parser plugin doesn't support sourceMaps option");const n=new se,s=r.toString();try{const o=X.load(s,{schema:De});if(this.allowEmpty&&typeof o>"u")return n;const a=we.refract(o,this.refractorOpts);return a.classes.push("result"),n.push(a),n}catch(o){throw new L(`Error parsing "${r.uri}"`,{cause:o})}}}const ms=e=>e.slice(2),U=e=>{const t=ms(e);return t.reduce((r,n,s)=>{if(At(n)){const o=String(S(n.key));r.push(o)}else if(St(t[s-2])){const o=t[s-2].content.indexOf(n);r.push(o)}return r},[])};class gs{constructor({modelPropertyMacro:t,options:r}){M(this,"modelPropertyMacro");M(this,"options");M(this,"SchemaElement",{leave:(t,r,n,s,o)=>{typeof t.properties>"u"||ne(t.properties)&&t.properties.forEach(a=>{if(ne(a))try{const l=this.modelPropertyMacro(S(a));a.set("default",l)}catch(l){var i,c;const u=new Error(l,{cause:l});u.fullPath=[...U([...o,n,t]),"properties"],(i=this.options.dereference.dereferenceOpts)===null||i===void 0||(i=i.errors)===null||i===void 0||(c=i.push)===null||c===void 0||c.call(i,u)}})}});this.modelPropertyMacro=t,this.options=r}}class ws{constructor({options:t}){M(this,"options");M(this,"SchemaElement",{leave(t,r,n,s,o){if(typeof t.allOf>"u")return;if(!St(t.allOf)){var a,i;const d=new TypeError("allOf must be an array");d.fullPath=[...U([...o,n,t]),"allOf"],(a=this.options.dereference.dereferenceOpts)===null||a===void 0||(a=a.errors)===null||a===void 0||(i=a.push)===null||i===void 0||i.call(a,d);return}if(t.allOf.isEmpty){t.remove("allOf");return}if(!t.allOf.content.every(ke)){var l,u;const d=new TypeError("Elements in allOf must be objects");d.fullPath=[...U([...o,n,t]),"allOf"],(l=this.options.dereference.dereferenceOpts)===null||l===void 0||(l=l.errors)===null||l===void 0||(u=l.push)===null||u===void 0||u.call(l,d);return}for(;t.hasKey("allOf");){const{allOf:d}=t;t.remove("allOf");const f=tr.all([...d.content,t]);if(t.hasKey("$$ref")||f.remove("$$ref"),t.hasKey("example")){const y=f.getMember("example");y&&(y.value=t.get("example"))}if(t.hasKey("examples")){const y=f.getMember("examples");y&&(y.value=t.get("examples"))}t.content=f.content}}});this.options=t}}var J;class bs{constructor({parameterMacro:t,options:r}){M(this,"parameterMacro");M(this,"options");st(this,J,void 0);M(this,"OperationElement",{enter:t=>{xe(this,J,t)},leave:()=>{xe(this,J,void 0)}});M(this,"ParameterElement",{leave:(t,r,n,s,o)=>{const a=Se(this,J)?S(Se(this,J)):null,i=S(t);try{const u=this.parameterMacro(a,i);t.set("default",u)}catch(u){var c,l;const d=new Error(u,{cause:u});d.fullPath=U([...o,n]),(c=this.options.dereference.dereferenceOpts)===null||c===void 0||(c=c.errors)===null||c===void 0||(l=c.push)===null||l===void 0||l.call(c,d)}}});this.parameterMacro=t,this.options=r}}J=new WeakMap;const ce=e=>{if(e.cause==null)return e;let{cause:t}=e;for(;t.cause!=null;)t=t.cause;return t};class Ps extends Ke{}const{wrapError:je}=Ge,Ie=xt[Symbol.for("nodejs.util.promisify.custom")],k=new rr,H=(e,t,r,n)=>{At(n)?n.value=e:Array.isArray(n)&&(n[r]=e)};class te extends nr{constructor({allowMetaPatches:r=!0,useCircularStructures:n=!1,basePath:s=null,...o}){super(o);M(this,"useCircularStructures");M(this,"allowMetaPatches");M(this,"basePath");this.allowMetaPatches=r,this.useCircularStructures=n,this.basePath=s}async ReferenceElement(r,n,s,o,a,i){try{if(this.indirections.includes(r))return!1;const[p,m]=this.toAncestorLineage([...a,s]),h=this.toBaseURI(S(r.$ref)),P=F(this.reference.uri)===h,v=!P;if(!this.options.resolve.internal&&P||!this.options.resolve.external&&v)return!1;const w=await this.toReference(S(r.$ref)),E=D(h,S(r.$ref));this.indirections.push(r);const j=K(E);let b=q(j,w.value.result);if(b.id=k.identify(b),ot(b)){const C=S(r.meta.get("referenced-element")),O=`${C}-${S(k.identify(b))}`;this.refractCache.has(O)?b=this.refractCache.get(O):sr(b)?(b=or.refract(b),b.setMetaProperty("referenced-element",C),this.refractCache.set(O,b)):(b=this.namespace.getElementClass(C).refract(b),this.refractCache.set(O,b))}if(r===b)throw new G("Recursive Reference Object detected");if(this.indirections.length>this.options.dereference.maxDepth)throw new Re(`Maximum dereference depth of "${this.options.dereference.maxDepth}" has been exceeded in file "${this.reference.uri}"`);if(p.includes(b)){if(w.refSet.circular=!0,this.options.dereference.circular==="error")throw new G("Circular reference detected");if(this.options.dereference.circular==="replace"){var c,l;const C=new Te(b.id,{type:"reference",uri:w.uri,$ref:S(r.$ref),baseURI:E,referencingElement:r}),A=((c=(l=this.options.dereference.strategyOpts["openapi-3-1"])===null||l===void 0?void 0:l.circularReplacer)!==null&&c!==void 0?c:this.options.dereference.circularReplacer)(C);return i.replaceWith(C,H),s?!1:A}}const T=F(w.refSet.rootRef.uri)!==w.uri,I=["error","replace"].includes(this.options.dereference.circular);if((v||T||ir(b)||I)&&!p.includesCycle(b)){var u;m.add(r);const C=new te({reference:w,namespace:this.namespace,indirections:[...this.indirections],options:this.options,refractCache:this.refractCache,ancestors:p,allowMetaPatches:this.allowMetaPatches,useCircularStructures:this.useCircularStructures,basePath:(u=this.basePath)!==null&&u!==void 0?u:[...U([...a,s,r]),"$ref"]});b=await Ie(b,C,{keyMap:ee,nodeTypeGetter:Y}),m.delete(r)}this.indirections.pop();const g=ar(b);if(g.setMetaProperty("ref-fields",{$ref:S(r.$ref),description:S(r.description),summary:S(r.summary)}),g.setMetaProperty("ref-origin",w.uri),g.setMetaProperty("ref-referencing-element-id",N(k.identify(r))),ne(b)&&(r.hasKey("description")&&"description"in b&&(g.remove("description"),g.set("description",r.get("description"))),r.hasKey("summary")&&"summary"in b&&(g.remove("summary"),g.set("summary",r.get("summary")))),this.allowMetaPatches&&ne(g)&&!g.hasKey("$$ref")){const C=D(h,E);g.set("$$ref",C)}return i.replaceWith(g,H),s?!1:g}catch(p){var d,f,y;const m=ce(p),h=je(m,{baseDoc:this.reference.uri,$ref:S(r.$ref),pointer:K(S(r.$ref)),fullPath:(d=this.basePath)!==null&&d!==void 0?d:[...U([...a,s,r]),"$ref"]});(f=this.options.dereference.dereferenceOpts)===null||f===void 0||(f=f.errors)===null||f===void 0||(y=f.push)===null||y===void 0||y.call(f,h);return}}async PathItemElement(r,n,s,o,a,i){try{if(!ie(r.$ref))return;if(this.indirections.includes(r)||cr(["cycle"],r.$ref))return!1;const[p,m]=this.toAncestorLineage([...a,s]),h=this.toBaseURI(S(r.$ref)),P=F(this.reference.uri)===h,v=!P;if(!this.options.resolve.internal&&P||!this.options.resolve.external&&v)return;const w=await this.toReference(S(r.$ref)),E=D(h,S(r.$ref));this.indirections.push(r);const j=K(E);let b=q(j,w.value.result);if(b.id=k.identify(b),ot(b)){const g=`path-item-${S(k.identify(b))}`;this.refractCache.has(g)?b=this.refractCache.get(g):(b=it.refract(b),this.refractCache.set(g,b))}if(r===b)throw new G("Recursive Path Item Object reference detected");if(this.indirections.length>this.options.dereference.maxDepth)throw new Re(`Maximum dereference depth of "${this.options.dereference.maxDepth}" has been exceeded in file "${this.reference.uri}"`);if(p.includes(b)){if(w.refSet.circular=!0,this.options.dereference.circular==="error")throw new G("Circular reference detected");if(this.options.dereference.circular==="replace"){var c,l;const g=new Te(b.id,{type:"path-item",uri:w.uri,$ref:S(r.$ref),baseURI:E,referencingElement:r}),O=((c=(l=this.options.dereference.strategyOpts["openapi-3-1"])===null||l===void 0?void 0:l.circularReplacer)!==null&&c!==void 0?c:this.options.dereference.circularReplacer)(g);return i.replaceWith(g,H),s?!1:O}}const T=F(w.refSet.rootRef.uri)!==w.uri,I=["error","replace"].includes(this.options.dereference.circular);if((v||T||at(b)&&ie(b.$ref)||I)&&!p.includesCycle(b)){var u;m.add(r);const g=new te({reference:w,namespace:this.namespace,indirections:[...this.indirections],options:this.options,ancestors:p,allowMetaPatches:this.allowMetaPatches,useCircularStructures:this.useCircularStructures,basePath:(u=this.basePath)!==null&&u!==void 0?u:[...U([...a,s,r]),"$ref"]});b=await Ie(b,g,{keyMap:ee,nodeTypeGetter:Y}),m.delete(r)}if(this.indirections.pop(),at(b)){const g=new it([...b.content],N(b.meta),N(b.attributes));if(r.forEach((C,O,A)=>{g.remove(S(O)),g.content.push(A)}),g.remove("$ref"),g.setMetaProperty("ref-fields",{$ref:S(r.$ref)}),g.setMetaProperty("ref-origin",w.uri),g.setMetaProperty("ref-referencing-element-id",N(k.identify(r))),this.allowMetaPatches&&typeof g.get("$$ref")>"u"){const C=D(h,E);g.set("$$ref",C)}b=g}return i.replaceWith(b,H),s?void 0:b}catch(p){var d,f,y;const m=ce(p),h=je(m,{baseDoc:this.reference.uri,$ref:S(r.$ref),pointer:K(S(r.$ref)),fullPath:(d=this.basePath)!==null&&d!==void 0?d:[...U([...a,s,r]),"$ref"]});(f=this.options.dereference.dereferenceOpts)===null||f===void 0||(f=f.errors)===null||f===void 0||(y=f.push)===null||y===void 0||y.call(f,h);return}}async SchemaElement(r,n,s,o,a,i){try{if(!ie(r.$ref))return;if(this.indirections.includes(r))return!1;const[p,m]=this.toAncestorLineage([...a,s]);let h=await this.toReference(ae(this.reference.uri)),{uri:P}=h;const v=lr(P,r),w=F(v),E=new ur({uri:w}),j=!this.options.resolve.resolvers.some(A=>A.canRead(E)),b=!j;let T=F(this.reference.uri)===v,I=!T;this.indirections.push(r);let g;try{if(j||b){P=this.toBaseURI(v);const A=v,R=B(h.value.result);if(g=fr(A,R),g=B(g),g.id=k.identify(g),!this.options.resolve.internal&&T||!this.options.resolve.external&&I)return}else{if(P=this.toBaseURI(v),T=F(this.reference.uri)===P,I=!T,!this.options.resolve.internal&&T||!this.options.resolve.external&&I)return;h=await this.toReference(ae(v));const A=K(v),R=B(h.value.result);g=q(A,R),g=B(g),g.id=k.identify(g)}}catch(A){if(b&&A instanceof dr)if(pr(ct(v))){if(T=F(this.reference.uri)===P,I=!T,!this.options.resolve.internal&&T||!this.options.resolve.external&&I)return;h=await this.toReference(ae(v));const R=ct(v),z=B(h.value.result);g=hr(R,z),g=B(g),g.id=k.identify(g)}else{if(P=this.toBaseURI(S(v)),T=F(this.reference.uri)===P,I=!T,!this.options.resolve.internal&&T||!this.options.resolve.external&&I)return;h=await this.toReference(ae(v));const R=K(v),z=B(h.value.result);g=q(R,z),g=B(g),g.id=k.identify(g)}else throw A}if(r===g)throw new G("Recursive Schema Object reference detected");if(this.indirections.length>this.options.dereference.maxDepth)throw new Re(`Maximum dereference depth of "${this.options.dereference.maxDepth}" has been exceeded in file "${this.reference.uri}"`);if(p.includes(g)){if(h.refSet.circular=!0,this.options.dereference.circular==="error")throw new G("Circular reference detected");if(this.options.dereference.circular==="replace"){var c,l;const A=new Te(g.id,{type:"json-schema",uri:h.uri,$ref:S(r.$ref),baseURI:D(P,v),referencingElement:r}),z=((c=(l=this.options.dereference.strategyOpts["openapi-3-1"])===null||l===void 0?void 0:l.circularReplacer)!==null&&c!==void 0?c:this.options.dereference.circularReplacer)(A);return i.replaceWith(z,H),s?!1:z}}const C=F(h.refSet.rootRef.uri)!==h.uri,O=["error","replace"].includes(this.options.dereference.circular);if((I||C||ke(g)&&ie(g.$ref)||O)&&!p.includesCycle(g)){var u;m.add(r);const A=new te({reference:h,namespace:this.namespace,indirections:[...this.indirections],options:this.options,useCircularStructures:this.useCircularStructures,allowMetaPatches:this.allowMetaPatches,ancestors:p,basePath:(u=this.basePath)!==null&&u!==void 0?u:[...U([...a,s,r]),"$ref"]});g=await Ie(g,A,{keyMap:ee,nodeTypeGetter:Y}),m.delete(r)}if(this.indirections.pop(),yr(g)){const A=N(g);return A.setMetaProperty("ref-fields",{$ref:S(r.$ref)}),A.setMetaProperty("ref-origin",h.uri),A.setMetaProperty("ref-referencing-element-id",N(k.identify(r))),i.replaceWith(A,H),s?!1:A}if(ke(g)){const A=new mr([...g.content],N(g.meta),N(g.attributes));if(r.forEach((R,z,Ae)=>{A.remove(S(z)),A.content.push(Ae)}),A.remove("$ref"),A.setMetaProperty("ref-fields",{$ref:S(r.$ref)}),A.setMetaProperty("ref-origin",h.uri),A.setMetaProperty("ref-referencing-element-id",N(k.identify(r))),this.allowMetaPatches&&typeof A.get("$$ref")>"u"){const R=D(P,v);A.set("$$ref",R)}g=A}return i.replaceWith(g,H),s?void 0:g}catch(p){var d,f,y;const m=ce(p),h=new Ps(`Could not resolve reference: ${m.message}`,{baseDoc:this.reference.uri,$ref:S(r.$ref),fullPath:(d=this.basePath)!==null&&d!==void 0?d:[...U([...a,s,r]),"$ref"],cause:m});(f=this.options.dereference.dereferenceOpts)===null||f===void 0||(f=f.errors)===null||f===void 0||(y=f.push)===null||y===void 0||y.call(f,h);return}}async LinkElement(){}async ExampleElement(r,n,s,o,a,i){try{return await super.ExampleElement(r,n,s,o,a,i)}catch(d){var c,l,u;const f=ce(d),y=je(f,{baseDoc:this.reference.uri,externalValue:S(r.externalValue),fullPath:(c=this.basePath)!==null&&c!==void 0?c:[...U([...a,s,r]),"externalValue"]});(l=this.options.dereference.dereferenceOpts)===null||l===void 0||(l=l.errors)===null||l===void 0||(u=l.push)===null||u===void 0||u.call(l,y);return}}}const vs=gr[Symbol.for("nodejs.util.promisify.custom")];class Os{constructor({parameterMacro:t,modelPropertyMacro:r,mode:n,options:s,...o}){const a=[];a.push(new te({...o,options:s})),typeof r=="function"&&a.push(new gs({modelPropertyMacro:r,options:s})),n!=="strict"&&a.push(new ws({options:s})),typeof t=="function"&&a.push(new bs({parameterMacro:t,options:s}));const i=vs(a,{nodeTypeGetter:Y});Object.assign(this,i)}}const As=xt[Symbol.for("nodejs.util.promisify.custom")];class Ss extends wr{constructor({allowMetaPatches:r=!1,parameterMacro:n=null,modelPropertyMacro:s=null,mode:o="non-strict",ancestors:a=[],...i}={}){super({...i});M(this,"allowMetaPatches");M(this,"parameterMacro");M(this,"modelPropertyMacro");M(this,"mode");M(this,"ancestors");this.name="openapi-3-1-swagger-client",this.allowMetaPatches=r,this.parameterMacro=n,this.modelPropertyMacro=s,this.mode=o,this.ancestors=[...a]}async dereference(r,n){var s;const o=br(Pr),a=(s=n.dereference.refSet)!==null&&s!==void 0?s:new Ne,i=new Ne;let c=a,l;a.has(r.uri)?l=a.find(f=>f.uri===r.uri):(l=new le({uri:r.uri,value:r.parseResult}),a.add(l)),n.dereference.immutable&&(a.refs.map(f=>new le({...f,value:N(f.value)})).forEach(f=>i.add(f)),l=i.find(f=>f.uri===r.uri),c=i);const u=new Os({reference:l,namespace:o,options:n,allowMetaPatches:this.allowMetaPatches,ancestors:this.ancestors,modelPropertyMacro:this.modelPropertyMacro,mode:this.mode,parameterMacro:this.parameterMacro}),d=await As(c.rootRef.value,u,{keyMap:ee,nodeTypeGetter:Y});return n.dereference.immutable&&i.refs.filter(f=>f.uri.startsWith("immutable://")).map(f=>new le({...f,uri:f.uri.replace(/^immutable:\/\//,"")})).forEach(f=>a.add(f)),n.dereference.refSet===null&&a.clean(),i.clean(),d}}const xs=e=>{const t=S(e.meta.get("baseURI")),r=e.meta.get("referencingElement");return new Dr({$ref:t},N(r.meta),N(r.attributes))},ve=async e=>{const{spec:t,timeout:r,redirects:n,requestInterceptor:s,responseInterceptor:o,pathDiscriminator:a=[],allowMetaPatches:i=!1,useCircularStructures:c=!1,skipNormalization:l=!1,parameterMacro:u=null,modelPropertyMacro:d=null,mode:f="non-strict",strategies:y}=e;try{const{cache:p}=ve,m=y.find(Ae=>Ae.match(t)),h=Pt(lt())?lt():pe,P=_e(e),v=D(h,P);let w;p.has(t)?w=p.get(t):(w=we.refract(t),w.classes.push("result"),p.set(t,w));const E=new se([w]),j=vr(a),b=j===""?"":`#${j}`,T=q(j,w),I=new le({uri:v,value:E}),g=new Ne({refs:[I]});j!==""&&(g.rootRef=void 0);const C=[new Set([T])],O=[],A=await Or(T,{resolve:{baseURI:`${v}${b}`,resolvers:[new fs({timeout:r||1e4,redirects:n||10})],resolverOpts:{swaggerHTTPClientConfig:{requestInterceptor:s,responseInterceptor:o}},strategies:[new Ar]},parse:{mediaType:re.latest(),parsers:[new hs({allowEmpty:!1,sourceMap:!1}),new ys({allowEmpty:!1,sourceMap:!1}),new ds({allowEmpty:!1,sourceMap:!1}),new ps({allowEmpty:!1,sourceMap:!1}),new Sr({allowEmpty:!1,sourceMap:!1})]},dereference:{maxDepth:100,strategies:[new Ss({allowMetaPatches:i,useCircularStructures:c,parameterMacro:u,modelPropertyMacro:d,mode:f,ancestors:C})],refSet:g,dereferenceOpts:{errors:O},immutable:!1,circular:c?"ignore":"replace",circularReplacer:c?xr.dereference.circularReplacer:xs}}),R=Rr(T,A,w),z=l?R:m.normalize(R);return{spec:S(z),errors:O}}catch(p){if(p instanceof Tr||p instanceof Cr)return{spec:t,errors:[]};throw p}};ve.cache=new WeakMap;const gt=e=>{if(!ne(e))return e;const t=[Er({operationIdNormalizer:(n,s,o)=>et({operationId:n},s,o,{v2OperationIdCompatibilityMode:!1})}),Mr(),jr(),Ir(),$r()];return kr(e,t,{toolboxCreator:Nr,visitorOptions:{keyMap:ee,nodeTypeGetter:Y}})},Rs=e=>t=>{const r=we.refract(t);r.classes.push("result");const n=e(r),s=S(n);return ve.cache.set(s,n),S(n)},Ao={name:"openapi-3-1-apidom",match(e){return rt(e)},normalize(e){if(!ut(e)&&be(e)&&!e.$$normalized){const t=Rs(gt)(e);return t.$$normalized=!0,t}return ut(e)?gt(e):e},async resolve(e){return ve(e)}},Ts=async e=>{const{spec:t,requestInterceptor:r,responseInterceptor:n}=e,s=_e(e),o=Wt(e),a=t||await Bt(o,{requestInterceptor:r,responseInterceptor:n})(s),i={...e,spec:a};return e.strategies.find(l=>l.match(a)).resolve(i)},Cs=e=>async t=>{const r={...e,...t};return Ts(r)},Es=Cs({strategies:[cs,is,ns]}),Ms={body:js,header:$s,query:Ns,path:ks,formData:Is};function js({req:e,value:t}){t!==void 0&&(e.body=t)}function Is({req:e,value:t,parameter:r}){if(t===!1&&r.type==="boolean"&&(t="false"),t===0&&["number","integer"].indexOf(r.type)>-1&&(t="0"),t)e.form=e.form||{},e.form[r.name]={collectionFormat:r.collectionFormat,value:t};else if(r.allowEmptyValue&&t!==void 0){e.form=e.form||{};const n=r.name;e.form[n]=e.form[n]||{},e.form[n].allowEmptyValue=!0}}function $s({req:e,parameter:t,value:r}){e.headers=e.headers||{},typeof r<"u"&&(e.headers[t.name]=r)}function ks({req:e,value:t,parameter:r,baseURL:n}){if(t!==void 0){const s=e.url.replace(n,""),o=Ue(s,{[r.name]:t});e.url=n+o}}function Ns({req:e,value:t,parameter:r}){if(e.query=e.query||{},t===!1&&r.type==="boolean"&&(t="false"),t===0&&["number","integer"].indexOf(r.type)>-1&&(t="0"),t)e.query[r.name]={collectionFormat:r.collectionFormat,value:t};else if(r.allowEmptyValue&&t!==void 0){const n=r.name;e.query[n]=e.query[n]||{},e.query[n].allowEmptyValue=!0}}function Oe(e,t){return t.includes("application/json")?typeof e=="string"?e:(Array.isArray(e)&&(e=e.map(r=>{try{return JSON.parse(r)}catch{return r}})),JSON.stringify(e)):String(e)}const Ds="%3D",Us="%26",zs=e=>Jr(e).replace(/[=&]/gu,t=>t==="="?Ds:Us),Je=(e,t={})=>Vr(e,Wr({encoders:{name:Br,value:zs},validators:{name:Lr,value:Hr}},t));function Fs({req:e,value:t,parameter:r,baseURL:n}){const{name:s,style:o,explode:a,content:i}=r;if(t===void 0)return;const c=e.url.replace(n,"");let l;if(i){const u=Object.keys(i)[0];l=Ue(c,{[s]:t},{encoder:d=>Ht(Oe(d,u))})}else l=Ue(c,{[s]:t},{encoder:u=>Xe({key:r.name,value:u,style:o||"simple",explode:a??!1,escape:"reserved"})});e.url=n+l}function Vs({req:e,value:t,parameter:r}){if(e.query=e.query||{},t!==void 0&&r.content){const n=Object.keys(r.content)[0],s=Oe(t,n);if(s)e.query[r.name]=s;else if(r.allowEmptyValue){const o=r.name;e.query[o]=e.query[o]||{},e.query[o].allowEmptyValue=!0}return}if(t===!1&&(t="false"),t===0&&(t="0"),t){const{style:n,explode:s,allowReserved:o}=r;e.query[r.name]={value:t,serializationOption:{style:n,explode:s,allowReserved:o}}}else if(r.allowEmptyValue&&t!==void 0){const n=r.name;e.query[n]=e.query[n]||{},e.query[n].allowEmptyValue=!0}}const Bs=["accept","authorization","content-type"];function Ls({req:e,parameter:t,value:r}){if(e.headers=e.headers||{},!(Bs.indexOf(t.name.toLowerCase())>-1)){if(r!==void 0&&t.content){const n=Object.keys(t.content)[0];e.headers[t.name]=Oe(r,n);return}r!==void 0&&!(Array.isArray(r)&&r.length===0)&&(e.headers[t.name]=Xe({key:t.name,value:r,style:t.style||"simple",explode:typeof t.explode>"u"?!1:t.explode,escape:!1}))}}function Hs({req:e,parameter:t,value:r}){const{name:n}=t;if(e.headers=e.headers||{},r!==void 0&&t.content){const o=Object.keys(t.content)[0],a=Oe(r,o);e.headers.Cookie=Je({[n]:a});return}if(r!==void 0&&!(Array.isArray(r)&&r.length===0)){var s;const o=Xe({key:t.name,value:r,escape:!1,style:t.style||"form",explode:(s=t.explode)!==null&&s!==void 0?s:!1}),a=Array.isArray(r)&&t.explode?`${n}=${o}`:o;e.headers.Cookie=Je({[n]:a})}}const Js=Object.freeze(Object.defineProperty({__proto__:null,cookie:Hs,header:Ls,path:Fs,query:Vs},Symbol.toStringTag,{value:"Module"})),Ws=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:window)(),{btoa:Yt}=Ws;function Ks(e,t){const{operation:r,requestBody:n,securities:s,spec:o,attachContentTypeForEmptyPayload:a}=e;let{requestContentType:i}=e;t=Gs({request:t,securities:s,operation:r,spec:o});const c=r.requestBody||{},l=Object.keys(c.content||{}),u=i&&l.indexOf(i)>-1;if(n||a){if(i&&u)t.headers["Content-Type"]=i;else if(!i){const m=l[0];m&&(t.headers["Content-Type"]=m,i=m)}}else i&&u&&(t.headers["Content-Type"]=i);if(!e.responseContentType&&r.responses){const m=Object.entries(r.responses).filter(([h,P])=>{const v=parseInt(h,10);return v>=200&&v<300&&be(P.content)}).reduce((h,[,P])=>h.concat(Object.keys(P.content)),[]);m.length>0&&(t.headers.accept=m.join(", "))}if(n)if(i){if(l.indexOf(i)>-1)if(i==="application/x-www-form-urlencoded"||i==="multipart/form-data")if(typeof n=="object"){var d,f;const m=(d=(f=c.content[i])===null||f===void 0?void 0:f.encoding)!==null&&d!==void 0?d:{};t.form={},Object.keys(n).forEach(h=>{let P;try{P=JSON.parse(n[h])}catch{P=n[h]}t.form[h]={value:P,encoding:m[h]||{}}})}else if(typeof n=="string"){var y,p;const m=(y=(p=c.content[i])===null||p===void 0?void 0:p.encoding)!==null&&y!==void 0?y:{};try{t.form={};const h=JSON.parse(n);Object.entries(h).forEach(([P,v])=>{t.form[P]={value:v,encoding:m[P]||{}}})}catch{t.form=n}}else t.form=n;else t.body=n}else t.body=n;return t}function Gs({request:e,securities:t={},operation:r={},spec:n}){var s;const o={...e},{authorized:a={}}=t,i=r.security||n.security||[],c=a&&!!Object.keys(a).length,l=(n==null||(s=n.components)===null||s===void 0?void 0:s.securitySchemes)||{};return o.headers=o.headers||{},o.query=o.query||{},!Object.keys(t).length||!c||!i||Array.isArray(r.security)&&!r.security.length?e:(i.forEach(u=>{Object.keys(u).forEach(d=>{const f=a[d],y=l[d];if(!f)return;const p=f.value||f,{type:m}=y;if(f){if(m==="apiKey")y.in==="query"&&(o.query[y.name]=p),y.in==="header"&&(o.headers[y.name]=p),y.in==="cookie"&&(o.cookies[y.name]=p);else if(m==="http"){if(/^basic$/i.test(y.scheme)){const h=p.username||"",P=p.password||"",v=Yt(`${h}:${P}`);o.headers.Authorization=`Basic ${v}`}/^bearer$/i.test(y.scheme)&&(o.headers.Authorization=`Bearer ${p}`)}else if(m==="oauth2"||m==="openIdConnect"){const h=f.token||{},P=y["x-tokenName"]||"access_token",v=h[P];let w=h.token_type;(!w||w.toLowerCase()==="bearer")&&(w="Bearer"),o.headers.Authorization=`${w} ${v}`}}})}),o)}function Qs(e,t){const{spec:r,operation:n,securities:s,requestContentType:o,responseContentType:a,attachContentTypeForEmptyPayload:i}=e;if(t=Ys({request:t,securities:s,operation:n,spec:r}),t.body||t.form||i)o?t.headers["Content-Type"]=o:Array.isArray(n.consumes)?[t.headers["Content-Type"]]=n.consumes:Array.isArray(r.consumes)?[t.headers["Content-Type"]]=r.consumes:n.parameters&&n.parameters.filter(c=>c.type==="file").length?t.headers["Content-Type"]="multipart/form-data":n.parameters&&n.parameters.filter(c=>c.in==="formData").length&&(t.headers["Content-Type"]="application/x-www-form-urlencoded");else if(o){const c=n.parameters&&n.parameters.filter(u=>u.in==="body").length>0,l=n.parameters&&n.parameters.filter(u=>u.in==="formData").length>0;(c||l)&&(t.headers["Content-Type"]=o)}return!a&&Array.isArray(n.produces)&&n.produces.length>0&&(t.headers.accept=n.produces.join(", ")),t}function Ys({request:e,securities:t={},operation:r={},spec:n}){const s={...e},{authorized:o={},specSecurity:a=[]}=t,i=r.security||a,c=o&&!!Object.keys(o).length,l=n.securityDefinitions;return s.headers=s.headers||{},s.query=s.query||{},!Object.keys(t).length||!c||!i||Array.isArray(r.security)&&!r.security.length?e:(i.forEach(u=>{Object.keys(u).forEach(d=>{const f=o[d];if(!f)return;const{token:y}=f,p=f.value||f,m=l[d],{type:h}=m,P=m["x-tokenName"]||"access_token",v=y&&y[P];let w=y&&y.token_type;if(f)if(h==="apiKey"){const E=m.in==="query"?"query":"headers";s[E]=s[E]||{},s[E][m.name]=p}else if(h==="basic")if(p.header)s.headers.authorization=p.header;else{const E=p.username||"",j=p.password||"";p.base64=Yt(`${E}:${j}`),s.headers.authorization=`Basic ${p.base64}`}else h==="oauth2"&&v&&(w=!w||w.toLowerCase()==="bearer"?"Bearer":w,s.headers.authorization=`${w} ${v}`)})}),s)}function Xs(e,t,r){if(!e||typeof e!="object"||!e.paths||typeof e.paths!="object")return null;const{paths:n}=e;for(const s in n)for(const o in n[s]){if(o.toUpperCase()==="PARAMETERS")continue;const a=n[s][o];if(!a||typeof a!="object")continue;const i={spec:e,pathName:s,method:o.toUpperCase(),operation:a},c=t(i);if(r&&c)return i}}function Zs(e,t){return Xs(e,t,!0)||null}function Xt(e,t){return`${t.toLowerCase()}-${e}`}function _s(e,t){return!e||!e.paths?null:Zs(e,({pathName:r,method:n,operation:s})=>{if(!s||typeof s!="object")return!1;const o=s.operationId,a=et(s,r,n),i=Xt(r,n);return[a,i,o].some(c=>c&&c===t)})}const wt=e=>Array.isArray(e)?e:[],me=(e,{recurse:t=!0,depth:r=1}={})=>{if(be(e)){if(e.type==="object"||Array.isArray(e.type)&&e.type.includes("object"))return e;if(!(r>$t)&&t){const n=Array.isArray(e.oneOf)?e.oneOf.find(o=>me(o,{recurse:t,depth:r+1})):void 0;if(n)return n;const s=Array.isArray(e.anyOf)?e.anyOf.find(o=>me(o,{recurse:t,depth:r+1})):void 0;if(s)return s}}},bt=({value:e,silentFail:t=!1})=>{try{const r=JSON.parse(e);if(typeof r=="object")return r;if(!t)throw new Error("Expected JSON serialized object")}catch{if(!t)throw new Error("Could not parse object parameter value string as JSON Object")}return e},fe=e=>{try{return new URL(e)}catch{const t=new URL(e,pe),r=String(e).startsWith("/")?t.pathname:t.pathname.substring(1);return{hash:t.hash,host:"",hostname:"",href:"",origin:"",password:"",pathname:r,port:"",protocol:"",search:t.search,searchParams:t.searchParams}}};class qs extends Ke{}const eo=(e,t)=>t.filter(r=>r.name===e),to=e=>{const t={};e.forEach(n=>{t[n.in]||(t[n.in]={}),t[n.in][n.name]=n});const r=[];return Object.keys(t).forEach(n=>{Object.keys(t[n]).forEach(s=>{r.push(t[n][s])})}),r},ro={buildRequest:no};function So({http:e,fetch:t,spec:r,operationId:n,pathName:s,method:o,parameters:a,securities:i,...c}){const l=e||t||ye;s&&o&&!n&&(n=Xt(s,o));const u=ro.buildRequest({spec:r,operationId:n,parameters:a,securities:i,http:l,...c});return u.body&&(be(u.body)||Array.isArray(u.body))&&(u.body=JSON.stringify(u.body)),l(u)}function no(e){const{spec:t,operationId:r,responseContentType:n,scheme:s,requestInterceptor:o,responseInterceptor:a,contextUrl:i,userFetch:c,server:l,serverVariables:u,http:d,signal:f,serverVariableEncoder:y}=e;let{parameters:p,parameterBuilders:m,baseURL:h}=e;const P=Qt(t);m||(P?m=Js:m=Ms);let w={url:"",credentials:d&&d.withCredentials?"include":"same-origin",headers:{},cookies:{}};f&&(w.signal=f),o&&(w.requestInterceptor=o),a&&(w.responseInterceptor=a),c&&(w.userFetch=c);const E=_s(t,r);if(!E)throw new qs(`Operation ${r} not found`);const{operation:j={},method:b,pathName:T}=E;if(h=h??so({spec:t,scheme:s,contextUrl:i,server:l,serverVariables:u,pathName:T,method:b,serverVariableEncoder:y}),w.url+=h,!r)return delete w.cookies,w;w.url+=T,w.method=`${b}`.toUpperCase(),p=p||{};const I=t.paths[T]||{};n&&(w.headers.accept=n);const g=to([].concat(wt(j.parameters)).concat(wt(I.parameters)));g.forEach(O=>{const A=m[O.in];let R;if(O.in==="body"&&O.schema&&O.schema.properties&&(R=p),R=O&&O.name&&p[O.name],typeof R>"u"?R=O&&O.name&&p[`${O.in}.${O.name}`]:eo(O.name,g).length>1&&console.warn(`Parameter '${O.name}' is ambiguous because the defined spec has more than one parameter with the name: '${O.name}' and the passed-in parameter values did not define an 'in' value.`),R!==null){if(typeof O.default<"u"&&typeof R>"u"&&(R=O.default),typeof R>"u"&&O.required&&!O.allowEmptyValue)throw new Error(`Required parameter ${O.name} is not provided`);P&&typeof R=="string"&&(Kr("type",O.schema)&&me(O.schema,{recurse:!1})?R=bt({value:R,silentFail:!1}):me(O.schema,{recurse:!0})&&(R=bt({value:R,silentFail:!0}))),A&&A({req:w,parameter:O,value:R,operation:j,spec:t,baseURL:h})}});const C={...e,operation:j};if(P?w=Ks(C,w):w=Qs(C,w),w.cookies&&Object.keys(w.cookies).length>0){const O=Je(w.cookies);Ur(w.headers.Cookie)?w.headers.Cookie+=`; ${O}`:w.headers.Cookie=O}return w.cookies&&delete w.cookies,Ze(w)}const We=e=>e?e.replace(/\W/g,""):null;function so(e){return Qt(e.spec)?oo(e):ao(e)}const $e=e=>Array.isArray(e)&&e.length>0;function oo({spec:e,pathName:t,method:r,server:n,contextUrl:s,serverVariables:o={},serverVariableEncoder:a}){var i,c;let l=[],u="",d;const f=e==null||(i=e.paths)===null||i===void 0||(i=i[t])===null||i===void 0||(i=i[(r||"").toLowerCase()])===null||i===void 0?void 0:i.servers,y=e==null||(c=e.paths)===null||c===void 0||(c=c[t])===null||c===void 0?void 0:c.servers,p=e==null?void 0:e.servers;if(l=$e(f)?f:$e(y)?y:$e(p)?p:[Pn],n&&(d=l.find(m=>m.url===n),d&&(u=n)),u||([d]=l,u=d.url),zr(u,{strict:!0})){const m=Object.entries({...d.variables}).reduce((h,[P,v])=>(h[P]=v.default,h),{});u=Fr(u,{...m,...o},{encoder:typeof a=="function"?a:Gr})}return io(u,s)}function io(e="",t=""){const r=fe(e&&t?D(t,e):e),n=fe(t),s=We(r.protocol)||We(n.protocol),o=r.host||n.host,a=r.pathname;let i;return s&&o?i=`${s}://${o+a}`:i=a,i[i.length-1]==="/"?i.slice(0,-1):i}function ao({spec:e,scheme:t,contextUrl:r=""}){const n=fe(r),s=Array.isArray(e.schemes)?e.schemes[0]:null,o=t||s||We(n.protocol)||"http",a=e.host||n.host||"",i=e.basePath||"";let c;return o&&a?c=`${o}://${a+i}`:c=i,c[c.length-1]==="/"?c.slice(0,-1):c}const co=async(e,t,r={})=>{const{returnEntireTree:n,baseDoc:s,requestInterceptor:o,responseInterceptor:a,parameterMacro:i,modelPropertyMacro:c,useCircularStructures:l,strategies:u}=r,d={spec:e,pathDiscriminator:t,baseDoc:s,requestInterceptor:o,responseInterceptor:a,parameterMacro:i,modelPropertyMacro:c,useCircularStructures:l,strategies:u},y=u.find(m=>m.match(e)).normalize(e),p=await Es({spec:y,...d,allowMetaPatches:!0,skipNormalization:!rt(e)});return!n&&Array.isArray(t)&&t.length&&(p.spec=t.reduce((m,h)=>m==null?void 0:m[h],p.spec)||null),p},xo=e=>async(t,r,n={})=>{const s={...e,...n};return co(t,r,s)};export{cs as a,Ao as b,no as c,Oo as d,So as e,xo as f,ns as g,ye as h,et as i,Cs as m,is as o,ts as s};
