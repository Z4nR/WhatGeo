var nr=Object.defineProperty;var ct=e=>{throw TypeError(e)};var sr=(e,t,r)=>t in e?nr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var E=(e,t,r)=>sr(e,typeof t!="symbol"?t+"":t,r),ut=(e,t,r)=>t.has(e)||ct("Cannot "+r);var Re=(e,t,r)=>(ut(e,t,"read from private field"),r?r.call(e):t.get(e)),lt=(e,t,r)=>t.has(e)?ct("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Te=(e,t,r,n)=>(ut(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r);import{b as Rt,r as U,A as Ze,H as or,R as ir,P as Pe,c as L,d as ie,f as Tt,O as Ct,m as oe,e as ve,g as Mt,s as S,i as fe,a as K,h as Fe,j as Ce,k as ze,l as Et,I as ar,n as cr,o as z,p as ft,q as ur,t as lr,u as Q,M as Me,v as fr,w as jt,x as Z,y as re,z as D,B as ce,C as dt,D as pt,E as ue,F as dr,G as pr,J as B,K as hr,L as yr,N as mr,Q as ht,S as gr,T as wr,U as br,V as Pr,W as vr,X as Or,Y as Ve,Z as de,_ as Ar,$ as yt,a0 as Sr,a1 as xr,a2 as Rr,a3 as Tr,a4 as Cr,a5 as Mr,a6 as Er,a7 as jr,a8 as Ir,a9 as $r,aa as kr,ab as Dr,ac as mt}from"./@swagger-api-D4l6pvep.js";import{j as _,J as Be}from"./js-yaml-DoUMCdfs.js";import{A as Ur,m as Nr,n as Ee,i as Fr}from"./ramda-DDa0NBps.js";import{f as Y,e as te,c as zr,J as Vr,s as Br,a as Lr,b as Hr,d as Jr,i as Wr}from"./@swaggerexpert-Cl78hl6M.js";import{m as pe}from"./minim-C7Fhc8cT.js";import{f as G,j as Kr}from"./ramda-adjunct-DjcREzQ7.js";import{t as Gr,s as Qr}from"./openapi-server-url-templating-CvgChSMj.js";import{r as Le}from"./openapi-path-templating-ZU4nGFHq.js";import{a as ee,g as Yr}from"./fast-json-patch-oKVPe2xE.js";import{d as gt}from"./deepmerge-DZxBq_Y9.js";import{s as Xr}from"./neotraverse-BtB9tPNd.js";const R={add:_r,replace:he,remove:qr,merge:en,mergeDeep:tn,context:rn,getIn:an,applyPatch:Zr,parentPathMatch:on,flatten:ae,fullyNormalizeArray:cn,normalizeArray:$t,isPromise:un,forEachNew:nn,forEachNewPrimitive:sn,isJsonPatch:Ut,isContextPatch:dn,isPatch:Oe,isMutation:Nt,isAdditiveMutation:me,isGenerator:fn,isFunction:Dt,isObject:W,isError:ln};function Zr(e,t,r){if(r=r||{},t={...t,path:t.path&&wt(t.path)},t.op==="merge"){const n=je(e,t.path);Object.assign(n,t.value),ee(e,[he(t.path,n)])}else if(t.op==="mergeDeep"){const n=je(e,t.path),s=gt(n,t.value,{customMerge:o=>{if(o==="enum")return(a,i)=>Array.isArray(a)&&Array.isArray(i)?[...new Set([...a,...i])]:gt(a,i)}});e=ee(e,[he(t.path,s)]).newDocument}else if(t.op==="add"&&t.path===""&&W(t.value)){const n=Object.keys(t.value).reduce((s,o)=>(s.push({op:"add",path:`/${wt(o)}`,value:t.value[o]}),s),[]);ee(e,n)}else if(t.op==="replace"&&t.path===""){let{value:n}=t;r.allowMetaPatches&&t.meta&&me(t)&&(Array.isArray(t.value)||W(t.value))&&(n={...n,...t.meta}),e=n}else if(ee(e,[t]),r.allowMetaPatches&&t.meta&&me(t)&&(Array.isArray(t.value)||W(t.value))){const s={...je(e,t.path),...t.meta};ee(e,[he(t.path,s)])}return e}function wt(e){return Array.isArray(e)?e.length<1?"":`/${e.map(t=>(t+"").replace(/~/g,"~0").replace(/\//g,"~1")).join("/")}`:e}function _r(e,t){return{op:"add",path:e,value:t}}function he(e,t,r){return{op:"replace",path:e,value:t,meta:r}}function qr(e){return{op:"remove",path:e}}function en(e,t){return{type:"mutation",op:"merge",path:e,value:t}}function tn(e,t){return{type:"mutation",op:"mergeDeep",path:e,value:t}}function rn(e,t){return{type:"context",path:e,value:t}}function nn(e,t){try{return It(e,Je,t)}catch(r){return r}}function sn(e,t){try{return It(e,He,t)}catch(r){return r}}function It(e,t,r){const n=e.filter(me).map(a=>t(a.value,r,a.path))||[],s=ae(n);return kt(s)}function He(e,t,r){return r=r||[],Array.isArray(e)?e.map((n,s)=>He(n,t,r.concat(s))):W(e)?Object.keys(e).map(n=>He(e[n],t,r.concat(n))):t(e,r[r.length-1],r)}function Je(e,t,r){r=r||[];let n=[];if(r.length>0){const s=t(e,r[r.length-1],r);s&&(n=n.concat(s))}if(Array.isArray(e)){const s=e.map((o,a)=>Je(o,t,r.concat(a)));s&&(n=n.concat(s))}else if(W(e)){const s=Object.keys(e).map(o=>Je(e[o],t,r.concat(o)));s&&(n=n.concat(s))}return n=ae(n),n}function on(e,t){if(!Array.isArray(t))return!1;for(let r=0,n=t.length;r<n;r+=1)if(t[r]!==e[r])return!1;return!0}function an(e,t){return t.reduce((r,n)=>typeof n<"u"&&r?r[n]:r,e)}function cn(e){return kt(ae($t(e)))}function $t(e){return Array.isArray(e)?e:[e]}function ae(e){return[].concat(...e.map(t=>Array.isArray(t)?ae(t):t))}function kt(e){return e.filter(t=>typeof t<"u")}function W(e){return e&&typeof e=="object"}function un(e){return W(e)&&Dt(e.then)}function Dt(e){return e&&typeof e=="function"}function ln(e){return e instanceof Error}function Ut(e){if(Oe(e)){const{op:t}=e;return t==="add"||t==="remove"||t==="replace"}return!1}function fn(e){return Object.prototype.toString.call(e)==="[object GeneratorFunction]"}function Nt(e){return Ut(e)||Oe(e)&&e.type==="mutation"}function me(e){return Nt(e)&&(e.op==="add"||e.op==="replace"||e.op==="merge"||e.op==="mergeDeep")}function dn(e){return Oe(e)&&e.type==="context"}function Oe(e){return e&&typeof e=="object"}function je(e,t){try{return Yr(e,t)}catch(r){return console.error(r),{}}}const{fetch:pn,Response:hn,Headers:yn,Request:mn,FormData:gn,File:wn,Blob:bn}=globalThis;typeof globalThis.fetch>"u"&&(globalThis.fetch=pn);typeof globalThis.Headers>"u"&&(globalThis.Headers=yn);typeof globalThis.Request>"u"&&(globalThis.Request=mn);typeof globalThis.Response>"u"&&(globalThis.Response=hn);typeof globalThis.FormData>"u"&&(globalThis.FormData=gn);typeof globalThis.File>"u"&&(globalThis.File=wn);typeof globalThis.Blob>"u"&&(globalThis.Blob=bn);const Ft="application/json, application/yaml",ge="https://swagger.io",Pn=Object.freeze({url:"/"}),zt=3e3,vn=["properties"],On=["properties"],An=["definitions","parameters","responses","securityDefinitions","components/schemas","components/responses","components/parameters","components/securitySchemes"],Sn=["schema/example","items/example"];function Vt(e){const t=e[e.length-1],r=e[e.length-2],n=e.join("/");return vn.indexOf(t)>-1&&On.indexOf(r)===-1||An.indexOf(n)>-1||Sn.some(s=>n.indexOf(s)>-1)}function xn(e,t,{specmap:r,getBaseUrlForNodePath:n=o=>r.getContext([...t,...o]).baseDoc,targetKeys:s=["$ref","$$ref"]}={}){const o=[];return Xr(e).forEach(function(){if(s.includes(this.key)&&typeof this.node=="string"){const i=this.path,c=t.concat(this.path),u=We(this.node,n(i));o.push(r.replace(c,u))}}),o}function We(e,t){const[r,n]=e.split("#"),s=t??"",o=r??"";let a;if(Rt(s))a=U(s,o);else{const i=U(ge,s),u=U(i,o).replace(ge,"");a=o.startsWith("/")?u:u.substring(1)}return n?`${a}#${n}`:a}const Rn=/^([a-z]+:\/\/|\/\/)/i;class q extends Ze{}const V={},bt=new WeakMap,Tn=[e=>e[0]==="paths"&&e[3]==="responses"&&e[5]==="examples",e=>e[0]==="paths"&&e[3]==="responses"&&e[5]==="content"&&e[7]==="example",e=>e[0]==="paths"&&e[3]==="responses"&&e[5]==="content"&&e[7]==="examples"&&e[9]==="value",e=>e[0]==="paths"&&e[3]==="requestBody"&&e[4]==="content"&&e[6]==="example",e=>e[0]==="paths"&&e[3]==="requestBody"&&e[4]==="content"&&e[6]==="examples"&&e[8]==="value",e=>e[0]==="paths"&&e[2]==="parameters"&&e[4]==="example",e=>e[0]==="paths"&&e[3]==="parameters"&&e[5]==="example",e=>e[0]==="paths"&&e[2]==="parameters"&&e[4]==="examples"&&e[6]==="value",e=>e[0]==="paths"&&e[3]==="parameters"&&e[5]==="examples"&&e[7]==="value",e=>e[0]==="paths"&&e[2]==="parameters"&&e[4]==="content"&&e[6]==="example",e=>e[0]==="paths"&&e[2]==="parameters"&&e[4]==="content"&&e[6]==="examples"&&e[8]==="value",e=>e[0]==="paths"&&e[3]==="parameters"&&e[4]==="content"&&e[7]==="example",e=>e[0]==="paths"&&e[3]==="parameters"&&e[5]==="content"&&e[7]==="examples"&&e[9]==="value"],Cn=e=>Tn.some(t=>t(e)),Mn={key:"$ref",plugin:(e,t,r,n)=>{const s=n.getInstance(),o=r.slice(0,-1);if(Vt(o)||Cn(o))return;const{baseDoc:a}=n.getContext(r);if(typeof e!="string")return new q("$ref: must be a string (JSON-Ref)",{$ref:e,baseDoc:a,fullPath:r});const i=Lt(e),c=i[0],u=i[1]||"";let l;try{l=a||c?Bt(c,a):null}catch(h){return Ke(h,{pointer:u,$ref:e,basePath:l,fullPath:r})}let d,f;if(kn(u,l,o,n)&&!s.useCircularStructures){const h=We(e,l);return e===h?null:R.replace(r,h)}if(l==null?(f=qe(u),d=n.get(f),typeof d>"u"&&(d=new q(`Could not resolve reference: ${e}`,{pointer:u,$ref:e,baseDoc:a,fullPath:r}))):(d=Ht(l,u),d.__value!=null?d=d.__value:d=d.catch(h=>{throw Ke(h,{pointer:u,$ref:e,baseDoc:a,fullPath:r})})),d instanceof Error)return[R.remove(r),d];const y=We(e,l),p=R.replace(o,d,{$$ref:y});if(l&&l!==a)return[p,R.context(o,{baseDoc:l})];try{if(!Dn(n.state,p)||s.useCircularStructures)return p}catch{return null}}},_e=Object.assign(Mn,{docCache:V,absoluteify:Bt,clearCache:En,JSONRefError:q,wrapError:Ke,getDoc:Jt,split:Lt,extractFromDoc:Ht,fetchJSON:jn,extract:Ge,jsonPointerToArray:qe,unescapeJsonPointerToken:Wt});function Bt(e,t){if(!Rn.test(e)){if(!t)throw new q(`Tried to resolve a relative URL, without having a basePath. path: '${e}' basePath: '${t}'`);return U(t,e)}return e}function Ke(e,t){let r;return e&&e.response&&e.response.body?r=`${e.response.body.code} ${e.response.body.message}`:r=e.message,new q(`Could not resolve reference: ${r}`,{...t,cause:e})}function Lt(e){return(e+"").split("#")}function Ht(e,t){const r=V[e];if(r&&!R.isPromise(r))try{const n=Ge(t,r);return Object.assign(Promise.resolve(n),{__value:n})}catch(n){return Promise.reject(n)}return Jt(e).then(n=>Ge(t,n))}function En(e){typeof e<"u"?delete V[e]:Object.keys(V).forEach(t=>{delete V[t]})}function Jt(e){const t=V[e];return t?R.isPromise(t)?t:Promise.resolve(t):(V[e]=_e.fetchJSON(e).then(r=>(V[e]=r,r)),V[e])}function jn(e){return fetch(e,{headers:{Accept:Ft},loadSpec:!0}).then(t=>t.text()).then(t=>_.load(t))}function Ge(e,t){const r=qe(e);if(r.length<1)return t;const n=R.getIn(t,r);if(typeof n>"u")throw new q(`Could not resolve pointer: ${e} does not exist in document`,{pointer:e});return n}function qe(e){if(typeof e!="string")throw new TypeError(`Expected a string, got a ${typeof e}`);return e[0]==="/"&&(e=e.substr(1)),e===""?[]:e.split("/").map(Wt)}function Wt(e){return typeof e!="string"?e:new URLSearchParams(`=${e.replace(/~1/g,"/").replace(/~0/g,"~")}`).get("")}function Kt(e){return new URLSearchParams([["",e.replace(/~/g,"~0").replace(/\//g,"~1")]]).toString().slice(1)}function In(e){return e.length===0?"":`/${e.map(Kt).join("/")}`}const $n=e=>!e||e==="/"||e==="#";function Ie(e,t){if($n(t))return!0;const r=e.charAt(t.length),n=t.slice(-1);return e.indexOf(t)===0&&(!r||r==="/"||r==="#")&&n!=="#"}function kn(e,t,r,n){let s=bt.get(n);s||(s={},bt.set(n,s));const o=In(r),a=`${t||"<specmap-base>"}#${e}`,i=o.replace(/allOf\/\d+\/?/g,""),c=n.contextTree.get([]).baseDoc;if(t===c&&Ie(i,e))return!0;let u="";if(r.some(d=>(u=`${u}/${Kt(d)}`,s[u]&&s[u].some(f=>Ie(f,a)||Ie(a,f)))))return!0;s[i]=(s[i]||[]).concat(a)}function Dn(e,t){const r=[e];return t.path.reduce((s,o)=>(r.push(s[o]),s[o]),e),n(t.value);function n(s){return R.isObject(s)&&(r.indexOf(s)>=0||Object.keys(s).some(o=>n(s[o])))}}const Un={key:"allOf",plugin:(e,t,r,n,s)=>{if(s.meta&&s.meta.$$ref)return;const o=r.slice(0,-1);if(Vt(o))return;if(!Array.isArray(e)){const u=new TypeError("allOf must be an array");return u.fullPath=r,u}let a=!1,i=s.value;if(o.forEach(u=>{i&&(i=i[u])}),i={...i},Object.keys(i).length===0)return;delete i.allOf;const c=[];return c.push(n.replace(o,{})),e.forEach((u,l)=>{if(!n.isObject(u)){if(a)return null;a=!0;const y=new TypeError("Elements in allOf must be objects");return y.fullPath=r,c.push(y)}c.push(n.mergeDeep(o,u));const d=r.slice(0,-1),f=xn(u,d,{getBaseUrlForNodePath:y=>n.getContext([...r,l,...y]).baseDoc,specmap:n});c.push(...f)}),i.example&&c.push(n.remove([].concat(o,"example"))),c.push(n.mergeDeep(o,i)),i.$$ref||c.push(n.remove([].concat(o,"$$ref"))),c}},Nn={key:"parameters",plugin:(e,t,r,n)=>{if(Array.isArray(e)&&e.length){const s=Object.assign([],e),o=r.slice(0,-1),a={...R.getIn(n.spec,o)};for(let i=0;i<e.length;i+=1){const c=e[i];try{s[i].default=n.parameterMacro(a,c)}catch(u){const l=new Error(u);return l.fullPath=r,l}}return R.replace(r,s)}return R.replace(r,e)}},Fn={key:"properties",plugin:(e,t,r,n)=>{const s={...e};for(const a in e)try{s[a].default=n.modelPropertyMacro(s[a])}catch(i){const c=new Error(i);return c.fullPath=r,c}return R.replace(r,s)}};class zn{constructor(t){this.root=$e(t||{})}set(t,r){const n=this.getParent(t,!0);if(!n){we(this.root,r,null);return}const s=t[t.length-1],{children:o}=n;if(o[s]){we(o[s],r,n);return}o[s]=$e(r,n)}get(t){if(t=t||[],t.length<1)return this.root.value;let r=this.root,n,s;for(let o=0;o<t.length&&(s=t[o],n=r.children,!!n[s]);o+=1)r=n[s];return r&&r.protoValue}getParent(t,r){return!t||t.length<1?null:t.length<2?this.root:t.slice(0,-1).reduce((n,s)=>{if(!n)return n;const{children:o}=n;return!o[s]&&r&&(o[s]=$e(null,n)),o[s]},this.root)}}function $e(e,t){return we({children:{}},e,t)}function we(e,t,r){return e.value=t||{},e.protoValue=r?{...r.protoValue,...e.value}:e.value,Object.keys(e.children).forEach(n=>{const s=e.children[n];e.children[n]=we(s,s.value,e)}),e}const Pt=100,vt=()=>{};class Vn{static getPluginName(t){return t.pluginName}static getPatchesOfType(t,r){return t.filter(r)}constructor(t){Object.assign(this,{spec:"",debugLevel:"info",plugins:[],pluginHistory:{},errors:[],mutations:[],promisedPatches:[],state:{},patches:[],context:{},contextTree:new zn,showDebug:!1,allPatches:[],pluginProp:"specMap",libMethods:Object.assign(Object.create(this),R,{getInstance:()=>this}),allowMetaPatches:!1},t),this.get=this._get.bind(this),this.getContext=this._getContext.bind(this),this.hasRun=this._hasRun.bind(this),this.wrappedPlugins=this.plugins.map(this.wrapPlugin.bind(this)).filter(R.isFunction),this.patches.push(R.add([],this.spec)),this.patches.push(R.context([],this.context)),this.updatePatches(this.patches)}debug(t,...r){this.debugLevel===t&&console.log(...r)}verbose(t,...r){this.debugLevel==="verbose"&&console.log(`[${t}]   `,...r)}wrapPlugin(t,r){const{pathDiscriminator:n}=this;let s=null,o;return t[this.pluginProp]?(s=t,o=t[this.pluginProp]):R.isFunction(t)?o=t:R.isObject(t)&&(o=a(t)),Object.assign(o.bind(s),{pluginName:t.name||r,isGenerator:R.isGenerator(o)});function a(i){const c=(u,l)=>Array.isArray(u)?u.every((d,f)=>d===l[f]):!0;return function*(l,d){const f={};for(const[p,h]of l.filter(R.isAdditiveMutation).entries())if(p<zt)yield*y(h.value,h.path,h);else return;function*y(p,h,m){if(!R.isObject(p))i.key===h[h.length-1]&&(yield i.plugin(p,i.key,h,d));else{const P=h.length-1,v=h[P],w=h.indexOf("properties"),M=v==="properties"&&P===w,I=d.allowMetaPatches&&f[p.$$ref];for(const b of Object.keys(p)){const T=p[b],j=h.concat(b),g=R.isObject(T),C=p.$$ref;if(I||g&&(d.allowMetaPatches&&C&&c(n,j)&&(f[C]=!0),yield*y(T,j,m)),!M&&b===i.key){const O=c(n,h);(!n||O)&&(yield i.plugin(T,b,j,d,m))}}}}}}}nextPlugin(){return this.wrappedPlugins.find(t=>this.getMutationsForPlugin(t).length>0)}nextPromisedPatch(){if(this.promisedPatches.length>0)return Promise.race(this.promisedPatches.map(t=>t.value))}getPluginHistory(t){const r=this.constructor.getPluginName(t);return this.pluginHistory[r]||[]}getPluginRunCount(t){return this.getPluginHistory(t).length}getPluginHistoryTip(t){const r=this.getPluginHistory(t);return r&&r[r.length-1]||{}}getPluginMutationIndex(t){const r=this.getPluginHistoryTip(t).mutationIndex;return typeof r!="number"?-1:r}updatePluginHistory(t,r){const n=this.constructor.getPluginName(t);this.pluginHistory[n]=this.pluginHistory[n]||[],this.pluginHistory[n].push(r)}updatePatches(t){R.normalizeArray(t).forEach(r=>{if(r instanceof Error){this.errors.push(r);return}try{if(!R.isObject(r)){this.debug("updatePatches","Got a non-object patch",r);return}if(this.showDebug&&this.allPatches.push(r),R.isPromise(r.value)){this.promisedPatches.push(r),this.promisedPatchThen(r);return}if(R.isContextPatch(r)){this.setContext(r.path,r.value);return}R.isMutation(r)&&this.updateMutations(r)}catch(n){console.error(n),this.errors.push(n)}})}updateMutations(t){typeof t.value=="object"&&!Array.isArray(t.value)&&this.allowMetaPatches&&(t.value={...t.value});const r=R.applyPatch(this.state,t,{allowMetaPatches:this.allowMetaPatches});r&&(this.mutations.push(t),this.state=r)}removePromisedPatch(t){const r=this.promisedPatches.indexOf(t);if(r<0){this.debug("Tried to remove a promisedPatch that isn't there!");return}this.promisedPatches.splice(r,1)}promisedPatchThen(t){return t.value=t.value.then(r=>{const n={...t,value:r};this.removePromisedPatch(t),this.updatePatches(n)}).catch(r=>{this.removePromisedPatch(t),this.updatePatches(r)}),t.value}getMutations(t,r){return t=t||0,typeof r!="number"&&(r=this.mutations.length),this.mutations.slice(t,r)}getCurrentMutations(){return this.getMutationsForPlugin(this.getCurrentPlugin())}getMutationsForPlugin(t){const r=this.getPluginMutationIndex(t);return this.getMutations(r+1)}getCurrentPlugin(){return this.currentPlugin}getLib(){return this.libMethods}_get(t){return R.getIn(this.state,t)}_getContext(t){return this.contextTree.get(t)}setContext(t,r){return this.contextTree.set(t,r)}_hasRun(t){return this.getPluginRunCount(this.getCurrentPlugin())>(t||0)}dispatch(){const t=this,r=this.nextPlugin();if(!r){const o=this.nextPromisedPatch();if(o)return o.then(()=>this.dispatch()).catch(()=>this.dispatch());const a={spec:this.state,errors:this.errors};return this.showDebug&&(a.patches=this.allPatches),Promise.resolve(a)}if(t.pluginCount=t.pluginCount||new WeakMap,t.pluginCount.set(r,(t.pluginCount.get(r)||0)+1),t.pluginCount[r]>Pt)return Promise.resolve({spec:t.state,errors:t.errors.concat(new Error(`We've reached a hard limit of ${Pt} plugin runs`))});if(r!==this.currentPlugin&&this.promisedPatches.length){const o=this.promisedPatches.map(a=>a.value);return Promise.all(o.map(a=>a.then(vt,vt))).then(()=>this.dispatch())}return n();function n(){t.currentPlugin=r;const o=t.getCurrentMutations(),a=t.mutations.length-1;try{if(r.isGenerator)for(const i of r(o,t.getLib()))s(i);else{const i=r(o,t.getLib());s(i)}}catch(i){console.error(i),s([Object.assign(Object.create(i),{plugin:r})])}finally{t.updatePluginHistory(r,{mutationIndex:a})}return t.dispatch()}function s(o){o&&(o=R.fullyNormalizeArray(o),t.updatePatches(o,r))}}}function Bn(e){return new Vn(e).dispatch()}const X={refs:_e,allOf:Un,parameters:Nn,properties:Fn};function Gt(e,t={}){const{requestInterceptor:r,responseInterceptor:n}=t,s=e.withCredentials?"include":"same-origin";return o=>e({url:o,loadSpec:!0,requestInterceptor:r,responseInterceptor:n,headers:{Accept:Ft},credentials:s}).then(a=>a.body)}function et(e,t){return!t&&typeof navigator<"u"&&(t=navigator),t&&t.product==="ReactNative"?!!(e&&typeof e=="object"&&typeof e.uri=="string"):typeof File<"u"&&e instanceof File||typeof Blob<"u"&&e instanceof Blob||ArrayBuffer.isView(e)?!0:e!==null&&typeof e=="object"&&typeof e.pipe=="function"}function Qt(e,t){return Array.isArray(e)&&e.some(r=>et(r,t))}class Qe extends File{constructor(t,r="",n={}){super([t],r,n),this.data=t}valueOf(){return this.data}toString(){return this.valueOf()}}const Ln=e=>":/?#[]@!$&'()*+,;=".indexOf(e)>-1,Hn=e=>/^[a-z0-9\-._~]+$/i.test(e);function Yt(e,t="reserved"){return[...e].map(r=>{if(Hn(r)||Ln(r)&&t==="unsafe")return r;const n=new TextEncoder;return Array.from(n.encode(r)).map(o=>`0${o.toString(16).toUpperCase()}`.slice(-2)).map(o=>`%${o}`).join("")}).join("")}function tt(e){const{value:t}=e;return Array.isArray(t)?Jn(e):typeof t=="object"?Wn(e):Kn(e)}function $(e,t=!1){return Array.isArray(e)||e!==null&&typeof e=="object"?e=JSON.stringify(e):(typeof e=="number"||typeof e=="boolean")&&(e=String(e)),t&&typeof e=="string"&&e.length>0?Yt(e,t):e??""}function Jn({key:e,value:t,style:r,explode:n,escape:s}){if(r==="simple")return t.map(o=>$(o,s)).join(",");if(r==="label")return`.${t.map(o=>$(o,s)).join(".")}`;if(r==="matrix")return t.map(o=>$(o,s)).reduce((o,a)=>!o||n?`${o||""};${e}=${a}`:`${o},${a}`,"");if(r==="form"){const o=n?`&${e}=`:",";return t.map(a=>$(a,s)).join(o)}if(r==="spaceDelimited"){const o=n?`${e}=`:"";return t.map(a=>$(a,s)).join(` ${o}`)}if(r==="pipeDelimited"){const o=n?`${e}=`:"";return t.map(a=>$(a,s)).join(`|${o}`)}}function Wn({key:e,value:t,style:r,explode:n,escape:s}){const o=Object.keys(t);if(r==="simple")return o.reduce((a,i)=>{const c=$(t[i],s),u=n?"=":",";return`${a?`${a},`:""}${i}${u}${c}`},"");if(r==="label")return o.reduce((a,i)=>{const c=$(t[i],s),u=n?"=":".";return`${a?`${a}.`:"."}${i}${u}${c}`},"");if(r==="matrix"&&n)return o.reduce((a,i)=>{const c=$(t[i],s);return`${a?`${a};`:";"}${i}=${c}`},"");if(r==="matrix")return o.reduce((a,i)=>{const c=$(t[i],s);return`${a?`${a},`:`;${e}=`}${i},${c}`},"");if(r==="form")return o.reduce((a,i)=>{const c=$(t[i],s);return`${a?`${a}${n?"&":","}`:""}${i}${n?"=":","}${c}`},"")}function Kn({key:e,value:t,style:r,escape:n}){if(r==="simple")return $(t,n);if(r==="label")return`.${$(t,n)}`;if(r==="matrix")return`;${e}=${$(t,n)}`;if(r==="form"||r==="deepObject")return $(t,n)}const Gn={form:",",spaceDelimited:"%20",pipeDelimited:"|"},Qn={csv:",",ssv:"%20",tsv:"%09",pipes:"|"};function Xt(e,t,r=!1){const{collectionFormat:n,allowEmptyValue:s,serializationOption:o,encoding:a}=t,i=typeof t=="object"&&!Array.isArray(t)?t.value:t,c=r?l=>l.toString():l=>encodeURIComponent(l),u=c(e);if(typeof i>"u"&&s)return[[u,""]];if(et(i)||Qt(i))return[[u,i]];if(o)return Ot(e,i,r,o);if(a){if([typeof a.style,typeof a.explode,typeof a.allowReserved].some(l=>l!=="undefined")){const{style:l,explode:d,allowReserved:f}=a;return Ot(e,i,r,{style:l,explode:d,allowReserved:f})}if(typeof a.contentType=="string"){if(a.contentType.startsWith("application/json")){const f=typeof i=="string"?i:JSON.stringify(i),y=c(f),p=new Qe(y,"blob",{type:a.contentType});return[[u,p]]}const l=c(String(i)),d=new Qe(l,"blob",{type:a.contentType});return[[u,d]]}return typeof i!="object"?[[u,c(i)]]:Array.isArray(i)&&i.every(l=>typeof l!="object")?[[u,i.map(c).join(",")]]:[[u,c(JSON.stringify(i))]]}return typeof i!="object"?[[u,c(i)]]:Array.isArray(i)?n==="multi"?[[u,i.map(c)]]:[[u,i.map(c).join(Qn[n||"csv"])]]:[[u,""]]}function Ot(e,t,r,n){const s=n.style||"form",o=typeof n.explode>"u"?s==="form":n.explode,a=r?!1:n&&n.allowReserved?"unsafe":"reserved",i=u=>$(u,a),c=r?u=>u:u=>i(u);return typeof t!="object"?[[c(e),i(t)]]:Array.isArray(t)?o?[[c(e),t.map(i)]]:[[c(e),t.map(i).join(Gn[s])]]:s==="deepObject"?Object.keys(t).map(u=>[c(`${e}[${u}]`),i(t[u])]):o?Object.keys(t).map(u=>[c(u),i(t[u])]):[[c(e),Object.keys(t).map(u=>[`${c(u)},${i(t[u])}`]).join(",")]]}function Yn(e){return Object.entries(e).reduce((t,[r,n])=>{for(const[s,o]of Xt(r,n,!0))if(Array.isArray(o))for(const a of o)if(ArrayBuffer.isView(a)){const i=new Blob([a]);t.append(s,i)}else t.append(s,a);else if(ArrayBuffer.isView(o)){const a=new Blob([o]);t.append(s,a)}else t.append(s,o);return t},new FormData)}const Xn=(e,{encode:t=!0}={})=>{const r=(o,a,i)=>(Array.isArray(i)?i.reduce((c,u)=>r(o,a,u),o):i instanceof Date?o.append(a,i.toISOString()):typeof i=="object"?Object.entries(i).reduce((c,[u,l])=>r(o,`${a}[${u}]`,l),o):o.append(a,i),o),n=Object.entries(e).reduce((o,[a,i])=>r(o,a,i),new URLSearchParams),s=String(n);return t?s:decodeURIComponent(s)};function At(e){const t=Object.keys(e).reduce((r,n)=>{for(const[s,o]of Xt(n,e[n]))o instanceof Qe?r[s]=o.valueOf():r[s]=o;return r},{});return Xn(t,{encode:!1})}function rt(e={}){const{url:t="",query:r,form:n}=e,s=(...o)=>{const a=o.filter(i=>i).join("&");return a?`?${a}`:""};if(n){const o=Object.keys(n).some(i=>{const{value:c}=n[i];return et(c)||Qt(c)}),a=e.headers["content-type"]||e.headers["Content-Type"];if(o||/multipart\/form-data/i.test(a)){const i=Yn(e.form);e.formdata=i,e.body=i}else e.body=At(n);delete e.form}if(r){const[o,a]=t.split("?");let i="";if(a){const u=new URLSearchParams(a);Object.keys(r).forEach(d=>u.delete(d)),i=String(u)}const c=s(i,At(r));e.url=o+c,delete e.query}return e}const Zn=(e="")=>/(json|xml|yaml|text)\b/.test(e);function _n(e,t){if(t){if(t.indexOf("application/json")===0||t.indexOf("+json")>0)return JSON.parse(e);if(t.indexOf("application/xml")===0||t.indexOf("+xml")>0)return e}return _.load(e)}function qn(e){return e.includes(", ")?e.split(", "):e}function es(e={}){return typeof e.entries!="function"?{}:Array.from(e.entries()).reduce((t,[r,n])=>(t[r]=qn(n),t),{})}function ts(e,t,{loadSpec:r=!1}={}){const n={ok:e.ok,url:e.url||t,status:e.status,statusText:e.statusText,headers:es(e.headers)},s=n.headers["content-type"],o=r||Zn(s);return(o?e.text:e.blob||e.buffer).call(e).then(i=>{if(n.text=i,n.data=i,o)try{const c=_n(i,s);n.body=c,n.obj=c}catch(c){n.parseError=c}return n})}async function be(e,t={}){typeof e=="object"&&(t=e,e=t.url),t.headers=t.headers||{},t=rt(t),t.headers&&Object.keys(t.headers).forEach(s=>{const o=t.headers[s];typeof o=="string"&&(t.headers[s]=o.replace(/\n+/g," "))}),t.requestInterceptor&&(t=await t.requestInterceptor(t)||t);const r=t.headers["content-type"]||t.headers["Content-Type"];/multipart\/form-data/i.test(r)&&(delete t.headers["content-type"],delete t.headers["Content-Type"]);let n;try{n=await(t.userFetch||fetch)(t.url,t),n=await ts(n,e,t),t.responseInterceptor&&(n=await t.responseInterceptor(n)||n)}catch(s){if(!n)throw s;const o=new Error(n.statusText||`response status is ${n.status}`);throw o.status=n.status,o.statusCode=n.status,o.responseError=s,o}if(!n.ok){const s=new Error(n.statusText||`response status is ${n.status}`);throw s.status=n.status,s.statusCode=n.status,s.response=n,s}return n}function Oo(e,t,r){return r=r||(n=>n),t=t||(n=>n),n=>(typeof n=="string"&&(n={url:n}),n=rt(n),n=t(n),r(e(n)))}const nt=e=>{var t,r;const{baseDoc:n,url:s}=e,o=(t=n??s)!==null&&t!==void 0?t:"";return typeof((r=globalThis.document)===null||r===void 0?void 0:r.baseURI)=="string"?String(new URL(o,globalThis.document.baseURI)):o},Zt=e=>{const{fetch:t,http:r}=e;return t||r||be};async function st(e){const{spec:t,mode:r,allowMetaPatches:n=!0,pathDiscriminator:s,modelPropertyMacro:o,parameterMacro:a,requestInterceptor:i,responseInterceptor:c,skipNormalization:u=!1,useCircularStructures:l,strategies:d}=e,f=nt(e),y=Zt(e),p=d.find(m=>m.match(t));return h(t);async function h(m){f&&(X.refs.docCache[f]=m),X.refs.fetchJSON=Gt(y,{requestInterceptor:i,responseInterceptor:c});const P=[X.refs];typeof a=="function"&&P.push(X.parameters),typeof o=="function"&&P.push(X.properties),r!=="strict"&&P.push(X.allOf);const v=await Bn({spec:m,context:{baseDoc:f},plugins:P,allowMetaPatches:n,pathDiscriminator:s,parameterMacro:a,modelPropertyMacro:o,useCircularStructures:l});return u||(v.spec=p.normalize(v.spec)),v}}const _t=e=>e.replace(/\W/gi,"_");function rs(e,t,{v2OperationIdCompatibilityMode:r}={}){if(r){let n=`${t.toLowerCase()}_${e}`.replace(/[\s!@#$%^&*()_+=[{\]};:<>|./?,\\'""-]/g,"_");return n=n||`${e.substring(1)}_${t}`,n.replace(/((_){2,})/g,"_").replace(/^(_)*/g,"").replace(/([_])*$/g,"")}return`${t.toLowerCase()}${_t(e)}`}function ot(e,t,r="",{v2OperationIdCompatibilityMode:n}={}){return!e||typeof e!="object"?null:(e.operationId||"").replace(/\s/g,"").length?_t(e.operationId):rs(t,r,{v2OperationIdCompatibilityMode:n})}function it(e){const{spec:t}=e,{paths:r}=t,n={};if(!r||t.$$normalized)return e;for(const s in r){const o=r[s];if(o==null||!["object","function"].includes(typeof o))continue;const a=o.parameters;for(const i in o){const c=o[i];if(c==null||!["object","function"].includes(typeof c))continue;const u=ot(c,s,i);if(u){n[u]?n[u].push(c):n[u]=[c];const l=n[u];if(l.length>1)l.forEach((d,f)=>{d.__originalOperationId=d.__originalOperationId||d.operationId,d.operationId=`${u}${f+1}`});else if(typeof c.operationId<"u"){const d=l[0];d.__originalOperationId=d.__originalOperationId||c.operationId,d.operationId=u}}if(i!=="parameters"){const l=[],d={};for(const f in t)(f==="produces"||f==="consumes"||f==="security")&&(d[f]=t[f],l.push(d));if(a&&(d.parameters=a,l.push(d)),l.length){for(const f of l)for(const y in f)if(!Array.isArray(c[y]))c[y]=f[y];else if(y==="parameters")for(const p of f[y])c[y].some(m=>!G(m)&&!G(p)?!1:m===p?!0:["name","$ref","$$ref"].some(P=>typeof m[P]=="string"&&typeof p[P]=="string"&&m[P]===p[P]))||c[y].push(p)}}}}return t.$$normalized=!0,e}const ns={name:"generic",match(){return!0},normalize(e){const{spec:t}=it({spec:e});return t},async resolve(e){return st(e)}};async function ss(e){return st(e)}const os=e=>{try{const{swagger:t}=e;return t==="2.0"}catch{return!1}},qt=e=>{try{const{openapi:t}=e;return typeof t=="string"&&/^3\.0\.(?:[1-9]\d*|0)$/.test(t)}catch{return!1}},at=e=>{try{const{openapi:t}=e;return typeof t=="string"&&/^3\.1\.(?:[1-9]\d*|0)$/.test(t)}catch{return!1}},er=e=>qt(e)||at(e),is={name:"openapi-2",match(e){return os(e)},normalize(e){const{spec:t}=it({spec:e});return t},async resolve(e){return ss(e)}};async function as(e){return st(e)}const cs={name:"openapi-3-0",match(e){return qt(e)},normalize(e){const{spec:t}=it({spec:e});return t},async resolve(e){return as(e)}},{AbortController:us,AbortSignal:ls}=globalThis;typeof globalThis.AbortController>"u"&&(globalThis.AbortController=us);typeof globalThis.AbortSignal>"u"&&(globalThis.AbortSignal=ls);class fs extends or{constructor({swaggerHTTPClient:r=be,swaggerHTTPClientConfig:n={},...s}={}){super({...s,name:"http-swagger-client"});E(this,"swaggerHTTPClient",be);E(this,"swaggerHTTPClientConfig");this.swaggerHTTPClient=r,this.swaggerHTTPClientConfig=n}getHttpClient(){return this.swaggerHTTPClient}async read(r){const n=this.getHttpClient(),s=new AbortController,{signal:o}=s,a=setTimeout(()=>{s.abort()},this.timeout),i=this.getHttpClient().withCredentials||this.withCredentials?"include":"same-origin",c=this.redirects===0?"error":"follow",u=this.redirects>0?this.redirects:void 0;try{return(await n({url:r.uri,signal:o,userFetch:async(d,f)=>{let y=await fetch(d,f);try{y.headers.delete("Content-Type")}catch{y=new Response(y.body,{...y,headers:new Headers(y.headers)}),y.headers.delete("Content-Type")}return y},credentials:i,redirect:c,follow:u,...this.swaggerHTTPClientConfig})).text.arrayBuffer()}catch(l){throw new ir(`Error downloading "${r.uri}"`,{cause:l})}finally{clearTimeout(a)}}}class ds extends Pe{constructor(t={}){super({name:"json-swagger-client",mediaTypes:["application/json"],...t})}async canParse(t){const r=this.fileExtensions.length===0?!0:this.fileExtensions.includes(t.extension),n=this.mediaTypes.includes(t.mediaType);if(!r)return!1;if(n)return!0;if(!n)try{return JSON.parse(t.toString()),!0}catch{return!1}return!1}async parse(t){if(this.sourceMap)throw new L("json-swagger-client parser plugin doesn't support sourceMaps option");const r=new ie,n=t.toString();if(this.allowEmpty&&n.trim()==="")return r;try{const s=Tt(JSON.parse(n));return s.classes.push("result"),r.push(s),r}catch(s){throw new L(`Error parsing "${t.uri}"`,{cause:s})}}}class ps extends Pe{constructor(t={}){super({name:"yaml-1-2-swagger-client",mediaTypes:["text/yaml","application/yaml"],...t})}async canParse(t){const r=this.fileExtensions.length===0?!0:this.fileExtensions.includes(t.extension),n=this.mediaTypes.includes(t.mediaType);if(!r)return!1;if(n)return!0;if(!n)try{return _.load(t.toString(),{schema:Be}),!0}catch{return!1}return!1}async parse(t){if(this.sourceMap)throw new L("yaml-1-2-swagger-client parser plugin doesn't support sourceMaps option");const r=new ie,n=t.toString();try{const s=_.load(n,{schema:Be});if(this.allowEmpty&&typeof s>"u")return r;const o=Tt(s);return o.classes.push("result"),r.push(o),r}catch(s){throw new L(`Error parsing "${t.uri}"`,{cause:s})}}}class hs extends Pe{constructor(r={}){super({name:"openapi-json-3-1-swagger-client",mediaTypes:new Ct(...oe.filterByFormat("generic"),...oe.filterByFormat("json")),...r});E(this,"detectionRegExp",/"openapi"\s*:\s*"(?<version_json>3\.1\.(?:[1-9]\d*|0))"/)}async canParse(r){const n=this.fileExtensions.length===0?!0:this.fileExtensions.includes(r.extension),s=this.mediaTypes.includes(r.mediaType);if(!n)return!1;if(s)return!0;if(!s)try{const o=r.toString();return JSON.parse(o),this.detectionRegExp.test(o)}catch{return!1}return!1}async parse(r){if(this.sourceMap)throw new L("openapi-json-3-1-swagger-client parser plugin doesn't support sourceMaps option");const n=new ie,s=r.toString();if(this.allowEmpty&&s.trim()==="")return n;try{const o=JSON.parse(s),a=ve.refract(o,this.refractorOpts);return a.classes.push("result"),n.push(a),n}catch(o){throw new L(`Error parsing "${r.uri}"`,{cause:o})}}}class ys extends Pe{constructor(r={}){super({name:"openapi-yaml-3-1-swagger-client",mediaTypes:new Ct(...oe.filterByFormat("generic"),...oe.filterByFormat("yaml")),...r});E(this,"detectionRegExp",/(?<YAML>^(["']?)openapi\2\s*:\s*(["']?)(?<version_yaml>3\.1\.(?:[1-9]\d*|0))\3(?:\s+|$))|(?<JSON>"openapi"\s*:\s*"(?<version_json>3\.1\.(?:[1-9]\d*|0))")/m)}async canParse(r){const n=this.fileExtensions.length===0?!0:this.fileExtensions.includes(r.extension),s=this.mediaTypes.includes(r.mediaType);if(!n)return!1;if(s)return!0;if(!s)try{const o=r.toString();return _.load(o),this.detectionRegExp.test(o)}catch{return!1}return!1}async parse(r){if(this.sourceMap)throw new L("openapi-yaml-3-1-swagger-client parser plugin doesn't support sourceMaps option");const n=new ie,s=r.toString();try{const o=_.load(s,{schema:Be});if(this.allowEmpty&&typeof o>"u")return n;const a=ve.refract(o,this.refractorOpts);return a.classes.push("result"),n.push(a),n}catch(o){throw new L(`Error parsing "${r.uri}"`,{cause:o})}}}const ms=e=>e.slice(2),N=e=>{const t=ms(e);return t.reduce((r,n,s)=>{if(Mt(n)){const o=String(S(n.key));r.push(o)}else if(fe(t[s-2])){const o=t[s-2].content.indexOf(n);r.push(o)}return r},[])};class gs{constructor({modelPropertyMacro:t,options:r}){E(this,"modelPropertyMacro");E(this,"options");E(this,"SchemaElement",{leave:(t,r,n,s,o)=>{typeof t.properties>"u"||K(t.properties)&&t.properties.forEach(a=>{if(K(a))try{const u=this.modelPropertyMacro(S(a));a.set("default",u)}catch(u){var i,c;const l=new Error(u,{cause:u});l.fullPath=[...N([...o,n,t]),"properties"],(i=this.options.dereference.dereferenceOpts)===null||i===void 0||(i=i.errors)===null||i===void 0||(c=i.push)===null||c===void 0||c.call(i,l)}})}});this.modelPropertyMacro=t,this.options=r}}class ws{constructor({options:t}){E(this,"options");E(this,"SchemaElement",{leave(t,r,n,s,o){if(typeof t.allOf>"u")return;if(!fe(t.allOf)){var a,i;const d=new TypeError("allOf must be an array");d.fullPath=[...N([...o,n,t]),"allOf"],(a=this.options.dereference.dereferenceOpts)===null||a===void 0||(a=a.errors)===null||a===void 0||(i=a.push)===null||i===void 0||i.call(a,d);return}if(t.allOf.isEmpty){t.remove("allOf");return}if(!t.allOf.content.every(Fe)){var u,l;const d=new TypeError("Elements in allOf must be objects");d.fullPath=[...N([...o,n,t]),"allOf"],(u=this.options.dereference.dereferenceOpts)===null||u===void 0||(u=u.errors)===null||u===void 0||(l=u.push)===null||l===void 0||l.call(u,d);return}for(;t.hasKey("allOf");){const{allOf:d}=t;t.remove("allOf");const f=Ce.all([...d.content,t],{customMerge:y=>S(y)==="enum"?(p,h)=>{if(ze(["json-schema-enum"],p)&&ze(["json-schema-enum"],h)){const m=(v,w)=>fe(v)||fe(w)||K(v)||K(w)?!1:v.equals(S(w)),P=Et(p);return P.content=Ur(m)([...p.content,...h.content]),P}return Ce(p,h)}:Ce});if(t.hasKey("$$ref")||f.remove("$$ref"),t.hasKey("example")){const y=f.getMember("example");y&&(y.value=t.get("example"))}if(t.hasKey("examples")){const y=f.getMember("examples");y&&(y.value=t.get("examples"))}t.content=f.content}}});this.options=t}}var J;class bs{constructor({parameterMacro:t,options:r}){E(this,"parameterMacro");E(this,"options");lt(this,J);E(this,"OperationElement",{enter:t=>{Te(this,J,t)},leave:()=>{Te(this,J,void 0)}});E(this,"ParameterElement",{leave:(t,r,n,s,o)=>{const a=Re(this,J)?S(Re(this,J)):null,i=S(t);try{const l=this.parameterMacro(a,i);t.set("default",l)}catch(l){var c,u;const d=new Error(l,{cause:l});d.fullPath=N([...o,n]),(c=this.options.dereference.dereferenceOpts)===null||c===void 0||(c=c.errors)===null||c===void 0||(u=c.push)===null||u===void 0||u.call(c,d)}}});this.parameterMacro=t,this.options=r}}J=new WeakMap;const le=e=>{if(e.cause==null)return e;let{cause:t}=e;for(;t.cause!=null;)t=t.cause;return t};class Ps extends Ze{}const{wrapError:ke}=_e,De=jt[Symbol.for("nodejs.util.promisify.custom")],k=new ar,H=(e,t,r,n)=>{Mt(n)?n.value=e:Array.isArray(n)&&(n[r]=e)};class ne extends cr{constructor({allowMetaPatches:r=!0,useCircularStructures:n=!1,basePath:s=null,...o}){super(o);E(this,"useCircularStructures");E(this,"allowMetaPatches");E(this,"basePath");this.allowMetaPatches=r,this.useCircularStructures=n,this.basePath=s}async ReferenceElement(r,n,s,o,a,i){try{if(this.indirections.includes(r))return!1;const[p,h]=this.toAncestorLineage([...a,s]),m=this.toBaseURI(S(r.$ref)),P=z(this.reference.uri)===m,v=!P;if(!this.options.resolve.internal&&P||!this.options.resolve.external&&v)return!1;const w=await this.toReference(S(r.$ref)),M=U(m,S(r.$ref));this.indirections.push(r);const I=Y(M);let b=te(w.value.result,I);if(b.id=k.identify(b),ft(b)){const C=S(r.meta.get("referenced-element")),O=`${C}-${S(k.identify(b))}`;this.refractCache.has(O)?b=this.refractCache.get(O):ur(b)?(b=lr.refract(b),b.setMetaProperty("referenced-element",C),this.refractCache.set(O,b)):(b=this.namespace.getElementClass(C).refract(b),this.refractCache.set(O,b))}if(r===b)throw new Q("Recursive Reference Object detected");if(this.indirections.length>this.options.dereference.maxDepth)throw new Me(`Maximum dereference depth of "${this.options.dereference.maxDepth}" has been exceeded in file "${this.reference.uri}"`);if(p.includes(b)){if(w.refSet.circular=!0,this.options.dereference.circular==="error")throw new Q("Circular reference detected");if(this.options.dereference.circular==="replace"){var c,u;const C=new pe.RefElement(b.id,{type:"reference",uri:w.uri,$ref:S(r.$ref),baseURI:M,referencingElement:r}),A=((c=(u=this.options.dereference.strategyOpts["openapi-3-1"])===null||u===void 0?void 0:u.circularReplacer)!==null&&c!==void 0?c:this.options.dereference.circularReplacer)(C);return i.replaceWith(C,H),s?!1:A}}const T=z(w.refSet.rootRef.uri)!==w.uri,j=["error","replace"].includes(this.options.dereference.circular);if((v||T||fr(b)||j)&&!p.includesCycle(b)){var l;h.add(r);const C=new ne({reference:w,namespace:this.namespace,indirections:[...this.indirections],options:this.options,refractCache:this.refractCache,ancestors:p,allowMetaPatches:this.allowMetaPatches,useCircularStructures:this.useCircularStructures,basePath:(l=this.basePath)!==null&&l!==void 0?l:[...N([...a,s,r]),"$ref"]});b=await De(b,C,{keyMap:re,nodeTypeGetter:Z}),h.delete(r)}this.indirections.pop();const g=Et(b);if(g.setMetaProperty("ref-fields",{$ref:S(r.$ref),description:S(r.description),summary:S(r.summary)}),g.setMetaProperty("ref-origin",w.uri),g.setMetaProperty("ref-referencing-element-id",D(k.identify(r))),K(b)&&(r.hasKey("description")&&"description"in b&&(g.remove("description"),g.set("description",r.get("description"))),r.hasKey("summary")&&"summary"in b&&(g.remove("summary"),g.set("summary",r.get("summary")))),this.allowMetaPatches&&K(g)&&!g.hasKey("$$ref")){const C=U(m,M);g.set("$$ref",C)}return i.replaceWith(g,H),s?!1:g}catch(p){var d,f,y;const h=le(p),m=ke(h,{baseDoc:this.reference.uri,$ref:S(r.$ref),pointer:Y(S(r.$ref)),fullPath:(d=this.basePath)!==null&&d!==void 0?d:[...N([...a,s,r]),"$ref"]});(f=this.options.dereference.dereferenceOpts)===null||f===void 0||(f=f.errors)===null||f===void 0||(y=f.push)===null||y===void 0||y.call(f,m);return}}async PathItemElement(r,n,s,o,a,i){try{if(!ce(r.$ref))return;if(this.indirections.includes(r)||ze(["cycle"],r.$ref))return!1;const[p,h]=this.toAncestorLineage([...a,s]),m=this.toBaseURI(S(r.$ref)),P=z(this.reference.uri)===m,v=!P;if(!this.options.resolve.internal&&P||!this.options.resolve.external&&v)return;const w=await this.toReference(S(r.$ref)),M=U(m,S(r.$ref));this.indirections.push(r);const I=Y(M);let b=te(w.value.result,I);if(b.id=k.identify(b),ft(b)){const g=`path-item-${S(k.identify(b))}`;this.refractCache.has(g)?b=this.refractCache.get(g):(b=dt.refract(b),this.refractCache.set(g,b))}if(r===b)throw new Q("Recursive Path Item Object reference detected");if(this.indirections.length>this.options.dereference.maxDepth)throw new Me(`Maximum dereference depth of "${this.options.dereference.maxDepth}" has been exceeded in file "${this.reference.uri}"`);if(p.includes(b)){if(w.refSet.circular=!0,this.options.dereference.circular==="error")throw new Q("Circular reference detected");if(this.options.dereference.circular==="replace"){var c,u;const g=new pe.RefElement(b.id,{type:"path-item",uri:w.uri,$ref:S(r.$ref),baseURI:M,referencingElement:r}),O=((c=(u=this.options.dereference.strategyOpts["openapi-3-1"])===null||u===void 0?void 0:u.circularReplacer)!==null&&c!==void 0?c:this.options.dereference.circularReplacer)(g);return i.replaceWith(g,H),s?!1:O}}const T=z(w.refSet.rootRef.uri)!==w.uri,j=["error","replace"].includes(this.options.dereference.circular);if((v||T||pt(b)&&ce(b.$ref)||j)&&!p.includesCycle(b)){var l;h.add(r);const g=new ne({reference:w,namespace:this.namespace,indirections:[...this.indirections],options:this.options,ancestors:p,allowMetaPatches:this.allowMetaPatches,useCircularStructures:this.useCircularStructures,basePath:(l=this.basePath)!==null&&l!==void 0?l:[...N([...a,s,r]),"$ref"]});b=await De(b,g,{keyMap:re,nodeTypeGetter:Z}),h.delete(r)}if(this.indirections.pop(),pt(b)){const g=new dt([...b.content],D(b.meta),D(b.attributes));if(r.forEach((C,O,A)=>{g.remove(S(O)),g.content.push(A)}),g.remove("$ref"),g.setMetaProperty("ref-fields",{$ref:S(r.$ref)}),g.setMetaProperty("ref-origin",w.uri),g.setMetaProperty("ref-referencing-element-id",D(k.identify(r))),this.allowMetaPatches&&typeof g.get("$$ref")>"u"){const C=U(m,M);g.set("$$ref",C)}b=g}return i.replaceWith(b,H),s?void 0:b}catch(p){var d,f,y;const h=le(p),m=ke(h,{baseDoc:this.reference.uri,$ref:S(r.$ref),pointer:Y(S(r.$ref)),fullPath:(d=this.basePath)!==null&&d!==void 0?d:[...N([...a,s,r]),"$ref"]});(f=this.options.dereference.dereferenceOpts)===null||f===void 0||(f=f.errors)===null||f===void 0||(y=f.push)===null||y===void 0||y.call(f,m);return}}async SchemaElement(r,n,s,o,a,i){try{if(!ce(r.$ref))return;if(this.indirections.includes(r))return!1;const[p,h]=this.toAncestorLineage([...a,s]);let m=await this.toReference(ue(this.reference.uri)),{uri:P}=m;const v=dr(P,r),w=z(v),M=new pr({uri:w}),I=!this.options.resolve.resolvers.some(A=>A.canRead(M)),b=!I;let T=z(this.reference.uri)===v,j=!T;this.indirections.push(r);let g;try{if(I||b){P=this.toBaseURI(v);const A=v,x=B(m.value.result);if(g=hr(A,x),g=B(g),g.id=k.identify(g),!this.options.resolve.internal&&T||!this.options.resolve.external&&j)return}else{if(P=this.toBaseURI(v),T=z(this.reference.uri)===P,j=!T,!this.options.resolve.internal&&T||!this.options.resolve.external&&j)return;m=await this.toReference(ue(v));const A=Y(v),x=B(m.value.result);g=te(x,A),g=B(g),g.id=k.identify(g)}}catch(A){if(b&&A instanceof yr)if(mr(ht(v))){if(T=z(this.reference.uri)===P,j=!T,!this.options.resolve.internal&&T||!this.options.resolve.external&&j)return;m=await this.toReference(ue(v));const x=ht(v),F=B(m.value.result);g=gr(x,F),g=B(g),g.id=k.identify(g)}else{if(P=this.toBaseURI(S(v)),T=z(this.reference.uri)===P,j=!T,!this.options.resolve.internal&&T||!this.options.resolve.external&&j)return;m=await this.toReference(ue(v));const x=Y(v),F=B(m.value.result);g=te(F,x),g=B(g),g.id=k.identify(g)}else throw A}if(r===g)throw new Q("Recursive Schema Object reference detected");if(this.indirections.length>this.options.dereference.maxDepth)throw new Me(`Maximum dereference depth of "${this.options.dereference.maxDepth}" has been exceeded in file "${this.reference.uri}"`);if(p.includes(g)){if(m.refSet.circular=!0,this.options.dereference.circular==="error")throw new Q("Circular reference detected");if(this.options.dereference.circular==="replace"){var c,u;const A=new pe.RefElement(g.id,{type:"json-schema",uri:m.uri,$ref:S(r.$ref),baseURI:U(P,v),referencingElement:r}),F=((c=(u=this.options.dereference.strategyOpts["openapi-3-1"])===null||u===void 0?void 0:u.circularReplacer)!==null&&c!==void 0?c:this.options.dereference.circularReplacer)(A);return i.replaceWith(F,H),s?!1:F}}const C=z(m.refSet.rootRef.uri)!==m.uri,O=["error","replace"].includes(this.options.dereference.circular);if((j||C||Fe(g)&&ce(g.$ref)||O)&&!p.includesCycle(g)){var l;h.add(r);const A=new ne({reference:m,namespace:this.namespace,indirections:[...this.indirections],options:this.options,useCircularStructures:this.useCircularStructures,allowMetaPatches:this.allowMetaPatches,ancestors:p,basePath:(l=this.basePath)!==null&&l!==void 0?l:[...N([...a,s,r]),"$ref"]});g=await De(g,A,{keyMap:re,nodeTypeGetter:Z}),h.delete(r)}if(this.indirections.pop(),wr(g)){const A=D(g);return A.setMetaProperty("ref-fields",{$ref:S(r.$ref)}),A.setMetaProperty("ref-origin",m.uri),A.setMetaProperty("ref-referencing-element-id",D(k.identify(r))),i.replaceWith(A,H),s?!1:A}if(Fe(g)){const A=new br([...g.content],D(g.meta),D(g.attributes));if(r.forEach((x,F,xe)=>{A.remove(S(F)),A.content.push(xe)}),A.remove("$ref"),A.setMetaProperty("ref-fields",{$ref:S(r.$ref)}),A.setMetaProperty("ref-origin",m.uri),A.setMetaProperty("ref-referencing-element-id",D(k.identify(r))),this.allowMetaPatches&&typeof A.get("$$ref")>"u"){const x=U(P,v);A.set("$$ref",x)}g=A}return i.replaceWith(g,H),s?void 0:g}catch(p){var d,f,y;const h=le(p),m=new Ps(`Could not resolve reference: ${h.message}`,{baseDoc:this.reference.uri,$ref:S(r.$ref),fullPath:(d=this.basePath)!==null&&d!==void 0?d:[...N([...a,s,r]),"$ref"],cause:h});(f=this.options.dereference.dereferenceOpts)===null||f===void 0||(f=f.errors)===null||f===void 0||(y=f.push)===null||y===void 0||y.call(f,m);return}}async LinkElement(){}async ExampleElement(r,n,s,o,a,i){try{return await super.ExampleElement(r,n,s,o,a,i)}catch(d){var c,u,l;const f=le(d),y=ke(f,{baseDoc:this.reference.uri,externalValue:S(r.externalValue),fullPath:(c=this.basePath)!==null&&c!==void 0?c:[...N([...a,s,r]),"externalValue"]});(u=this.options.dereference.dereferenceOpts)===null||u===void 0||(u=u.errors)===null||u===void 0||(l=u.push)===null||l===void 0||l.call(u,y);return}}}const vs=Pr[Symbol.for("nodejs.util.promisify.custom")];class Os{constructor({parameterMacro:t,modelPropertyMacro:r,mode:n,options:s,...o}){const a=[];a.push(new ne({...o,options:s})),typeof r=="function"&&a.push(new gs({modelPropertyMacro:r,options:s})),n!=="strict"&&a.push(new ws({options:s})),typeof t=="function"&&a.push(new bs({parameterMacro:t,options:s}));const i=vs(a,{nodeTypeGetter:Z});Object.assign(this,i)}}const As=jt[Symbol.for("nodejs.util.promisify.custom")];class Ss extends vr{constructor({allowMetaPatches:r=!1,parameterMacro:n=null,modelPropertyMacro:s=null,mode:o="non-strict",ancestors:a=[],...i}={}){super({...i});E(this,"allowMetaPatches");E(this,"parameterMacro");E(this,"modelPropertyMacro");E(this,"mode");E(this,"ancestors");this.name="openapi-3-1-swagger-client",this.allowMetaPatches=r,this.parameterMacro=n,this.modelPropertyMacro=s,this.mode=o,this.ancestors=[...a]}async dereference(r,n){var s;const o=Or(Ar),a=(s=n.dereference.refSet)!==null&&s!==void 0?s:new Ve,i=new Ve;let c=a,u;a.has(r.uri)?u=a.find(f=>f.uri===r.uri):(u=new de({uri:r.uri,value:r.parseResult}),a.add(u)),n.dereference.immutable&&(a.refs.map(f=>new de({...f,value:D(f.value)})).forEach(f=>i.add(f)),u=i.find(f=>f.uri===r.uri),c=i);const l=new Os({reference:u,namespace:o,options:n,allowMetaPatches:this.allowMetaPatches,ancestors:this.ancestors,modelPropertyMacro:this.modelPropertyMacro,mode:this.mode,parameterMacro:this.parameterMacro}),d=await As(c.rootRef.value,l,{keyMap:re,nodeTypeGetter:Z});return n.dereference.immutable&&i.refs.filter(f=>f.uri.startsWith("immutable://")).map(f=>new de({...f,uri:f.uri.replace(/^immutable:\/\//,"")})).forEach(f=>a.add(f)),n.dereference.refSet===null&&a.clean(),i.clean(),d}}const xs=e=>{const t=S(e.meta.get("baseURI")),r=e.meta.get("referencingElement");return new pe.ObjectElement({$ref:t},D(r.meta),D(r.attributes))},Ae=async e=>{const{spec:t,timeout:r,redirects:n,requestInterceptor:s,responseInterceptor:o,pathDiscriminator:a=[],allowMetaPatches:i=!1,useCircularStructures:c=!1,skipNormalization:u=!1,parameterMacro:l=null,modelPropertyMacro:d=null,mode:f="non-strict",strategies:y}=e;try{const{cache:p}=Ae,h=y.find(xe=>xe.match(t)),m=Rt(yt())?yt():ge,P=nt(e),v=U(m,P);let w;p.has(t)?w=p.get(t):(w=ve.refract(t),w.classes.push("result"),p.set(t,w));const M=new ie([w]),I=zr(a),b=I===""?"":`#${I}`,T=te(w,I),j=new de({uri:v,value:M}),g=new Ve({refs:[j]});I!==""&&(g.rootRef=void 0);const C=[new Set([T])],O=[],A=await Sr(T,{resolve:{baseURI:`${v}${b}`,resolvers:[new fs({timeout:r||1e4,redirects:n||10})],resolverOpts:{swaggerHTTPClientConfig:{requestInterceptor:s,responseInterceptor:o}},strategies:[new Tr]},parse:{mediaType:oe.latest(),parsers:[new hs({allowEmpty:!1,sourceMap:!1}),new ys({allowEmpty:!1,sourceMap:!1}),new ds({allowEmpty:!1,sourceMap:!1}),new ps({allowEmpty:!1,sourceMap:!1}),new Rr({allowEmpty:!1,sourceMap:!1})]},dereference:{maxDepth:100,strategies:[new Ss({allowMetaPatches:i,useCircularStructures:c,parameterMacro:l,modelPropertyMacro:d,mode:f,ancestors:C})],refSet:g,dereferenceOpts:{errors:O},immutable:!1,circular:c?"ignore":"replace",circularReplacer:c?xr.dereference.circularReplacer:xs}}),x=Cr(T,A,w),F=u?x:h.normalize(x);return{spec:S(F),errors:O}}catch(p){if(p instanceof Vr)return{spec:t,errors:[]};throw p}};Ae.cache=new WeakMap;const St=e=>{if(!K(e))return e;const t=[Mr({operationIdNormalizer:(n,s,o)=>ot({operationId:n},s,o,{v2OperationIdCompatibilityMode:!1})}),Er(),jr(),Ir(),$r()];return kr(e,t,{toolboxCreator:Dr,visitorOptions:{keyMap:re,nodeTypeGetter:Z}})},Rs=e=>t=>{const r=ve.refract(t);r.classes.push("result");const n=e(r),s=S(n);return Ae.cache.set(s,n),S(n)},Ao={name:"openapi-3-1-apidom",match(e){return at(e)},normalize(e){if(!mt(e)&&G(e)&&!e.$$normalized){const t=Rs(St)(e);return t.$$normalized=!0,t}return mt(e)?St(e):e},async resolve(e){return Ae(e)}},Ts=async e=>{const{spec:t,requestInterceptor:r,responseInterceptor:n}=e,s=nt(e),o=Zt(e),a=t||await Gt(o,{requestInterceptor:r,responseInterceptor:n})(s),i={...e,spec:a};return e.strategies.find(u=>u.match(a)).resolve(i)},Cs=e=>async t=>{const r={...e,...t};return Ts(r)},Ms=Cs({strategies:[cs,is,ns]}),Es={body:js,header:$s,query:Ds,path:ks,formData:Is};function js({req:e,value:t}){t!==void 0&&(e.body=t)}function Is({req:e,value:t,parameter:r}){if(t===!1&&r.type==="boolean"&&(t="false"),t===0&&["number","integer"].indexOf(r.type)>-1&&(t="0"),t)e.form=e.form||{},e.form[r.name]={collectionFormat:r.collectionFormat,value:t};else if(r.allowEmptyValue&&t!==void 0){e.form=e.form||{};const n=r.name;e.form[n]=e.form[n]||{},e.form[n].allowEmptyValue=!0}}function $s({req:e,parameter:t,value:r}){e.headers=e.headers||{},typeof r<"u"&&(e.headers[t.name]=r)}function ks({req:e,value:t,parameter:r,baseURL:n}){if(t!==void 0){const s=e.url.replace(n,""),o=Le(s,{[r.name]:t});e.url=n+o}}function Ds({req:e,value:t,parameter:r}){if(e.query=e.query||{},t===!1&&r.type==="boolean"&&(t="false"),t===0&&["number","integer"].indexOf(r.type)>-1&&(t="0"),t)e.query[r.name]={collectionFormat:r.collectionFormat,value:t};else if(r.allowEmptyValue&&t!==void 0){const n=r.name;e.query[n]=e.query[n]||{},e.query[n].allowEmptyValue=!0}}function Se(e,t){return t.includes("application/json")?typeof e=="string"?e:(Array.isArray(e)&&(e=e.map(r=>{try{return JSON.parse(r)}catch{return r}})),JSON.stringify(e)):String(e)}const Us="%3D",Ns="%26",Fs=e=>Jr(e).replace(/[=&]/gu,t=>t==="="?Us:Ns),Ye=(e,t={})=>Br(e,Nr({encoders:{name:Wr,value:Fs},validators:{name:Hr,value:Lr}},t));function zs({req:e,value:t,parameter:r,baseURL:n}){const{name:s,style:o,explode:a,content:i}=r;if(t===void 0)return;const c=e.url.replace(n,"");let u;if(i){const l=Object.keys(i)[0];u=Le(c,{[s]:t},{encoder:d=>Yt(Se(d,l))})}else u=Le(c,{[s]:t},{encoder:l=>tt({key:r.name,value:l,style:o||"simple",explode:a??!1,escape:"reserved"})});e.url=n+u}function Vs({req:e,value:t,parameter:r}){if(e.query=e.query||{},t!==void 0&&r.content){const n=Object.keys(r.content)[0],s=Se(t,n);if(s)e.query[r.name]=s;else if(r.allowEmptyValue){const o=r.name;e.query[o]=e.query[o]||{},e.query[o].allowEmptyValue=!0}return}if(t===!1&&(t="false"),t===0&&(t="0"),t){const{style:n,explode:s,allowReserved:o}=r;e.query[r.name]={value:t,serializationOption:{style:n,explode:s,allowReserved:o}}}else if(r.allowEmptyValue&&t!==void 0){const n=r.name;e.query[n]=e.query[n]||{},e.query[n].allowEmptyValue=!0}}const Bs=["accept","authorization","content-type"];function Ls({req:e,parameter:t,value:r}){if(e.headers=e.headers||{},!(Bs.indexOf(t.name.toLowerCase())>-1)){if(r!==void 0&&t.content){const n=Object.keys(t.content)[0];e.headers[t.name]=Se(r,n);return}r!==void 0&&!(Array.isArray(r)&&r.length===0)&&(e.headers[t.name]=tt({key:t.name,value:r,style:t.style||"simple",explode:typeof t.explode>"u"?!1:t.explode,escape:!1}))}}function Hs({req:e,parameter:t,value:r}){const{name:n}=t;if(e.headers=e.headers||{},r!==void 0&&t.content){const o=Object.keys(t.content)[0],a=Se(r,o);e.headers.Cookie=Ye({[n]:a});return}if(r!==void 0&&!(Array.isArray(r)&&r.length===0)){var s;const o=tt({key:t.name,value:r,escape:!1,style:t.style||"form",explode:(s=t.explode)!==null&&s!==void 0?s:!1}),a=Array.isArray(r)&&t.explode?`${n}=${o}`:o;e.headers.Cookie=Ye({[n]:a})}}const Js=Object.freeze(Object.defineProperty({__proto__:null,cookie:Hs,header:Ls,path:zs,query:Vs},Symbol.toStringTag,{value:"Module"})),Ws=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window,{btoa:tr}=Ws;function Ks(e,t){const{operation:r,requestBody:n,securities:s,spec:o,attachContentTypeForEmptyPayload:a}=e;let{requestContentType:i}=e;t=Gs({request:t,securities:s,operation:r,spec:o});const c=r.requestBody||{},u=Object.keys(c.content||{}),l=i&&u.indexOf(i)>-1;if(n||a){if(i&&l)t.headers["Content-Type"]=i;else if(!i){const h=u[0];h&&(t.headers["Content-Type"]=h,i=h)}}else i&&l&&(t.headers["Content-Type"]=i);if(!e.responseContentType&&r.responses){const h=Object.entries(r.responses).filter(([m,P])=>{const v=parseInt(m,10);return v>=200&&v<300&&G(P.content)}).reduce((m,[,P])=>m.concat(Object.keys(P.content)),[]);h.length>0&&(t.headers.accept=h.join(", "))}if(n)if(i){if(u.indexOf(i)>-1)if(i==="application/x-www-form-urlencoded"||i==="multipart/form-data")if(typeof n=="object"){var d,f;const h=(d=(f=c.content[i])===null||f===void 0?void 0:f.encoding)!==null&&d!==void 0?d:{};t.form={},Object.keys(n).forEach(m=>{let P;try{P=JSON.parse(n[m])}catch{P=n[m]}t.form[m]={value:P,encoding:h[m]||{}}})}else if(typeof n=="string"){var y,p;const h=(y=(p=c.content[i])===null||p===void 0?void 0:p.encoding)!==null&&y!==void 0?y:{};try{t.form={};const m=JSON.parse(n);Object.entries(m).forEach(([P,v])=>{t.form[P]={value:v,encoding:h[P]||{}}})}catch{t.form=n}}else t.form=n;else t.body=n}else t.body=n;return t}function Gs({request:e,securities:t={},operation:r={},spec:n}){var s;const o={...e},{authorized:a={}}=t,i=r.security||n.security||[],c=a&&!!Object.keys(a).length,u=(n==null||(s=n.components)===null||s===void 0?void 0:s.securitySchemes)||{};return o.headers=o.headers||{},o.query=o.query||{},!Object.keys(t).length||!c||!i||Array.isArray(r.security)&&!r.security.length?e:(i.forEach(l=>{Object.keys(l).forEach(d=>{const f=a[d],y=u[d];if(!f)return;const p=f.value||f,{type:h}=y;if(f){if(h==="apiKey")y.in==="query"&&(o.query[y.name]=p),y.in==="header"&&(o.headers[y.name]=p),y.in==="cookie"&&(o.cookies[y.name]=p);else if(h==="http"){if(/^basic$/i.test(y.scheme)){const m=p.username||"",P=p.password||"",v=tr(`${m}:${P}`);o.headers.Authorization=`Basic ${v}`}/^bearer$/i.test(y.scheme)&&(o.headers.Authorization=`Bearer ${p}`)}else if(h==="oauth2"||h==="openIdConnect"){const m=f.token||{},P=y["x-tokenName"]||"access_token",v=m[P];let w=m.token_type;(!w||w.toLowerCase()==="bearer")&&(w="Bearer"),o.headers.Authorization=`${w} ${v}`}}})}),o)}function Qs(e,t){const{spec:r,operation:n,securities:s,requestContentType:o,responseContentType:a,attachContentTypeForEmptyPayload:i}=e;if(t=Ys({request:t,securities:s,operation:n,spec:r}),t.body||t.form||i)o?t.headers["Content-Type"]=o:Array.isArray(n.consumes)?[t.headers["Content-Type"]]=n.consumes:Array.isArray(r.consumes)?[t.headers["Content-Type"]]=r.consumes:n.parameters&&n.parameters.filter(c=>c.type==="file").length?t.headers["Content-Type"]="multipart/form-data":n.parameters&&n.parameters.filter(c=>c.in==="formData").length&&(t.headers["Content-Type"]="application/x-www-form-urlencoded");else if(o){const c=n.parameters&&n.parameters.filter(l=>l.in==="body").length>0,u=n.parameters&&n.parameters.filter(l=>l.in==="formData").length>0;(c||u)&&(t.headers["Content-Type"]=o)}return!a&&Array.isArray(n.produces)&&n.produces.length>0&&(t.headers.accept=n.produces.join(", ")),t}function Ys({request:e,securities:t={},operation:r={},spec:n}){const s={...e},{authorized:o={},specSecurity:a=[]}=t,i=r.security||a,c=o&&!!Object.keys(o).length,u=n.securityDefinitions;return s.headers=s.headers||{},s.query=s.query||{},!Object.keys(t).length||!c||!i||Array.isArray(r.security)&&!r.security.length?e:(i.forEach(l=>{Object.keys(l).forEach(d=>{const f=o[d];if(!f)return;const{token:y}=f,p=f.value||f,h=u[d],{type:m}=h,P=h["x-tokenName"]||"access_token",v=y&&y[P];let w=y&&y.token_type;if(f)if(m==="apiKey"){const M=h.in==="query"?"query":"headers";s[M]=s[M]||{},s[M][h.name]=p}else if(m==="basic")if(p.header)s.headers.authorization=p.header;else{const M=p.username||"",I=p.password||"";p.base64=tr(`${M}:${I}`),s.headers.authorization=`Basic ${p.base64}`}else m==="oauth2"&&v&&(w=!w||w.toLowerCase()==="bearer"?"Bearer":w,s.headers.authorization=`${w} ${v}`)})}),s)}function Xs(e,t,r){if(!e||typeof e!="object"||!e.paths||typeof e.paths!="object")return null;const{paths:n}=e;for(const s in n)for(const o in n[s]){if(o.toUpperCase()==="PARAMETERS")continue;const a=n[s][o];if(!a||typeof a!="object")continue;const i={spec:e,pathName:s,method:o.toUpperCase(),operation:a};if(t(i))return i}}function Zs(e,t){return Xs(e,t)||null}function rr(e,t){return`${t.toLowerCase()}-${e}`}function _s(e,t){return!e||!e.paths?null:Zs(e,({pathName:r,method:n,operation:s})=>{if(!s||typeof s!="object")return!1;const o=s.operationId,a=ot(s,r,n),i=rr(r,n);return[a,i,o].some(c=>c&&c===t)})}const xt=e=>Array.isArray(e)?e:[],se=(e,{recurse:t=!0,depth:r=1}={})=>{if(G(e)){if(e.type==="object"||e.type==="array"||Array.isArray(e.type)&&(e.type.includes("object")||e.type.includes("array")))return e;if(!(r>zt)&&t){const n=Array.isArray(e.oneOf)?e.oneOf.find(o=>se(o,{recurse:t,depth:r+1})):void 0;if(n)return n;const s=Array.isArray(e.anyOf)?e.anyOf.find(o=>se(o,{recurse:t,depth:r+1})):void 0;if(s)return s}}},Ue=({value:e,silentFail:t=!1})=>{try{const r=JSON.parse(e);if(G(r)||Array.isArray(r))return r;if(!t)throw new Error("Expected JSON serialized object or array")}catch{if(!t)throw new Error("Could not parse parameter value string as JSON Object or JSON Array")}return e},ye=e=>{try{return new URL(e)}catch{const t=new URL(e,ge),r=String(e).startsWith("/")?t.pathname:t.pathname.substring(1);return{hash:t.hash,host:"",hostname:"",href:"",origin:"",password:"",pathname:r,port:"",protocol:"",search:t.search,searchParams:t.searchParams}}};class qs extends Ze{}const eo=(e,t)=>t.filter(r=>r.name===e),to=e=>{const t={};e.forEach(n=>{t[n.in]||(t[n.in]={}),t[n.in][n.name]=n});const r=[];return Object.keys(t).forEach(n=>{Object.keys(t[n]).forEach(s=>{r.push(t[n][s])})}),r},ro={buildRequest:no};function So({http:e,fetch:t,spec:r,operationId:n,pathName:s,method:o,parameters:a,securities:i,...c}){const u=e||t||be;s&&o&&!n&&(n=rr(s,o));const l=ro.buildRequest({spec:r,operationId:n,parameters:a,securities:i,http:u,...c});return l.body&&(G(l.body)||Array.isArray(l.body))&&(l.body=JSON.stringify(l.body)),u(l)}function no(e){const{spec:t,operationId:r,responseContentType:n,scheme:s,requestInterceptor:o,responseInterceptor:a,contextUrl:i,userFetch:c,server:u,serverVariables:l,http:d,signal:f,serverVariableEncoder:y}=e;let{parameters:p,parameterBuilders:h,baseURL:m}=e;const P=er(t);h||(P?h=Js:h=Es);let w={url:"",credentials:d&&d.withCredentials?"include":"same-origin",headers:{},cookies:{}};f&&(w.signal=f),o&&(w.requestInterceptor=o),a&&(w.responseInterceptor=a),c&&(w.userFetch=c);const M=_s(t,r);if(!M)throw new qs(`Operation ${r} not found`);const{operation:I={},method:b,pathName:T}=M;if(m=m??so({spec:t,scheme:s,contextUrl:i,server:u,serverVariables:l,pathName:T,method:b,serverVariableEncoder:y}),w.url+=m,!r)return delete w.cookies,w;w.url+=T,w.method=`${b}`.toUpperCase(),p=p||{};const j=t.paths[T]||{};n&&(w.headers.accept=n);const g=to([].concat(xt(I.parameters)).concat(xt(j.parameters)));g.forEach(O=>{const A=h[O.in];let x;if(O.in==="body"&&O.schema&&O.schema.properties&&(x=p),x=O&&O.name&&p[O.name],typeof x>"u"?x=O&&O.name&&p[`${O.in}.${O.name}`]:eo(O.name,g).length>1&&console.warn(`Parameter '${O.name}' is ambiguous because the defined spec has more than one parameter with the name: '${O.name}' and the passed-in parameter values did not define an 'in' value.`),x!==null){if(typeof O.default<"u"&&typeof x>"u"&&(x=O.default),typeof x>"u"&&O.required&&!O.allowEmptyValue)throw new Error(`Required parameter ${O.name} is not provided`);P&&typeof x=="string"&&(Ee("type",O.schema)&&typeof O.schema.type=="string"&&se(O.schema,{recurse:!1})?x=Ue({value:x,silentFail:!1}):Ee("type",O.schema)&&Array.isArray(O.schema.type)&&se(O.schema,{recurse:!1})?x=Ue({value:x,silentFail:!0}):!Ee("type",O.schema)&&se(O.schema,{recurse:!0})&&(x=Ue({value:x,silentFail:!0}))),A&&A({req:w,parameter:O,value:x,operation:I,spec:t,baseURL:m})}});const C={...e,operation:I};if(P?w=Ks(C,w):w=Qs(C,w),w.cookies&&Object.keys(w.cookies).length>0){const O=Ye(w.cookies);Kr(w.headers.Cookie)?w.headers.Cookie+=`; ${O}`:w.headers.Cookie=O}return w.cookies&&delete w.cookies,rt(w)}const Xe=e=>e?e.replace(/\W/g,""):null;function so(e){return er(e.spec)?oo(e):ao(e)}const Ne=e=>Array.isArray(e)&&e.length>0;function oo({spec:e,pathName:t,method:r,server:n,contextUrl:s,serverVariables:o={},serverVariableEncoder:a}){var i,c;let u=[],l="",d;const f=e==null||(i=e.paths)===null||i===void 0||(i=i[t])===null||i===void 0||(i=i[(r||"").toLowerCase()])===null||i===void 0?void 0:i.servers,y=e==null||(c=e.paths)===null||c===void 0||(c=c[t])===null||c===void 0?void 0:c.servers,p=e==null?void 0:e.servers;if(u=Ne(f)?f:Ne(y)?y:Ne(p)?p:[Pn],n&&(d=u.find(h=>h.url===n),d&&(l=n)),l||([d]=u,l=d.url),Gr(l,{strict:!0})){const h=Object.entries({...d.variables}).reduce((m,[P,v])=>(m[P]=v.default,m),{});l=Qr(l,{...h,...o},{encoder:typeof a=="function"?a:Fr})}return io(l,s)}function io(e="",t=""){const r=ye(e&&t?U(t,e):e),n=ye(t),s=Xe(r.protocol)||Xe(n.protocol),o=r.host||n.host,a=r.pathname;let i;return s&&o?i=`${s}://${o+a}`:i=a,i[i.length-1]==="/"?i.slice(0,-1):i}function ao({spec:e,scheme:t,contextUrl:r=""}){const n=ye(r),s=Array.isArray(e.schemes)?e.schemes[0]:null,o=t||s||Xe(n.protocol)||"http",a=e.host||n.host||"",i=e.basePath||"";let c;return a?c=`${o}://${a+i}`:c=i,c[c.length-1]==="/"?c.slice(0,-1):c}const co=async(e,t,r={})=>{const{returnEntireTree:n,baseDoc:s,requestInterceptor:o,responseInterceptor:a,parameterMacro:i,modelPropertyMacro:c,useCircularStructures:u,strategies:l}=r,d={spec:e,pathDiscriminator:t,baseDoc:s,requestInterceptor:o,responseInterceptor:a,parameterMacro:i,modelPropertyMacro:c,useCircularStructures:u,strategies:l},y=l.find(h=>h.match(e)).normalize(e),p=await Ms({spec:y,...d,allowMetaPatches:!0,skipNormalization:!at(e)});return!n&&Array.isArray(t)&&t.length&&(p.spec=t.reduce((h,m)=>h==null?void 0:h[m],p.spec)||null),p},xo=e=>async(t,r,n={})=>{const s={...e,...n};return co(t,r,s)};export{cs as a,Ao as b,no as c,Oo as d,So as e,xo as f,ns as g,be as h,ot as i,Cs as m,is as o,ts as s};
