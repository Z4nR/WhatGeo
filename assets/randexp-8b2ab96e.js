import{g as c}from"./@babel-4e92b73b.js";import{l as m}from"./ret-c6148803.js";import{l as g}from"./drange-086dd526.js";const f=m,u=g,s=f.types;var R=class h{constructor(t,e){if(this._setDefaults(t),t instanceof RegExp)this.ignoreCase=t.ignoreCase,this.multiline=t.multiline,t=t.source;else if(typeof t=="string")this.ignoreCase=e&&e.indexOf("i")!==-1,this.multiline=e&&e.indexOf("m")!==-1;else throw new Error("Expected a regexp or string");this.tokens=f(t)}_setDefaults(t){this.max=t.max!=null?t.max:h.prototype.max!=null?h.prototype.max:100,this.defaultRange=t.defaultRange?t.defaultRange:this.defaultRange.clone(),t.randInt&&(this.randInt=t.randInt)}gen(){return this._gen(this.tokens,[])}_gen(t,e){var n,r,i,a,l;switch(t.type){case s.ROOT:case s.GROUP:if(t.followedBy||t.notFollowedBy)return"";for(t.remember&&t.groupNumber===void 0&&(t.groupNumber=e.push(null)-1),n=t.options?this._randSelect(t.options):t.stack,r="",a=0,l=n.length;a<l;a++)r+=this._gen(n[a],e);return t.remember&&(e[t.groupNumber]=r),r;case s.POSITION:return"";case s.SET:var d=this._expand(t);return d.length?String.fromCharCode(this._randSelect(d)):"";case s.REPETITION:for(i=this.randInt(t.min,t.max===1/0?t.min+this.max:t.max),r="",a=0;a<i;a++)r+=this._gen(t.value,e);return r;case s.REFERENCE:return e[t.value-1]||"";case s.CHAR:var o=this.ignoreCase&&this._randBool()?this._toOtherCase(t.value):t.value;return String.fromCharCode(o)}}_toOtherCase(t){return t+(97<=t&&t<=122?-32:65<=t&&t<=90?32:0)}_randBool(){return!this.randInt(0,1)}_randSelect(t){return t instanceof u?t.index(this.randInt(0,t.length-1)):t[this.randInt(0,t.length-1)]}_expand(t){if(t.type===f.types.CHAR)return new u(t.value);if(t.type===f.types.RANGE)return new u(t.from,t.to);{let e=new u;for(let n=0;n<t.set.length;n++){let r=this._expand(t.set[n]);if(e.add(r),this.ignoreCase)for(let i=0;i<r.length;i++){let a=r.index(i),l=this._toOtherCase(a);a!==l&&e.add(l)}}return t.not?this.defaultRange.clone().subtract(e):this.defaultRange.clone().intersect(e)}}randInt(t,e){return t+Math.floor(Math.random()*(1+e-t))}get defaultRange(){return this._range=this._range||new u(32,126)}set defaultRange(t){this._range=t}static randexp(t,e){var n;return typeof t=="string"&&(t=new RegExp(t,e)),t._randexp===void 0?(n=new h(t,e),t._randexp=n):(n=t._randexp,n._setDefaults(t)),n.gen()}static sugar(){RegExp.prototype.gen=function(){return h.randexp(this)}}};const E=c(R);export{E as r};
