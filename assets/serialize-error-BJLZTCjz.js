var p,y;function S(){if(y)return p;y=1;class u extends Error{constructor(e){super(u._prepareSuperMessage(e)),Object.defineProperty(this,"name",{value:"NonError",configurable:!0,writable:!0}),Error.captureStackTrace&&Error.captureStackTrace(this,u)}static _prepareSuperMessage(e){try{return JSON.stringify(e)}catch{return String(e)}}}const b=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0}],c=Symbol(".toJSON called"),E=r=>{r[c]=!0;const e=r.toJSON();return delete r[c],e},a=({from:r,seen:e,to_:i,forceEnumerable:s,maxDepth:l,depth:f})=>{const n=i||(Array.isArray(r)?[]:{});if(e.push(r),f>=l)return n;if(typeof r.toJSON=="function"&&r[c]!==!0)return E(r);for(const[t,o]of Object.entries(r)){if(typeof Buffer=="function"&&Buffer.isBuffer(o)){n[t]="[object Buffer]";continue}if(typeof o!="function"){if(!o||typeof o!="object"){n[t]=o;continue}if(!e.includes(r[t])){f++,n[t]=a({from:r[t],seen:e.slice(),forceEnumerable:s,maxDepth:l,depth:f});continue}n[t]="[Circular]"}}for(const{property:t,enumerable:o}of b)typeof r[t]=="string"&&Object.defineProperty(n,t,{value:r[t],enumerable:s?!0:o,configurable:!0,writable:!0});return n};return p={serializeError:(r,e={})=>{const{maxDepth:i=Number.POSITIVE_INFINITY}=e;return typeof r=="object"&&r!==null?a({from:r,seen:[],forceEnumerable:!0,maxDepth:i,depth:0}):typeof r=="function"?`[Function: ${r.name||"anonymous"}]`:r},deserializeError:(r,e={})=>{const{maxDepth:i=Number.POSITIVE_INFINITY}=e;if(r instanceof Error)return r;if(typeof r=="object"&&r!==null&&!Array.isArray(r)){const s=new Error;return a({from:r,seen:[],to_:s,maxDepth:i,depth:0}),s}return new u(r)}},p}var I=S();export{I as s};
